{
	"appsUsed":[
		
	],
	"createdTime":1758037023935,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1758640507546,
		"deployedBy":44567,
		"deployedDefinitionId":"68d2b97b5875ec628847ef96",
		"status":"DEPLOYED",
		"version":2,
		"workflowVersion":12
	},
	"edges":[
		{
			"fromNodeId":"n_SbHwE",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Scu8b",
			"type":"next"
		},
		{
			"fromNodeId":"n_Scu8b",
			"priority":0,
			"skip":false,
			"toNodeId":"n_74zfW",
			"type":"next"
		}
	],
	"id":"68c9841f743b481c033e5376",
	"lastModifiedBy":44567,
	"lcName":"dp-func-ijpintg-prod-sa",
	"modifiedTime":1758698714628,
	"name":"dp-func-ijpintg-prod-sa",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":875,
				"resourceName":"callables_from_api"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_rNwts-1",
			"id":"n_SbHwE",
			"index":1,
			"inputs":{
				"request":{
					"contentType":"application/json",
					"body":{
						"type":"object",
						"properties":{
							"entity":{
								"type":"string",
								"title":"Entity"
							},
							"update_attr":{
								"type":"string",
								"title":"Update Attr"
							},
							"update_start_time":{
								"type":"string",
								"title":"Update Start Time"
							},
							"update_end_time":{
								"type":"string",
								"title":"Update End Time"
							},
							"page_num":{
								"type":"string",
								"title":"Page Num"
							}
						},
						"additionalProperties":false,
						"required":[]
					}
				},
				"endpointType":"REST",
				"response":[
					{
						"name":"Ok",
						"status":200,
						"contentType":"application/json",
						"textBody":{
							"type":"string"
						}
					}
				],
				"streamingResponse":false
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via API",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.IJP_ENPOINT_URL",
					"root.parameters.entity",
					"root.parameters.update_attr",
					"root.parameters.update_start_time",
					"root.parameters.update_end_time",
					"root.parameters.page_num",
					"root.parameters.SECRET_KEY"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":776,
				"resourceName":"code_by_unifyapps_python",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_rNwts-1",
			"id":"n_Scu8b",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"result":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Result"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"properties":{
						"IJP_ENPOINT_URL":{
							"type":"string",
							"title":"IJP_ENPOINT_URL"
						},
						"entity":{
							"type":"string",
							"title":"entity"
						},
						"update_attr":{
							"type":"string",
							"title":"update_attr"
						},
						"update_start_time":{
							"type":"string",
							"title":"update_start_time"
						},
						"update_end_time":{
							"type":"string",
							"title":"update_end_time"
						},
						"page_num":{
							"type":"string",
							"title":"page_num"
						},
						"SECRET_KEY":{
							"type":"string",
							"title":"SECRET_KEY"
						}
					}
				},
				"configurationMode":"MANUAL",
				"code":"import os\nimport json\nimport requests\nimport logging\n\nfrom datetime import datetime\nfrom urllib3 import disable_warnings\nfrom urllib3.exceptions import InsecureRequestWarning\n\ndisable_warnings(InsecureRequestWarning)\n\nBASE_URL = IJP_ENPOINT_URL\n\ndef api_post(entity, update_end_time, update_attr=\"__no-filter__\", update_start_time=\"1900-01-01 00:00:00\", page_num=1):   \n    logging.info(\"Called API post function\") \n    endpoint = BASE_URL + entity\n\n    headers = {\n        'Hasura-Secret-Key': SECRET_KEY,\n        'Content-Type': 'application/json'\n    }\n    logging.info(\"IJP headers created\")\n\n    if update_attr != \"__no-filter__\":\n        payload = json.dumps({\n            update_attr: [update_start_time, update_end_time],\n            \"page_num\": page_num\n        })\n\n        logging.info(\"IJP payload created.\")\n        logging.info(payload)\n    else:\n        payload = json.dumps({\n            \"page_num\": page_num\n        })\n\n        logging.info(\"IJP payload created.\")\n        logging.info(payload)\n\n    response = requests.request(\n        \"POST\", endpoint, headers=headers, data=payload, verify=False)\n    logging.info(\"Response receieved from IJP\")\n\n    data = response.content.decode(\"utf-8\")\n    \n    return data, response.status_code\n\n\n\nlogging.info('IJP integration function received a request')\n\ntry:\n    entity = entity\n    update_attr = update_attr\n    update_start_time = update_start_time\n    update_end_time = update_end_time\n    page_num = page_num\n    logging.info(\"Query parameters fetched\")\n\n    data, status = api_post(entity=entity, update_end_time=update_end_time, update_attr=update_attr, update_start_time=update_start_time, page_num=page_num)\n    logging.info(\"Data unpacked\")\n\n    result = {\n        \"data\": data,\n        \"status_code\": status\n    }\nexcept Exception as ex:\n    logging.info(str(ex))\n    result = {\n        \"exeption\": ex,\n        \"status_code\": 400\n    }\n\n",
				"imports":[
					"requests"
				],
				"isAsync":false,
				"python_version":"3.12",
				"captureStdOutput":false,
				"parameters":{
					"entity":"{{ n_SbHwE.outputs.body.entity }}",
					"update_attr":"{{ n_SbHwE.outputs.body.update_attr }}",
					"update_start_time":"{{ n_SbHwE.outputs.body.update_start_time }}",
					"update_end_time":"{{ n_SbHwE.outputs.body.update_end_time }}",
					"page_num":"{{ n_SbHwE.outputs.body.page_num }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Python script",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":828,
				"resourceName":"callables_return_response_to_api",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_rNwts-1",
			"id":"n_74zfW",
			"index":3,
			"inputs":{
				"streamingCompleted":true,
				"responseName":"200_Ok",
				"status":200
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to API request",
			"type":"STOP"
		}
	],
	"ownerUserId":44567,
	"projectId":1927,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"tags":[
		
	],
	"version":13
}
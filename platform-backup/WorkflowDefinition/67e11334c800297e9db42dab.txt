{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1742991516687,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759243646040,
		"deployedBy":-1,
		"deployedDefinitionId":"68dbed7e23e6682b9a51ed8d",
		"status":"DEPLOYED",
		"version":103,
		"workflowVersion":192
	},
	"edges":[
		{
			"fromNodeId":"4z8va",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ye1La",
			"type":"next"
		},
		{
			"fromNodeId":"n_ye1La",
			"priority":0,
			"skip":false,
			"toNodeId":"n_GQqQ0",
			"type":"next"
		},
		{
			"fromNodeId":"n_GQqQ0",
			"priority":0,
			"skip":false,
			"toNodeId":"n_NVmi6",
			"type":"next"
		},
		{
			"fromNodeId":"n_NVmi6",
			"priority":0,
			"skip":false,
			"toNodeId":"n_lQIwq",
			"type":"next"
		},
		{
			"fromNodeId":"n_lQIwq",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wBpCt",
			"type":"next"
		},
		{
			"fromNodeId":"n_wBpCt",
			"priority":0,
			"skip":false,
			"toNodeId":"n_uyoCC",
			"type":"next"
		},
		{
			"fromNodeId":"n_uyoCC",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_RdXXO",
			"type":"if"
		},
		{
			"fromNodeId":"_RdXXO",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ADMv6",
			"type":"loop"
		},
		{
			"fromNodeId":"n_ADMv6",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"_RdXXO",
			"type":"next"
		},
		{
			"fromNodeId":"n_uyoCC",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_dVvZr",
			"type":"next"
		},
		{
			"fromNodeId":"_dVvZr",
			"priority":0,
			"skip":false,
			"toNodeId":"_hf7jq",
			"type":"loop"
		},
		{
			"fromNodeId":"_hf7jq",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"_dVvZr",
			"type":"next"
		},
		{
			"fromNodeId":"_RdXXO",
			"priority":0,
			"skip":false,
			"toNodeId":"n_67KWL",
			"type":"next"
		},
		{
			"fromNodeId":"_dVvZr",
			"priority":0,
			"skip":false,
			"toNodeId":"n_67KWL",
			"type":"next"
		},
		{
			"fromNodeId":"n_67KWL",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zZcCJ",
			"type":"next"
		},
		{
			"fromNodeId":"n_zZcCJ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_hao4h",
			"type":"next"
		},
		{
			"fromNodeId":"n_hao4h",
			"priority":0,
			"skip":false,
			"toNodeId":"_KOiZK",
			"type":"loop"
		},
		{
			"fromNodeId":"_KOiZK",
			"priority":0,
			"skip":false,
			"toNodeId":"n_lhmEi",
			"type":"next"
		},
		{
			"fromNodeId":"n_lhmEi",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_aWEcP",
			"type":"if"
		},
		{
			"fromNodeId":"_aWEcP",
			"priority":0,
			"skip":false,
			"toNodeId":"_ycqqk",
			"type":"next"
		},
		{
			"fromNodeId":"n_lhmEi",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_ycqqk",
			"type":"next"
		},
		{
			"fromNodeId":"_ycqqk",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_3teFz",
			"type":"if"
		},
		{
			"fromNodeId":"_3teFz",
			"priority":0,
			"skip":false,
			"toNodeId":"_hEXOd",
			"type":"next"
		},
		{
			"fromNodeId":"_ycqqk",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_hEXOd",
			"type":"next"
		},
		{
			"fromNodeId":"_hEXOd",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dyKhC",
			"type":"next"
		},
		{
			"fromNodeId":"n_dyKhC",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_1PjEx",
			"type":"if"
		},
		{
			"fromNodeId":"n_1PjEx",
			"priority":0,
			"skip":false,
			"toNodeId":"n_EjyxW",
			"type":"next"
		},
		{
			"fromNodeId":"n_EjyxW",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ROuem",
			"type":"next"
		},
		{
			"fromNodeId":"n_dyKhC",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ROuem",
			"type":"next"
		},
		{
			"fromNodeId":"n_ROuem",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_UrnDx",
			"type":"if"
		},
		{
			"fromNodeId":"n_UrnDx",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DpeWK",
			"type":"next"
		},
		{
			"fromNodeId":"n_DpeWK",
			"priority":0,
			"skip":false,
			"toNodeId":"n_BUVjE",
			"type":"next"
		},
		{
			"fromNodeId":"n_BUVjE",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Q7mL7",
			"type":"next"
		},
		{
			"fromNodeId":"n_Q7mL7",
			"priority":0,
			"skip":false,
			"toNodeId":"_yy4eS",
			"type":"next"
		},
		{
			"fromNodeId":"n_ROuem",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_yy4eS",
			"type":"next"
		},
		{
			"fromNodeId":"_yy4eS",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_hao4h",
			"type":"next"
		},
		{
			"fromNodeId":"n_hao4h",
			"priority":0,
			"skip":false,
			"toNodeId":"n_QZjwH",
			"type":"next"
		},
		{
			"fromNodeId":"n_QZjwH",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7MHfQ",
			"type":"next"
		},
		{
			"fromNodeId":"n_7MHfQ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_p1eLM",
			"type":"loop"
		},
		{
			"fromNodeId":"n_p1eLM",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7MHfQ",
			"type":"next"
		},
		{
			"fromNodeId":"n_7MHfQ",
			"priority":0,
			"skip":false,
			"toNodeId":"hsp6A",
			"type":"next"
		},
		{
			"fromNodeId":"hsp6A",
			"priority":0,
			"skip":false,
			"toNodeId":"lwJc1",
			"type":"next"
		},
		{
			"fromNodeId":"lwJc1",
			"priority":0,
			"skip":false,
			"toNodeId":"WRCyn",
			"type":"next"
		},
		{
			"fromNodeId":"WRCyn",
			"priority":0,
			"skip":false,
			"toNodeId":"n_9bCr0",
			"type":"next"
		},
		{
			"fromNodeId":"n_9bCr0",
			"priority":0,
			"skip":false,
			"toNodeId":"n_tHcqM",
			"type":"next"
		},
		{
			"fromNodeId":"n_tHcqM",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Pefp6",
			"type":"if"
		},
		{
			"fromNodeId":"n_Pefp6",
			"priority":0,
			"skip":false,
			"toNodeId":"n_O7UbB",
			"type":"next"
		},
		{
			"fromNodeId":"n_tHcqM",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_UxG6a",
			"type":"next"
		},
		{
			"fromNodeId":"_UxG6a",
			"priority":0,
			"skip":false,
			"toNodeId":"_ke4rQ",
			"type":"next"
		},
		{
			"fromNodeId":"n_O7UbB",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ANpDQ",
			"type":"next"
		},
		{
			"fromNodeId":"_ke4rQ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ANpDQ",
			"type":"next"
		},
		{
			"fromNodeId":"n_ANpDQ",
			"priority":0,
			"skip":false,
			"toNodeId":"OZYNu",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"67e11334c800297e9db42dab",
	"lastModifiedBy":-1,
	"lcName":"eval | dataset | generate from csv",
	"modifiedTime":1759371963320,
	"name":"Eval | Dataset | Generate from CSV",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":155,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"4z8va",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"success"
					],
					"dynamic":true,
					"properties":{
						"success":{
							"type":"boolean",
							"title":"Success"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"type",
						"datasetId"
					],
					"properties":{
						"type":{
							"type":"string",
							"title":"Type"
						},
						"datasetId":{
							"type":"string",
							"title":"Dataset Id"
						},
						"fieldMappings":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"entityField":{
										"type":"string",
										"title":"Entity Field"
									},
									"fileField":{
										"type":"string",
										"title":"File Field"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Field Mappings"
						},
						"fileType":{
							"type":"string",
							"title":"File Type"
						},
						"source":{
							"type":"string",
							"title":"Source"
						},
						"filename":{
							"type":"string",
							"title":"Filename"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.record.csvConfig.filename",
					"root.record.csvConfig.fileType",
					"root.record.sessionConfig.samplingRate",
					"root.record.sessionConfig.filter",
					"root.record.sessionConfig.evalType",
					"root.record.promptConfig.modelId",
					"root.record.promptConfig.goal"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":625,
				"resourceName":"storage_by_unifyapps_create_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_ye1La",
			"index":2,
			"inputs":{
				"writeThroughSessionVariables":false,
				"object_type":"dataset_import_history",
				"skipIfBlank":false,
				"record":{
					"type":"CSV",
					"datasetId":"{{ 4z8va.outputs.datasetId }}",
					"status":"syncing",
					"createdBy":"=TEXT({{ __RUN__.outputs.userId }},\"0\")",
					"csvConfig":{
						"filename":"{{ 4z8va.outputs.filename }}",
						"fileType":"{{ 4z8va.outputs.fileType }}",
						"source":"{{ __ENV__.outputs.PlatformDomain }}{{ 4z8va.outputs.source }}",
						"fieldMappings":{
							"source":"{{ 4z8va.outputs.fieldMappings }}",
							"ua:type":"mappedArray",
							"items":{
								"entityField":"{{ 4z8va.outputs.fieldMappings[0].entityField }}",
								"fileField":"{{ 4z8va.outputs.fieldMappings[0].fileField }}"
							}
						}
					},
					"sessionConfig":{
						"samplingRate":100
					},
					"testCaseType":"{{ 4z8va.outputs.type }}",
					"instanceId":"{{ __RUN__.outputs.executionId }}"
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Create record",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.fieldMappings.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":803,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_GQqQ0",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"entityFieldToFileFieldMap":{
							"type":"object",
							"properties":{
								"input":{
									"type":"string",
									"title":"input"
								},
								"conversationId":{
									"type":"string",
									"title":"Conversation Id"
								},
								"context":{
									"type":"string",
									"title":"context"
								},
								"customProperties":{
									"type":"string",
									"title":"customProperties"
								},
								"expected_output":{
									"type":"string",
									"title":"Expected Output"
								},
								"expected_tools":{
									"type":"string",
									"title":"Expected Tools"
								},
								"actual_output":{
									"type":"string",
									"title":"Actual Output"
								},
								"tool_called":{
									"type":"string",
									"title":"Tool Called"
								},
								"retrieved_context":{
									"type":"string",
									"title":"Retrieved Context"
								},
								"latency":{
									"type":"string",
									"title":"Latency"
								}
							},
							"title":"entityFieldToFileFieldMap",
							"additionalProperties":false,
							"required":[]
						},
						"mappedFields":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Mapped Fields"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"fieldMappings":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Field Mappings"
						}
					}
				},
				"code":"def entityFieldToFileFieldMap = fieldMappings.collectEntries { mapping ->\n    def key = mapping.entityField.replaceFirst(/^properties_/, \"\")\n    def value = mapping.fileField.trim().replaceAll(/\\s+/, \"_\")\n    [(key): value]\n}\n\ndef mappedFields = entityFieldToFileFieldMap.keySet().collect { k ->\n    // split by \"_\" and join with \".\"\n    \"properties.\" + k.split(\"_\").join(\".\")\n}\n\nreturn [\n    \"entityFieldToFileFieldMap\": entityFieldToFileFieldMap,\n    \"mappedFields\": mappedFields\n]\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"fieldMappings":{
						"source":"{{ 4z8va.outputs.fieldMappings }}",
						"ua:type":"mappedArray",
						"items":"{{ 4z8va.outputs.fieldMappings[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":522,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_NVmi6",
			"index":4,
			"inputs":{
				"recordId":"{{ 4z8va.outputs.datasetId }}",
				"writeThroughSessionVariables":false,
				"object_type":"dataset",
				"skipIfBlank":false,
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.visibleFields",
						"actionType":"SET",
						"setValue":"{{ n_GQqQ0.outputs.result.mappedFields }}"
					}
				],
				"unsetIfNull":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":708,
				"resourceName":"utility_by_unifyapps_create_unifyapps_file_from_url",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_lQIwq",
			"index":5,
			"inputs":{
				"url":"{{ 4z8va.outputs.source }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Create UnifyApps file from url",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":450,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_wBpCt",
			"index":6,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"row":{
											"type":"object",
											"properties":{},
											"additionalProperties":false,
											"title":"Row"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"Rows",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"Rows",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"row":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Row"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_uyoCC",
			"index":7,
			"inputs":{
				"filters":[
					{
						"property":"{{ 4z8va.outputs.fileType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"CSV"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"csv_by_unifyapps",
				"resourceVersion":744,
				"resourceName":"csv_by_unifyapps_for_each_row_or_rows",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_uyoCC@Lw99z-1@y",
			"id":"_RdXXO",
			"index":8,
			"inputs":{
				"startFromRow":1,
				"file":"{{ n_lQIwq.outputs.file }}",
				"headerRow":true,
				"delimiter":",",
				"columns":{
					"source":"{{ 4z8va.outputs.fieldMappings }}",
					"ua:type":"mappedArray",
					"items":"{{ 4z8va.outputs.fieldMappings[0].fileField }}"
				},
				"batch":false,
				"encoding":"UTF-8",
				"batchSize":100
			},
			"skip":false,
			"subTitle":"CSV by UnifyApps",
			"title":"Consume data from CSV file",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_RdXXO@n_uyoCC@Lw99z-1@y@l",
			"id":"n_ADMv6",
			"index":9,
			"inputs":{
				"itemToAdd":{
					"row":"{{ _RdXXO.outputs.item }}"
				},
				"insertLocation":"END",
				"listName":"{{ n_wBpCt.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"excel_by_unifyapps",
				"resourceVersion":745,
				"resourceName":"excel_by_unifyapps_for_each_row_or_rows",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_uyoCC@Lw99z-1@n",
			"id":"_dVvZr",
			"index":10,
			"inputs":{
				"startFromRow":1,
				"consumptionBehaviour":"cell_type",
				"file":"{{ n_lQIwq.outputs.file }}",
				"headerRow":true,
				"columns":{
					"source":"{{ 4z8va.outputs.fieldMappings }}",
					"ua:type":"mappedArray",
					"items":"{{ 4z8va.outputs.fieldMappings[0].fileField }}"
				},
				"batch":false,
				"evaluateFormulae":true,
				"batchSize":100,
				"skipEmptyRows":false,
				"fileType":"{{ 4z8va.outputs.fileType }}"
			},
			"skip":false,
			"subTitle":"Excel by UnifyApps",
			"title":"Consume data from Excel file",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_dVvZr@n_uyoCC@Lw99z-1@n@l",
			"id":"_hf7jq",
			"index":11,
			"inputs":{
				"itemToAdd":{
					"row":"{{ _dVvZr.outputs.item }}"
				},
				"insertLocation":"END",
				"listName":"{{ n_wBpCt.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				},
				"visibleOptionalFields":[
					"root.parameters.rows.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":801,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_67KWL",
			"index":12,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"sortedRows":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"row":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Row"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Sorted Rows"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"rows":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Rows"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def rows = binding.hasVariable('rows') ? rows : []\n\nsortedRows = rows.sort { it.row.conversationId }\nreturn [\"sortedRows\" : sortedRows]",
				"parameters":{
					"rows":{
						"source":"{{ n_wBpCt.outputs.items }}",
						"ua:type":"mappedArray",
						"items":"{{ n_wBpCt.outputs.items[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":859,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_zZcCJ",
			"index":13,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"currentConversationId":{
							"type":"string",
							"title":"Current Conversation Id"
						},
						"conversationId":{
							"type":"string",
							"title":"Conversation Id"
						},
						"fakeConvIdToRealConvIdMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Real Conv Id Map"
						},
						"fakeConvIdToAgentRoleMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Agent Role Map"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"currentConversationId":"-999999999"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"currentConversationId":{
							"type":"string",
							"title":"Current Conversation Id"
						},
						"conversationId":{
							"type":"string",
							"title":"Conversation Id"
						},
						"fakeConvIdToRealConvIdMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Real Conv Id Map"
						},
						"fakeConvIdToAgentRoleMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Agent Role Map"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":456,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_hao4h",
			"index":14,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_wBpCt.outputs.items }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_hao4h@Lw99z-1@l",
			"id":"_KOiZK",
			"index":15,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"expected_tools":{
							"type":"string",
							"title":"Expected Tools"
						},
						"tools_called":{
							"type":"string",
							"title":"Tools Called"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"item":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Item"
						},
						"entityFieldToFileFieldMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Entity Field To File Field Map"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def item = binding.hasVariable('item') ? binding.getVariable('item') : [:]\ndef entityFieldToFileFieldMap = binding.hasVariable('entityFieldToFileFieldMap') ? binding.getVariable('entityFieldToFileFieldMap') : [:]\n\ndef expectedToolsKey = entityFieldToFileFieldMap['expected_tools'] ?: 'expected_tools'\ndef toolsCalledKey = entityFieldToFileFieldMap['tools_called'] ?: 'tools_called'\n\n\n// def isPresent = item.containsKey(expectedToolsKey)\n// def isString = isPresent && (item[expectedToolsKey] instanceof String)\ndef expected_tools = item.containsKey(expectedToolsKey) ? item[expectedToolsKey] : \"\"\ndef tools_called = item.containsKey(toolsCalledKey) ? item[toolsCalledKey] : \"\"\n\nreturn [\n    expected_tools: expected_tools,\n    tools_called : tools_called\n]\n",
				"parameters":{
					"entityFieldToFileFieldMap":"{{ n_GQqQ0.outputs.result.entityFieldToFileFieldMap }}",
					"item":"{{ n_hao4h.outputs.item.row }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_hao4h@Lw99z-1@l",
			"id":"n_lhmEi",
			"index":16,
			"inputs":{
				"filters":[
					{
						"property":"{{ _KOiZK.outputs.result.expected_tools }}",
						"filter":{
							"operator":"EXISTS"
						}
					},
					{
						"property":"=LEN({{ _KOiZK.outputs.result.expected_tools }})",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"0"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_lhmEi@n_hao4h@Lw99z-1@l@y",
			"id":"_aWEcP",
			"index":17,
			"inputs":{
				"jsonString":"{{ _KOiZK.outputs.result.expected_tools }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialise string to JSON object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_hao4h@Lw99z-1@l",
			"id":"_ycqqk",
			"index":18,
			"inputs":{
				"filters":[
					{
						"property":"{{ _KOiZK.outputs.result.tools_called }}",
						"filter":{
							"operator":"EXISTS"
						}
					},
					{
						"property":"=LEN({{ _KOiZK.outputs.result.tools_called }})",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"0"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_ycqqk@n_hao4h@Lw99z-1@l@y",
			"id":"_3teFz",
			"index":19,
			"inputs":{
				"jsonString":"{{ _KOiZK.outputs.result.tools_called }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialise string to JSON object",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.expected_tools.items",
					"root.parameters.tools_called.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":161,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_hao4h@Lw99z-1@l",
			"id":"_hEXOd",
			"index":20,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"record":{
							"type":"object",
							"properties":{
								"input":{
									"type":"string",
									"title":"Input"
								},
								"conversationId":{
									"type":"string",
									"title":"Conversation Id"
								},
								"context":{
									"type":"string",
									"title":"Context"
								},
								"datasetId":{
									"type":"string",
									"title":"Dataset Id"
								},
								"expected_output":{
									"type":"string",
									"title":"Expected Output"
								},
								"expected_tools":{
									"type":"array",
									"items":{
										"type":"object",
										"properties":{
											"name":{
												"type":"string",
												"title":"Name"
											},
											"input":{
												"type":"object",
												"properties":{},
												"additionalProperties":false,
												"title":"Input"
											},
											"output":{
												"type":"object",
												"properties":{},
												"additionalProperties":false,
												"title":"Output"
											},
											"description":{
												"type":"string",
												"title":"Description"
											},
											"reasoning":{
												"type":"string",
												"title":"Reasoning"
											}
										},
										"additionalProperties":false,
										"required":[]
									},
									"title":"Expected Tools"
								},
								"dataset_ids":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"Dataset Ids"
								},
								"actual_output":{
									"type":"string",
									"title":"Actual Output"
								},
								"tool_called":{
									"type":"array",
									"items":{
										"type":"object",
										"properties":{},
										"additionalProperties":false
									},
									"title":"Tool Called"
								},
								"retrieved_context":{
									"type":"string",
									"title":"Retrieved Context"
								},
								"latency":{
									"type":"number",
									"title":"Latency"
								},
								"cost":{
									"type":"number",
									"title":"Cost"
								},
								"customProperties":{
									"type":"object",
									"properties":{
										"department":{
											"type":"string",
											"title":"Department"
										}
									},
									"additionalProperties":false,
									"title":"Custom Properties",
									"required":[]
								}
							},
							"additionalProperties":false,
							"title":"Record",
							"required":[]
						},
						"agent_role":{
							"type":"string",
							"title":"Agent Role"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"datasetId":{
							"type":"string",
							"title":"Dataset Id"
						},
						"item":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Item"
						},
						"entityFieldToFileFieldMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Entity Field To File Field Map"
						},
						"expected_tools":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Expected Tools"
						},
						"tools_called":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Tools Called"
						}
					}
				},
				"code":"def item = binding.hasVariable(\"item\") ? binding.getVariable(\"item\") : [:]\ndef datasetId = binding.hasVariable(\"datasetId\") ? binding.getVariable(\"datasetId\") : \"\"\ndef entityFieldToFileFieldMap = binding.hasVariable(\"entityFieldToFileFieldMap\") ? binding.getVariable(\"entityFieldToFileFieldMap\") : [:]\ndef expectedToolsInput = binding.hasVariable(\"expected_tools\") ? binding.getVariable(\"expected_tools\") : null  // external expected_tools\ndef toolsCalledInput = binding.hasVariable(\"tools_called\") ? binding.getVariable(\"tools_called\") : null  // external tools_called\n\n\n\n\ndef allowedKeys = [\"name\", \"input\", \"output\", \"reasoning\", \"description\"]\n\n// --- Handle expected_tools ---\ndef expectedTools = []\n\n//If expected_tools is string then it will be present outside item obj\nif (expectedToolsInput instanceof List) {\n    expectedTools = expectedToolsInput\n} else if (item.containsKey(entityFieldToFileFieldMap['expected_tools']) && item[entityFieldToFileFieldMap['expected_tools']] instanceof List) {\n    expectedTools = item[entityFieldToFileFieldMap['expected_tools']]\n}\n\ndef filteredExpectedTools = expectedTools.collect { tool ->\n    if (tool instanceof Map) {\n        def extraKeys = tool.keySet() - allowedKeys\n        tool.findAll { k, v -> allowedKeys.contains(k) }\n    }\n}\n\n// --- Handle tools_called ---\ndef toolsCalled = []\n\n//If tools_called is string then it will be present outside item obj\nif (toolsCalledInput instanceof List) {\n    toolsCalled = toolsCalledInput\n} else if (item.containsKey(entityFieldToFileFieldMap['tools_called']) && item[entityFieldToFileFieldMap['tools_called']] instanceof List) {\n    toolsCalled = item[entityFieldToFileFieldMap['tools_called']]\n}\n\ndef filteredToolsCalled = toolsCalled.collect { tool ->\n    if (tool instanceof Map) {\n        def extraKeys = tool.keySet() - allowedKeys\n        tool.findAll { k, v -> allowedKeys.contains(k) }\n    }\n}\n\n\ndef record = [:]\n\nrecord[\"datasetId\"] = datasetId\nrecord[\"dataset_ids\"] = [datasetId]\nrecord[\"expected_tools\"] = filteredExpectedTools\nrecord[\"tool_called\"] = filteredToolsCalled\nrecord[\"input\"] = item.containsKey(entityFieldToFileFieldMap['input']) ? item[entityFieldToFileFieldMap['input']] : \"\"\nrecord[\"context\"] = item.containsKey(entityFieldToFileFieldMap['context']) ? item[entityFieldToFileFieldMap['context']] : \"\"\nrecord[\"expected_output\"] = item.containsKey(entityFieldToFileFieldMap['expected_output']) ? item[entityFieldToFileFieldMap['expected_output']] : \"\"\nrecord[\"actual_output\"] = item.containsKey(entityFieldToFileFieldMap['actual_output']) ? item[entityFieldToFileFieldMap['actual_output']] : \"\"\nrecord[\"retrieved_context\"] = item.containsKey(entityFieldToFileFieldMap['retrieved_context']) ? item[entityFieldToFileFieldMap['retrieved_context']] : \"\"\ndef agent_role = item.containsKey(entityFieldToFileFieldMap['agent_role']) ? item[entityFieldToFileFieldMap['agent_role']] : null\n\n//handle customProperties\ndef customProperties = [:]\n\nentityFieldToFileFieldMap.keySet().each { key ->\n    if (key.startsWith('customProperties_')) {\n        def subKey = key.replaceFirst(/^customProperties_/, \"\")\n        def fileField = entityFieldToFileFieldMap[key]\n        customProperties[subKey] = item.containsKey(fileField) ? item[fileField] : \"\"\n    }\n}\n\nrecord[\"customProperties\"] = customProperties;\n\n// need this support for number values (csv returns string)\ndef latencyKey = entityFieldToFileFieldMap['latency']\ndef latencyValue = item.containsKey(latencyKey) ? item[latencyKey] : null\n\ndef parsedLatency\ntry {\n    parsedLatency = (latencyValue != null) ? latencyValue.toString().toBigDecimal() : -1\n} catch (Exception e) {\n    parsedLatency = -1\n}\nrecord[\"latency\"] = parsedLatency\n\n//for cost\ndef costKey = entityFieldToFileFieldMap['cost']\ndef costValue = item.containsKey(costKey) ? item[costKey] : null\n\ndef parsedCost\ntry {\n    parsedCost = (costValue != null) ? costValue.toString().toBigDecimal() : 0\n} catch (Exception e) {\n    parsedCost = 0\n}\nrecord[\"cost\"] = parsedCost\n\n\nif (item.containsKey(entityFieldToFileFieldMap['conversationId'])) { //dont change this\n    record[\"conversationId\"] = item[entityFieldToFileFieldMap['conversationId']]\n}\n\nreturn [\"record\": record, \"agent_role\" : agent_role]\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"datasetId":"{{ 4z8va.outputs.datasetId }}",
					"item":"{{ n_hao4h.outputs.item.row }}",
					"entityFieldToFileFieldMap":"{{ n_GQqQ0.outputs.result.entityFieldToFileFieldMap }}",
					"expected_tools":{
						"ua:type":"mappedArray",
						"source":"{{ _aWEcP.outputs.result }}"
					},
					"tools_called":{
						"source":"{{ _3teFz.outputs.result }}",
						"ua:type":"mappedArray"
					}
				}
			},
			"skip":false,
			"subTitle":"Extract fields from Field Mappings obj",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_hao4h@Lw99z-1@l",
			"id":"n_dyKhC",
			"index":21,
			"inputs":{
				"filters":[
					{
						"property":"{{ 4z8va.outputs.type }}",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"LLM"
						}
					},
					{
						"property":"{{ _hEXOd.outputs.result.agent_role }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_dyKhC@n_hao4h@Lw99z-1@l@y",
			"id":"n_1PjEx",
			"index":22,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"fakeConvIdToAgentRoleMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Agent Role Map"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"fakeConvIdToAgentRoleMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Agent Role Map"
						},
						"fakeConvId":{
							"type":"string",
							"title":"Fake Conv Id"
						},
						"agent_role":{
							"type":"string",
							"title":"Agent Role"
						}
					}
				},
				"code":"def fakeConvIdToAgentRoleMap = binding.hasVariable('fakeConvIdToAgentRoleMap') ? fakeConvIdToAgentRoleMap : [:]\ndef fakeConvId = binding.hasVariable('fakeConvId') ? fakeConvId : \"\"\ndef agent_role = binding.hasVariable('agent_role') ? agent_role : \"\"\n\nfakeConvIdToAgentRoleMap[fakeConvId] = agent_role\nreturn [\"fakeConvIdToAgentRoleMap\" : fakeConvIdToAgentRoleMap]",
				"compile_static":false,
				"parameters":{
					"fakeConvIdToAgentRoleMap":"{{ n_zZcCJ.outputs.fakeConvIdToAgentRoleMap }}",
					"fakeConvId":"{{ _hEXOd.outputs.result.record.conversationId }}",
					"agent_role":"{{ _hEXOd.outputs.result.agent_role }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":447,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_dyKhC@n_hao4h@Lw99z-1@l@y",
			"id":"n_EjyxW",
			"index":23,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_zZcCJ.outputs.fakeConvIdToAgentRoleMap }}",
						"value":"{{ n_1PjEx.outputs.result.fakeConvIdToAgentRoleMap }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":755,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_hao4h@Lw99z-1@l",
			"id":"n_ROuem",
			"index":24,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_zZcCJ.outputs.currentConversationId }}",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"{{ _hEXOd.outputs.result.record.conversationId }}"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.record.dataset_ids.items"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2777,
				"resourceName":"storage_by_unifyapps_create_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ROuem@n_hao4h@Lw99z-1@l@y",
			"id":"n_UrnDx",
			"index":25,
			"inputs":{
				"writeThroughSessionVariables":false,
				"object_type":"conversational_test_case",
				"skipIfBlank":false,
				"record":{
					"dataset_ids":[
						"{{ 4z8va.outputs.datasetId }}"
					],
					"datasetId":"{{ 4z8va.outputs.datasetId }}",
					"name":"{{ _hEXOd.outputs.result.record.input }}"
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Create record",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ROuem@n_hao4h@Lw99z-1@l@y",
			"id":"n_DpeWK",
			"index":26,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"fakeConvIdToRealConvIdMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Real Conv Id Map"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"fakeConvIdToRealConvIdMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Real Conv Id Map"
						},
						"fakeConvId":{
							"type":"string",
							"title":"Fake Conv Id"
						},
						"realConvId":{
							"type":"string",
							"title":"Real Conv Id"
						}
					}
				},
				"code":"def fakeConvIdToRealConvIdMap = binding.hasVariable('fakeConvIdToRealConvIdMap') ? fakeConvIdToRealConvIdMap : [:]\ndef fakeConvId = binding.hasVariable('fakeConvId') ? fakeConvId : \"\"\ndef realConvId = binding.hasVariable('realConvId') ? realConvId : \"\"\n\nfakeConvIdToRealConvIdMap[fakeConvId] = realConvId\nreturn [\"fakeConvIdToRealConvIdMap\" : fakeConvIdToRealConvIdMap]",
				"compile_static":false,
				"parameters":{
					"fakeConvIdToRealConvIdMap":"{{ n_zZcCJ.outputs.fakeConvIdToRealConvIdMap }}",
					"fakeConvId":"{{ _hEXOd.outputs.result.record.conversationId }}",
					"realConvId":"{{ n_UrnDx.outputs.id }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":447,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ROuem@n_hao4h@Lw99z-1@l@y",
			"id":"n_BUVjE",
			"index":27,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_zZcCJ.outputs.fakeConvIdToRealConvIdMap }}",
						"value":"{{ n_DpeWK.outputs.result.fakeConvIdToRealConvIdMap }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":790,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ROuem@n_hao4h@Lw99z-1@l@y",
			"id":"n_Q7mL7",
			"index":28,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_zZcCJ.outputs.conversationId }}",
						"value":"{{ n_UrnDx.outputs.id }}"
					},
					{
						"source":"{{ n_zZcCJ.outputs.currentConversationId }}",
						"value":"{{ _hEXOd.outputs.result.record.conversationId }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.record.expected_tools.items",
					"root.record.dataset_ids.items",
					"root.record.tools_called.items",
					"root.record.customProperties.department"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2777,
				"resourceName":"storage_by_unifyapps_create_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_hao4h@Lw99z-1@l",
			"id":"_yy4eS",
			"index":29,
			"inputs":{
				"writeThroughSessionVariables":false,
				"object_type":"llm_test_case",
				"skipIfBlank":false,
				"record":{
					"input":"{{ _hEXOd.outputs.result.record.input }}",
					"expected_output":"{{ _hEXOd.outputs.result.record.expected_output }}",
					"context":"{{ _hEXOd.outputs.result.record.context }}",
					"conversationId":"{{ n_zZcCJ.outputs.conversationId }}",
					"datasetId":"{{ _hEXOd.outputs.result.record.datasetId }}",
					"customProperties":{
						"department":"{{ _hEXOd.outputs.result.record.customProperties.department }}"
					},
					"actual_output":"{{ _hEXOd.outputs.result.record.actual_output }}",
					"retrieved_context":"{{ _hEXOd.outputs.result.record.retrieved_context }}",
					"latency":"{{ _hEXOd.outputs.result.record.latency }}",
					"cost":"{{ _hEXOd.outputs.result.record.cost }}",
					"dataset_ids":{
						"ua:type":"mappedArray",
						"source":"{{ _hEXOd.outputs.result.record.dataset_ids }}",
						"items":"{{ _hEXOd.outputs.result.record.dataset_ids[0] }}"
					},
					"expected_tools":{
						"ua:type":"mappedArray",
						"source":"{{ _hEXOd.outputs.result.record.expected_tools }}",
						"items":"{{ _hEXOd.outputs.result.record.expected_tools[0] }}"
					},
					"tools_called":{
						"source":"{{ _hEXOd.outputs.result.record.tool_called }}",
						"ua:type":"mappedArray",
						"items":"{{ _hEXOd.outputs.result.record.tool_called[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Create record",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_QZjwH",
			"index":30,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"realConvIdToAgentRoleList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"realConvId":{
										"type":"string",
										"title":"Real Conv Id"
									},
									"agent_role":{
										"type":"string",
										"title":"Agent Role"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Real Conv Id To Agent Role List"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"fakeConvIdToRealConvIdMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Real Conv Id Map"
						},
						"fakeConvIdToAgentRoleMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Fake Conv Id To Agent Role Map"
						}
					}
				},
				"code":"def fakeConvIdToRealConvIdMap = binding.hasVariable('fakeConvIdToRealConvIdMap') ? fakeConvIdToRealConvIdMap : [:]\ndef fakeConvIdToAgentRoleMap = binding.hasVariable('fakeConvIdToAgentRoleMap') ? fakeConvIdToAgentRoleMap : [:]\n\ndef realConvIdToAgentRoleList = fakeConvIdToRealConvIdMap.collect { fakeConvId, realConvId ->\n    [\n        realConvId : realConvId,\n        agent_role : fakeConvIdToAgentRoleMap[fakeConvId] ?: \"\"\n    ]\n}\n\nreturn [\"realConvIdToAgentRoleList\" : realConvIdToAgentRoleList]\n",
				"compile_static":false,
				"parameters":{
					"fakeConvIdToRealConvIdMap":"{{ n_zZcCJ.outputs.fakeConvIdToRealConvIdMap }}",
					"fakeConvIdToAgentRoleMap":"{{ n_zZcCJ.outputs.fakeConvIdToAgentRoleMap }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":456,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_7MHfQ",
			"index":31,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_QZjwH.outputs.result.realConvIdToAgentRoleList }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Update Agent Roles",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":574,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_7MHfQ@Lw99z-1@l",
			"id":"n_p1eLM",
			"index":32,
			"inputs":{
				"recordId":"{{ n_7MHfQ.outputs.item.realConvId }}",
				"writeThroughSessionVariables":false,
				"object_type":"conversational_test_case",
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.agent_role",
						"actionType":"SET",
						"setValue":"{{ n_7MHfQ.outputs.item.agent_role }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":200,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"hsp6A",
			"index":33,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"userId":{
							"type":"string",
							"title":"User Id"
						}
					},
					"additionalProperties":false,
					"required":[
						"userId"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"userId":{
							"type":"string",
							"title":"User Id"
						}
					},
					"additionalProperties":false,
					"required":[
						"userId"
					]
				},
				"compile_static":false,
				"code":"return [userId:userId.toString()]",
				"parameters":{
					"userId":"{{ __RUN__.outputs.userId }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":12,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"lwJc1",
			"index":34,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"additional":{
							"type":"object",
							"properties":{
								"status":{
									"type":"string",
									"title":"Status"
								},
								"datasetId":{
									"type":"string",
									"title":"Dataset Id"
								}
							},
							"additionalProperties":false,
							"title":"Additional",
							"required":[]
						},
						"userId":{
							"type":"string",
							"title":"User Id"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"additional":{
					"status":"SUCCESS",
					"datasetId":"{{ 4z8va.outputs.datasetId }}"
				},
				"userId":"{{ hsp6A.outputs.result.userId }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"additional":{
							"type":"object",
							"properties":{
								"status":{
									"type":"string",
									"title":"Status"
								},
								"datasetId":{
									"type":"string",
									"title":"Dataset Id"
								}
							},
							"additionalProperties":false,
							"title":"Additional",
							"required":[]
						},
						"userId":{
							"type":"string",
							"title":"User Id"
						},
						"_ua_variableDetails":{
							"title":"Variable Details",
							"items":{
								"type":"object",
								"properties":{
									"dataType":{
										"type":"string",
										"description":"Data type of the variable"
									},
									"name":{
										"type":"string",
										"description":"Name of the variable"
									},
									"description":{
										"type":"string",
										"description":"Description of the variable"
									}
								}
							},
							"type":"array"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"chat_by_unifyapps",
				"resourceVersion":11,
				"resourceName":"chat_by_unifyapps_send_message",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"WRCyn",
			"index":35,
			"inputs":{
				"payload":{
					"additional":"{{ lwJc1.outputs.additional }}"
				},
				"userId":"{{ lwJc1.outputs.userId }}"
			},
			"skip":false,
			"subTitle":"Chat by UnifyApps",
			"title":"Send message",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":458,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_9bCr0",
			"index":36,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"testCaseCount":{
							"type":"integer",
							"title":"Test Case Count"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"testCaseCount":{
							"type":"integer",
							"title":"Test Case Count"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_tHcqM",
			"index":37,
			"inputs":{
				"filters":[
					{
						"property":"{{ 4z8va.outputs.type }}",
						"filter":{
							"operator":"EQUAL",
							"value":"LLM"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":624,
				"resourceName":"storage_by_unifyapps_count_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHcqM@Lw99z-1@y",
			"id":"n_Pefp6",
			"index":38,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_datasetImportHistoryId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_ye1La.outputs.id }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"llm_test_case"
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Count records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":447,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHcqM@Lw99z-1@y",
			"id":"n_O7UbB",
			"index":39,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_9bCr0.outputs.testCaseCount }}",
						"value":"{{ n_Pefp6.outputs.count }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":624,
				"resourceName":"storage_by_unifyapps_count_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHcqM@Lw99z-1@n",
			"id":"_UxG6a",
			"index":40,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_datasetImportHistoryId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_ye1La.outputs.id }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"conversational_test_case"
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Count records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":447,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHcqM@Lw99z-1@n",
			"id":"_ke4rQ",
			"index":41,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_9bCr0.outputs.testCaseCount }}",
						"value":"{{ _UxG6a.outputs.count }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":621,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"n_ANpDQ",
			"index":42,
			"inputs":{
				"recordId":"{{ n_ye1La.outputs.id }}",
				"writeThroughSessionVariables":false,
				"object_type":"dataset_import_history",
				"skipIfBlank":false,
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.testcaseCount",
						"actionType":"SET",
						"setValue":"{{ n_9bCr0.outputs.testCaseCount }}"
					},
					{
						"fieldName":"properties.status",
						"actionType":"SET",
						"setValue":"completed"
					}
				],
				"unsetIfNull":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":158,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Lw99z-1",
			"id":"OZYNu",
			"index":43,
			"inputs":{
				"result":{
					"success":true
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":43523,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"version":193
}
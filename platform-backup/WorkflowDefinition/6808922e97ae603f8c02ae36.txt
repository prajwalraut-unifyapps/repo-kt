{
	"appsUsed":[
		"amazon_s3",
		"gcloud_storage",
		"google_big_query"
	],
	"createdTime":1753188572905,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1758719810501,
		"deployedBy":39713,
		"deployedDefinitionId":"68d3ef40a00cb67df4bdef43",
		"status":"DEPLOYED",
		"version":3,
		"workflowVersion":57
	},
	"edges":[
		{
			"fromNodeId":"n_K18z7",
			"priority":0,
			"skip":false,
			"toNodeId":"mjyIT",
			"type":"next"
		},
		{
			"fromNodeId":"mjyIT",
			"priority":0,
			"skip":false,
			"toNodeId":"n_S9bJo",
			"type":"next"
		},
		{
			"fromNodeId":"n_S9bJo",
			"priority":0,
			"skip":false,
			"toNodeId":"tGUg2",
			"type":"next"
		},
		{
			"fromNodeId":"tGUg2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_UsOI2",
			"type":"next"
		},
		{
			"fromNodeId":"n_UsOI2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_VoW8P",
			"type":"next"
		},
		{
			"fromNodeId":"n_VoW8P",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Fgu3d",
			"type":"next"
		},
		{
			"fromNodeId":"n_Fgu3d",
			"priority":0,
			"skip":false,
			"toNodeId":"n_3ReLJ",
			"type":"loop"
		},
		{
			"fromNodeId":"n_3ReLJ",
			"priority":0,
			"skip":false,
			"toNodeId":"_R2tvR",
			"type":"next"
		},
		{
			"fromNodeId":"_R2tvR",
			"priority":0,
			"skip":false,
			"toNodeId":"n_bBKeV",
			"type":"next"
		},
		{
			"fromNodeId":"n_bBKeV",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Fgu3d",
			"type":"next"
		},
		{
			"fromNodeId":"n_Fgu3d",
			"priority":0,
			"skip":false,
			"toNodeId":"n_GBVKw",
			"type":"next"
		},
		{
			"fromNodeId":"n_GBVKw",
			"priority":0,
			"skip":false,
			"toNodeId":"_IAT7c",
			"type":"next"
		},
		{
			"fromNodeId":"_IAT7c",
			"priority":0,
			"skip":false,
			"toNodeId":"_ZZNHe",
			"type":"next"
		},
		{
			"fromNodeId":"_ZZNHe",
			"priority":0,
			"skip":false,
			"toNodeId":"LFVGF",
			"type":"next"
		},
		{
			"fromNodeId":"LFVGF",
			"priority":0,
			"skip":false,
			"toNodeId":"vYsRm",
			"type":"next"
		}
	],
	"id":"6808922e97ae603f8c02ae36",
	"lastModifiedBy":39713,
	"lcName":"aut-unete",
	"modifiedTime":1758720756304,
	"name":"AUT-Unete",
	"nodes":[
		{
			"context":{
				"appName":"webhooks",
				"resourceVersion":813,
				"resourceName":"webhooks_default"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"n_K18z7",
			"index":1,
			"inputs":{
				"request":{
					"contentType":"application/json"
				}
			},
			"skip":false,
			"subTitle":"Webhook",
			"title":"New event",
			"trigger":{
				"type":"WEBHOOK"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":71,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"mjyIT",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"today_date":{
							"type":"string",
							"title":"Today Date"
						},
						"pre_start_date":{
							"type":"string",
							"title":"Pre Start Date"
						},
						"start_date":{
							"type":"string",
							"title":"Start Date"
						},
						"now":{
							"type":"number",
							"title":"Now"
						},
						"foldername":{
							"type":"string",
							"title":"Foldername"
						}
					},
					"required":[
						"now",
						"foldername"
					]
				}
			},
			"inputs":{
				"today_date":"=TEXT(NOW(),\"YYYYMMDD_HHMMSS\")",
				"now":"=ROUND((NOW()-DATE(1970,1,1))*86400*1000,0)",
				"foldername":"=TEXT(NOW() -1 - TIME(5,0,0), \"yyyymmddhhmm\")",
				"pre_start_date":"=TEXT(TODAY()-4,\"yyyymmdd\")",
				"start_date":"=TEXT(TODAY()-3,\"yyyy-mm-dd\")"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"today_date":{
							"type":"string",
							"title":"Today Date"
						},
						"pre_start_date":{
							"type":"string",
							"title":"Pre Start Date"
						},
						"start_date":{
							"type":"string",
							"title":"Start Date"
						},
						"now":{
							"type":"number",
							"title":"Now"
						},
						"foldername":{
							"type":"string",
							"title":"Foldername"
						}
					},
					"required":[
						"now",
						"foldername"
					]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"google_big_query",
				"resourceVersion":121,
				"connectionId":"68c9c0bbaec01d5c19a98dfd",
				"resourceName":"google_big_query_execute_sql",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"n_S9bJo",
			"index":3,
			"inputs":{
				"project_id":"belcorp-digital",
				"timeoutMs":100000,
				"maxResults":1000,
				"query":"CREATE OR REPLACE TABLE belcorp-digital.analytics_327881126.unete_export_staging \nOPTIONS(\n  expiration_timestamp=TIMESTAMP_ADD(CURRENT_TIMESTAMP(), INTERVAL 3 HOUR)\n)\nAS\nwith unete_analytics as \n(\n    select \n--IDENTIFICADOR DE SESIÓN\n      concat(user_pseudo_id,cast((SELECT value.int_value FROM UNNEST(event_params) WHERE key = \"ga_session_id\") as string)) as sessionid --ok\n      ,user_pseudo_id as clientid                                                                                                        --ok\n      ,(SELECT value.int_value FROM UNNEST(event_params) WHERE key = \"ga_session_id\") AS ga_session_id                                   --ok\n      ,(SELECT value.int_value FROM UNNEST(event_params) WHERE key = \"ga_session_number\") AS ga_session_number                           --ok\n      ,concat(SUBSTR(event_date,0,4),'-',SUBSTR(event_date,5,2),'-',SUBSTR(event_date,7,2)) fecha                                        --ok\n      ,CASE \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/pe/%', '%/pe','%/pe?%') THEN 'PE' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/mx/%', '%/mx','%/mx?%') THEN 'MX' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/co/%', '%/co','%/co?%') THEN 'CO' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/cl/%', '%/cl','%/cl?%') THEN 'CL' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/ec/%', '%/ec','%/ec?%') THEN 'EC' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/pa/%', '%/pa','%/pa?%') THEN 'PA' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/bo/%', '%/bo','%/bo?%') THEN 'BO' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/do/%', '%/do','%/do?%') THEN 'DO' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/pr/%', '%/pr','%/pr?%') THEN 'PR' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/cr/%', '%/cr','%/cr?%') THEN 'CR' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/gt/%', '%/gt','%/gt?%') THEN 'GT' \n            WHEN (SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") LIKE ANY ('%/sv/%', '%/sv','%/sv?%') THEN 'SV' \n      END \n            AS codigopais \n--TIPO DEL EVENTO\n      ,device.web_info.hostname as session_hostname                                                                                      --ok\n      ,stream_id as session_stream                                                                                                       --ok\n      ,platform as session_platform                                                                                                      --ok\n      ,event_name                                                                                                                        --ok\n      ,event_timestamp as event_time                                                                                                     --ok\n      ,FORMAT_TIMESTAMP('%Y-%m-%d %H:%M:%S', TIMESTAMP_SUB(TIMESTAMP_MICROS(event_timestamp), INTERVAL 5 HOUR)) as event_timestamp_utc   --ok\n--INFORMACIÓN DE LA PÁGINA\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_location\") AS page_location                                --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_title\") AS page_title                                      --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"page_path\") AS page_path                                        --ok\n--INFORMACIÓN DE LOS EVENTOS\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"flow\") AS event_flow                                            --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"step\") as event_step                                            --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"section\") as event_section                                      --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"elementDescription\") as event_elementdescription                --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"elementType\") as event_elementtype                              --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"country\") as event_country                                      --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"comeFrom\") as event_comefrom                                    --ok\n--INFORMACIÓN DEL DISPOSITIVO\n      ,device.category as device_category\n      ,device.mobile_brand_name as device_mobile_brand\n      ,device.mobile_model_name as device_mobile_model\n      ,device.operating_system as device_operating_system\n      ,device.browser as device_browser\n      ,device.web_info.browser as device_web_browser\n--INFORMACIÓN DE TRÁFICO\n      ,traffic_source.name as traffic_name\n      ,traffic_source.source as traffic_source\n      ,traffic_source.medium as traffic_medium\n      ,collected_traffic_source.manual_source as utm_source\n      ,collected_traffic_source.manual_medium as utm_medium\n      ,collected_traffic_source.manual_campaign_name as utm_campaign\n      ,collected_traffic_source.manual_content as utm_content\n      ,collected_traffic_source.manual_term as utm_term\n--PARAMETROS MANUALES\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"urlCampaign\") as param_campaign                                 --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"urlContent\") as param_content                                   --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"urlMedium\") as param_medium                                     --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"urlSource\") as param_source                                     --ok\n      ,(SELECT value.string_value FROM UNNEST(event_params) WHERE key = \"urlTerm\") as param_term                                         --ok\n--OTROS PARÁMETROS\n      ,collected_traffic_source.manual_campaign_id as utm_campaign_id\n      ,collected_traffic_source.gclid as traffic_gclid\n      ,collected_traffic_source.dclid as traffic_dclid\n--INFORMACIÓN DE GEO\n      ,geo.country as geo_country\n      ,geo.region as geo_region\n      ,geo.city as geo_city\nfrom \n      `belcorp-digital.analytics_327881126.events_intraday_*`\nwhere \n      _TABLE_SUFFIX BETWEEN FORMAT_DATE('%Y%m%d',DATE_SUB(CURRENT_DATE('America/Lima'), INTERVAL 1 DAY)) AND FORMAT_DATE('%Y%m%d',DATE_SUB(CURRENT_DATE('America/Lima'), INTERVAL 1 DAY))\n),\n\n\nunete_prework as \n(\nselect \n      sessionid\n      ,codigopais\n      ,replace(replace(event_elementtype, \"'\" , ''), \",\" , '') as eventoaccion\n      ,replace(replace(concat(event_step,' - ',event_section), \"'\" , ''), \",\" , '') as eventocategoria\n      ,replace(replace(event_elementdescription, \"'\" , ''), \",\" , '') as eventoetiqueta\n      ,device_category as dispositivo\n      ,session_hostname as nombrehost\n      ,replace(replace(page_location, \"'\" , ''), \",\" , '') as urlpagina\n      ,replace(replace(page_title, \"'\" , ''), \",\" , '') as titulopagina\n      ,case \n            when param_source is not null then param_source\n            when param_source is null then utm_source\n       end as fuente\n      ,replace(replace(page_location, \"'\" , ''), \",\" , '') as paginadestino\n      ,1 as paginasvisitadas\n      ,case \n            when ga_session_number > 1 then 'Returning visitor'\n            else 'New visitor' \n       end as tipousuario\n      ,case \n            when param_medium is not null then param_medium\n            when param_medium is null then utm_medium\n       end as medio\n      ,0 as duracionsesion\n      ,event_country as nombrePais\n      ,fecha\n      ,clientid as visitorid\n      ,clientid as clientID\n      ,'' as solicitudID\n      ,utm_campaign_id as campanaID\n      ,case \n            when param_campaign is not null then param_campaign\n            when param_campaign is null then utm_campaign\n       end as campania\n      ,row_number () over (partition by sessionid order by event_time asc ) as hitnumber\n      ,case \n            when param_content is not null then param_content\n            when param_content is null then utm_content\n       end as utmcontent\n      ,case \n            when param_term is not null then param_term\n            when param_term is null then utm_term\n       end as utmterm\n      ,traffic_gclid as gclid\n      --,event_name as tipohit\n      ,case\n            when event_name = 'page_view' then 'PAGE'\n            when event_name = 'GA4virtualEvent' then 'EVENT'\n            when event_name = 'GA4conversionEvent_U3' then 'LEAD_U3'\n            when event_name = 'GA4conversionEvent_U4' then 'LEAD_U4'      \n      end as tipohit\n      ,event_time as tiempohit\n      ,device_mobile_brand as marcadispositivo\n      ,device_mobile_model as modelodispositivo\n      ,device_operating_system as sistemaoperativo\n      ,device_web_browser as navegadordispositivo\n      ,ga_session_id as visitstarttime\n      ,clientid as fullvisitorid\n      ,clientid as idcliente\n      ,ga_session_id as visitId\n      ,event_timestamp_utc as fechahit\n      ,'(not available)' as tipopago\n      ,event_comefrom as tipodocumento\nfrom \n    unete_analytics\nwhere \n      event_name in ('page_view','GA4virtualEvent','GA4conversionEvent_U4','GA4conversionEvent_U3')\n      and sessionid is not null\n),\n\nunete_bounce as \n(\n  SELECT \n    sessionid AS sessionid_br\n    ,CASE \n      WHEN total_hits > 1 THEN 0 \n      ELSE 1 \n    END  \n      AS bounce\nFROM \n(\n  SELECT \n    sessionid\n    ,COUNT(TIPOHIT) AS total_hits\n  FROM \n    unete_prework\n  GROUP BY \n    sessionid\n)\n)\n\n\nselect \n      aa.sessionid\n      ,aa.codigopais\n      ,left(aa.eventoaccion,150) as eventoaccion\n      ,left(aa.eventocategoria,150) as eventocategoria\n      ,left(aa.eventoetiqueta,2000) as eventoetiqueta\n      ,aa.dispositivo\n      ,bb.bounce\n      ,left(aa.nombrehost,100) as nombrehost\n      ,left(aa.urlpagina,1500) as urlpagina\n      ,left(aa.titulopagina,250) as titulopagina\n      ,left(aa.fuente,500) as fuente\n      ,left(aa.paginadestino,1500) as paginadestino\n      ,aa.paginasvisitadas\n      ,aa.tipousuario\n      ,left(aa.medio,100) as medio\n      ,left(concat(aa.fuente,'/',aa.medio),200) as fuentemedio\n      ,aa.duracionsesion\n      ,left(aa.nombrePais,30) as nombrePais\n      ,aa.fecha\n      ,aa.visitorid\n      ,aa.clientID\n      ,aa.solicitudID\n      ,aa.campanaID\n      ,left(aa.campania, 500) as campania\n      ,aa.hitnumber\n      ,left(aa.utmcontent, 500) as utmcontent\n      ,left(aa.utmterm, 500) as utmterm\n      ,left(aa.gclid, 500) as gclid \n      ,aa.tipohit\n      ,aa.tiempohit\n      ,aa.marcadispositivo\n      ,aa.modelodispositivo\n      ,aa.sistemaoperativo\n      ,aa.navegadordispositivo\n      ,aa.visitstarttime\n      ,aa.fullvisitorid\n      ,aa.idcliente\n      ,aa.visitId\n      ,aa.fechahit\n      ,aa.tipopago\n      ,left(aa.tipodocumento, 500) as tipodocumento\nfrom \n      unete_prework aa \n left join \n      unete_bounce bb \n  on \n      (aa.sessionid = bb.sessionid_br);"
			},
			"skip":false,
			"subTitle":"Google Big Query",
			"title":"Execute SQL query",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{}
			},
			"context":{
				"appName":"google_big_query",
				"resourceVersion":2,
				"connectionId":"68c9c0bbaec01d5c19a98dfd",
				"resourceName":"google_big_query_execute_sql",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"tGUg2",
			"index":4,
			"inputs":{
				"project_id":"belcorp-digital",
				"timeoutMs":100000,
				"maxResults":1000,
				"query":"EXPORT DATA OPTIONS (\n  uri = 'gs://bq-results-analytics-bsp/exports/ga4-events-{{ mjyIT.outputs.now }}-*.csv',\n  format = 'CSV',\n  overwrite = true,\n  compression = 'GZIP'\n)\nAS\nSELECT * FROM belcorp-digital.analytics_327881126.unete_export_staging"
			},
			"skip":false,
			"subTitle":"Google Big Query",
			"title":"Execute SQL query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"gcloud_storage",
				"resourceVersion":203,
				"connectionId":"685bcc2c65e872673cb8718e",
				"resourceName":"gcloud_storage_list_objects",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"n_UsOI2",
			"index":5,
			"inputs":{
				"bucketName":"bq-results-analytics-bsp",
				"versions":false,
				"maxResults":1000,
				"prefix":"exports/ga4-events-{{ mjyIT.outputs.now }}",
				"projection":"noAcl"
			},
			"skip":false,
			"subTitle":"Google Cloud Storage",
			"title":"List objects",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":146,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"n_VoW8P",
			"index":6,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"file":{
											"type":"object",
											"properties":{},
											"additionalProperties":false,
											"title":"File"
										}
									},
									"required":[
										"file"
									]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"List",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"List",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"file":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"File"
									}
								},
								"required":[
									"file"
								]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":146,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"n_Fgu3d",
			"index":7,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_UsOI2.outputs.items }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"gcloud_storage",
				"resourceVersion":568,
				"connectionId":"685bcc2c65e872673cb8718e",
				"resourceName":"gcloud_storage_download_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Fgu3d@IhJoz-1@l",
			"id":"n_3ReLJ",
			"index":8,
			"inputs":{
				"bucketName":"bq-results-analytics-bsp",
				"name":"{{ n_Fgu3d.outputs.item.name }}"
			},
			"skip":false,
			"subTitle":"Google Cloud Storage",
			"title":"Download an object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":100,
				"resourceName":"utility_by_unifyapps_unzip_file",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Fgu3d@IhJoz-1@l",
			"id":"_R2tvR",
			"index":9,
			"inputs":{
				"fileDetails":"{{ n_3ReLJ.outputs.file }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Unzip file",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":147,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Fgu3d@IhJoz-1@l",
			"id":"n_bBKeV",
			"index":10,
			"inputs":{
				"itemToAdd":{
					"file":"{{ _R2tvR.outputs.filesDetails[0] }}"
				},
				"insertLocation":"END",
				"listName":"{{ n_VoW8P.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"csv_by_unifyapps",
				"resourceVersion":1,
				"resourceName":"csv_by_unifyapps_merge_csv_files",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"n_GBVKw",
			"index":11,
			"inputs":{
				"sourceHasHeader":false,
				"files":{
					"source":"{{ n_VoW8P.outputs.items }}",
					"ua:type":"mappedArray",
					"items":"{{ n_VoW8P.outputs.items[0].file }}"
				}
			},
			"skip":false,
			"subTitle":"CSV by UnifyApps",
			"title":"Merge given list of files",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"csv_by_unifyapps",
				"resourceVersion":9,
				"resourceName":"csv_by_unifyapps_transform_csv",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"_IAT7c",
			"index":12,
			"inputs":{
				"fileName":"file",
				"fileDetails":"{{ n_GBVKw.outputs.fileDetails }}",
				"reader":{
					"delimiter":",",
					"encoding":"UTF-8"
				},
				"sourceHasHeader":false,
				"skipHeaderRow":false,
				"writer":{
					"delimiter":"\\t",
					"encoding":"UTF-8"
				},
				"keepExactFileName":false
			},
			"skip":true,
			"subTitle":"CSV by UnifyApps",
			"title":"Transform CSV file",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"amazon_s3",
				"resourceVersion":500,
				"connectionId":"686d4bc961ac003d727ce550",
				"resourceName":"amazon_s3_upload_file",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"_ZZNHe",
			"index":13,
			"inputs":{
				"bucketName":"belc-bigdata-landing-dlk-qas",
				"select":"CLOUD_STORAGE",
				"file":"{{ _IAT7c.outputs.fileDetails }}",
				"acceleratedEndpoint":false,
				"objectName":"datalake/input/unete/c0/{{ mjyIT.outputs.foldername }}/googleanalytics.txt",
				"region":"us-east-1"
			},
			"skip":true,
			"subTitle":"Amazon S3",
			"title":"Upload file",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"csv_by_unifyapps",
				"resourceVersion":81,
				"resourceName":"csv_by_unifyapps_list_to_csv_file",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"LFVGF",
			"index":14,
			"inputs":{
				"fileName":"_success.event",
				"delimiter":",",
				"staticHeaders":[
					{
						"key":"test",
						"value":"2"
					}
				],
				"skipHeaderRow":true,
				"headerType":"STATIC",
				"encoding":"UTF-8",
				"keepExactFileName":false,
				"dataSource":" ",
				"fileType":"csv"
			},
			"skip":true,
			"subTitle":"CSV by UnifyApps",
			"title":"Write data to CSV file",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"amazon_s3",
				"resourceVersion":177,
				"connectionId":"686d4bc961ac003d727ce550",
				"resourceName":"amazon_s3_upload_file",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"IhJoz-1",
			"id":"vYsRm",
			"index":15,
			"inputs":{
				"bucketName":"belc-bigdata-landing-dlk-qas",
				"select":"CLOUD_STORAGE",
				"file":"{{ LFVGF.outputs.fileDetails }}",
				"acceleratedEndpoint":false,
				"objectName":"datalake/input/unete/c0/{{ mjyIT.outputs.foldername }}/_success.event",
				"region":"us-east-1"
			},
			"skip":true,
			"subTitle":"Amazon S3",
			"title":"Upload file",
			"type":"ACTION"
		}
	],
	"ownerUserId":3952,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"tags":[
		
	],
	"version":58
}
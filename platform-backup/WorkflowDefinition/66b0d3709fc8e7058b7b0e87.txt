{
	"appsUsed":[
		
	],
	"createdTime":1722864496231,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759243649727,
		"deployedBy":-1,
		"deployedDefinitionId":"68dbed8123e6682b9a51eda1",
		"status":"DEPLOYED",
		"version":97,
		"workflowVersion":146
	},
	"edges":[
		{
			"fromNodeId":"9Ou0Q",
			"priority":0,
			"skip":false,
			"toNodeId":"xlzZF",
			"type":"next"
		},
		{
			"fromNodeId":"xlzZF",
			"priority":0,
			"skip":false,
			"toNodeId":"sXufa",
			"type":"next"
		},
		{
			"fromNodeId":"sXufa",
			"priority":0,
			"skip":false,
			"toNodeId":"ckKJQ",
			"type":"next"
		},
		{
			"fromNodeId":"ckKJQ",
			"priority":0,
			"skip":false,
			"toNodeId":"V63rM",
			"type":"next"
		},
		{
			"fromNodeId":"V63rM",
			"priority":0,
			"skip":false,
			"toNodeId":"bYRFf",
			"type":"next"
		},
		{
			"fromNodeId":"bYRFf",
			"priority":0,
			"skip":false,
			"toNodeId":"RYZa7",
			"type":"next"
		},
		{
			"fromNodeId":"RYZa7",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"RYZa7@1",
			"type":"branch"
		},
		{
			"fromNodeId":"RYZa7@1",
			"priority":0,
			"skip":false,
			"toNodeId":"CrMl2",
			"type":"next"
		},
		{
			"fromNodeId":"CrMl2",
			"priority":0,
			"skip":false,
			"toNodeId":"mj9E8",
			"type":"next"
		},
		{
			"fromNodeId":"mj9E8",
			"priority":0,
			"skip":false,
			"toNodeId":"X9JXq",
			"type":"next"
		},
		{
			"fromNodeId":"X9JXq",
			"priority":0,
			"skip":false,
			"toNodeId":"dvULv",
			"type":"next"
		},
		{
			"fromNodeId":"dvULv",
			"priority":0,
			"skip":false,
			"toNodeId":"Jkwsc",
			"type":"next"
		},
		{
			"fromNodeId":"Jkwsc",
			"priority":0,
			"skip":false,
			"toNodeId":"2WRbj",
			"type":"next"
		},
		{
			"fromNodeId":"2WRbj",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"_UDmpo",
			"type":"next"
		},
		{
			"fromNodeId":"2WRbj",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"t5QYF",
			"type":"error"
		},
		{
			"fromNodeId":"RYZa7",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"RYZa7@2",
			"type":"branch"
		},
		{
			"fromNodeId":"RYZa7@2",
			"priority":0,
			"skip":false,
			"toNodeId":"PVFny",
			"type":"next"
		},
		{
			"fromNodeId":"PVFny",
			"priority":0,
			"skip":false,
			"toNodeId":"53TKb",
			"type":"next"
		},
		{
			"fromNodeId":"53TKb",
			"priority":0,
			"skip":false,
			"toNodeId":"AYikG",
			"type":"next"
		},
		{
			"fromNodeId":"AYikG",
			"priority":0,
			"skip":false,
			"toNodeId":"51AmW",
			"type":"next"
		},
		{
			"fromNodeId":"51AmW",
			"priority":0,
			"skip":false,
			"toNodeId":"1WNUn",
			"type":"next"
		},
		{
			"fromNodeId":"1WNUn",
			"priority":0,
			"skip":false,
			"toNodeId":"eQIhy",
			"type":"next"
		},
		{
			"fromNodeId":"eQIhy",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"_LgGJD",
			"type":"next"
		},
		{
			"fromNodeId":"eQIhy",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"9WeDM",
			"type":"error"
		},
		{
			"fromNodeId":"_UDmpo",
			"priority":0,
			"skip":false,
			"toNodeId":"9Cy69",
			"type":"next"
		},
		{
			"fromNodeId":"t5QYF",
			"priority":0,
			"skip":false,
			"toNodeId":"9Cy69",
			"type":"next"
		},
		{
			"fromNodeId":"_LgGJD",
			"priority":0,
			"skip":false,
			"toNodeId":"9Cy69",
			"type":"next"
		},
		{
			"fromNodeId":"9WeDM",
			"priority":0,
			"skip":false,
			"toNodeId":"9Cy69",
			"type":"next"
		},
		{
			"fromNodeId":"RYZa7",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"9Cy69",
			"type":"branch"
		},
		{
			"fromNodeId":"9Cy69",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"I7hXX",
			"type":"if"
		},
		{
			"fromNodeId":"I7hXX",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Bvsy6",
			"type":"next"
		},
		{
			"fromNodeId":"9Cy69",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Bvsy6",
			"type":"next"
		},
		{
			"fromNodeId":"n_Bvsy6",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zYRZZ",
			"type":"if"
		},
		{
			"fromNodeId":"n_zYRZZ",
			"priority":0,
			"skip":false,
			"toNodeId":"N6Zxf",
			"type":"next"
		},
		{
			"fromNodeId":"n_Bvsy6",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"N6Zxf",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"66b0d3709fc8e7058b7b0e87",
	"lastModifiedBy":-1,
	"lcName":"relevance groundedness (ai agent)",
	"modifiedTime":1759371967407,
	"name":"Relevance Groundedness (AI Agent)",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":46,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"9Ou0Q",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"properties":{
						"groundedness":{
							"type":"string",
							"title":"groundedness"
						},
						"relevance":{
							"type":"string",
							"title":"relevance"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"answer":{
							"type":"string",
							"title":"answer"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						},
						"llmModel":{
							"type":"string",
							"title":"llmModel"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"parentType":{
							"type":"string",
							"title":"Parent Type"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":167,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"xlzZF",
			"index":2,
			"inputs":{
				"automationId":"679629c41a248f0b3415c3b1",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ 9Ou0Q.outputs.caseId }}",
					"aiAgentId":"{{ 9Ou0Q.outputs.aiAgentId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":299,
				"resourceName":"variable_by_unifyapps_get_session_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"sXufa",
			"index":3,
			"inputs":{
				"variableSchema":{
					"type":"object",
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable",
			"title":"Get Session Variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				},
				"visibleOptionalFields":[
					"root.parameters.message.items.content.items",
					"root.parameters.message.items.role",
					"root.parameters.message.source",
					"root.parameters.message.ua:type",
					"root.parameters.message.items.role"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":483,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"ckKJQ",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"context":{
							"type":"string",
							"title":"Context"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"message":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{},
											"additionalProperties":false
										},
										"title":"Content"
									},
									"role":{
										"type":"string",
										"title":"Role"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Message"
						}
					}
				},
				"code":"def outputLines = []\n\nif(binding.hasVariable('message')){\n    for (msg in message) {\n        def role = msg[\"role\"]\n        def contentList = msg[\"content\"]\n        \n        // If role is 'user' or 'assistant', we check each item in 'content'\n        for (item in contentList) {\n            def itemType = item.get(\"type\")\n            \n            // 1) Handle user text\n            if (role == \"user\" && itemType == \"text\") {\n                // USER text\n                def textContent = item[\"text\"]\n                outputLines.add(\"USER: ${textContent}\")\n            }\n            \n            // 2) Handle assistant text\n            else if (role == \"assistant\" && itemType == \"text\") {\n                // ASSISTANT text (like \"Thought: ...\")\n                def textContent = item[\"text\"]\n                outputLines.add(\"ASSISTANT: ${textContent}\")\n            }\n            \n            // 3) Handle tool call (assistant uses a tool)\n            else if (role == \"assistant\" && itemType == \"tool_use\") {\n                // TOOL CALL\n                def toolName = item.get(\"name\")\n                def toolInput = item.get(\"input\", [:])\n                def query = toolInput.get(\"query\", \"\")\n                outputLines.add(\"TOOL CALL: ${toolName}, query: \\\"${query}\\\"\")\n            }\n            \n            // 4) Handle tool result (user role, tool_result type)\n            else if (role == \"user\" && itemType == \"tool_result\") {\n                // TOOL RESULT\n                def toolResultText = item.get(\"content\", \"\")\n                // or you might want to store the entire chunk text\n                outputLines.add(\"TOOL RESULT: ${toolResultText}\")\n            }\n        }\n    }\n}\n\n// Join all lines into a single string\ndef result = [\n    context: outputLines.join(\"\\n\")\n]\n\nreturn result",
				"compile_static":false,
				"captureStdOutput":false
			},
			"skip":false,
			"subTitle":"Context(MsgHistory)",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.message.items.content.items",
					"root.parameters.message.items.role",
					"root.parameters.message.source",
					"root.parameters.message.ua:type",
					"root.parameters.message.items.role"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":483,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"V63rM",
			"index":5,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"userMsg":{
							"type":"string",
							"title":"User Msg"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"message":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{},
											"additionalProperties":false
										},
										"title":"Content"
									},
									"role":{
										"type":"string",
										"title":"Role"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Message"
						}
					}
				},
				"code":"def result = [:]\n\nif(!binding.hasVariable('message')) return [userMsg : \"\"]\n\nfor (msg in message.reverse()) {\n    if (msg?.role == 'user') {\n        for (contentItem in msg?.content ?: []) {\n            if (contentItem?.type != 'tool_result') {\n                result = [userMsg: contentItem?.text ?: '']\n                return result  // Exit immediately once found\n            }\n        }\n    }\n}\n\nreturn result",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"message":{
						"source":"{{ xlzZF.outputs.messages }}",
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"source":"{{ xlzZF.outputs.messages[0].content }}",
								"ua:type":"mappedArray",
								"items":"{{ xlzZF.outputs.messages[0].content[0] }}"
							},
							"role":"{{ xlzZF.outputs.messages[0].role }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"LastUserMsg",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":114,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"bYRFf",
			"index":6,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"relevance":{
							"type":"number",
							"title":"relevance"
						},
						"groundedness":{
							"type":"number",
							"title":"groundedness"
						},
						"startTime":{
							"type":"integer",
							"title":"Start Time"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"groundedness":1,
				"startTime":"=INT((NOW()-DATE(1970,1,1))*86400000)",
				"relevance":1
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"relevance":{
							"type":"number",
							"title":"relevance"
						},
						"groundedness":{
							"type":"number",
							"title":"groundedness"
						},
						"startTime":{
							"type":"integer",
							"title":"Start Time"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"RYZa7",
			"index":7,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"Relevance",
							"conditions":{
								"filters":[
									{
										"property":"{{ bYRFf.outputs.relevance }}",
										"filter":{
											"operator":"EQUAL",
											"value":"1"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"GroundedNess",
							"conditions":{
								"filters":[
									{
										"property":"{{ bYRFf.outputs.groundedness }}",
										"filter":{
											"operator":"EQUAL",
											"value":"1"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":34,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@1",
			"id":"RYZa7@1",
			"index":8,
			"inputs":{
				"name":"Relevance",
				"conditions":{
					"filters":[
						{
							"property":"{{ bYRFf.outputs.relevance }}",
							"filter":{
								"operator":"EQUAL",
								"value":"1"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"template_by_unifyapps",
				"resourceVersion":77,
				"resourceName":"template_by_unifyapps_compile_template",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@1",
			"id":"CrMl2",
			"index":9,
			"inputs":{
				"input_schema":{
					"question":"{{ V63rM.outputs.result.userMsg }}",
					"context":"{{ ckKJQ.outputs.result.context }}"
				},
				"template_id":"e_66b0def2818b84433fd0639f"
			},
			"skip":false,
			"subTitle":"Template by UnifyApps",
			"title":"Compile template",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":114,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@1",
			"id":"mj9E8",
			"index":10,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"ui:submitButtonOptions":{
						"norender":true
					}
				},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"relevance_response":{
							"type":"string",
							"title":"Relevance Response"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"relevance_response":{
							"type":"string",
							"title":"Relevance Response"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":159,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@1",
			"id":"X9JXq",
			"index":11,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"message":{
							"type":"object",
							"properties":{
								"text":{
									"type":"string",
									"title":"text"
								},
								"type":{
									"type":"string",
									"title":"type"
								}
							},
							"additionalProperties":false,
							"title":"message",
							"required":[]
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"message":{
					"text":"{{ CrMl2.outputs.output }}",
					"type":"text"
				}
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"message":{
							"type":"object",
							"properties":{
								"text":{
									"type":"string",
									"title":"text"
								},
								"type":{
									"type":"string",
									"title":"type"
								}
							},
							"additionalProperties":false,
							"title":"message",
							"required":[]
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":48,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@1",
			"id":"dvULv",
			"index":12,
			"inputs":{
				"automationId":"66ac70650f725f5b425d12d8",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"logProbs":false,
					"aiAgentId":"{{ 9Ou0Q.outputs.aiAgentId }}",
					"modelId":"{{ 9Ou0Q.outputs.llmModel }}",
					"maxTokens":1024,
					"message":{
						"items":{
							"role":"user",
							"content":{
								"items":"{{ X9JXq.outputs.message }}",
								"ua:type":"mappedArray"
							}
						},
						"ua:type":"mappedArray"
					},
					"responseFormat":{
						"type":"json_object"
					},
					"step":"Guardrail",
					"caseId":"{{ 9Ou0Q.outputs.caseId }}",
					"messageId":"{{ sXufa.outputs.messageId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":56,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@1",
			"id":"Jkwsc",
			"index":13,
			"inputs":{
				"variables":[
					{
						"source":"{{ mj9E8.outputs.relevance_response }}",
						"value":"{{ dvULv.outputs.llmResponse }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":12,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"RYZa7@2yRzo-1@1",
			"id":"2WRbj",
			"index":14,
			"inputs":{
				"jsonSchema":{
					"type":"object",
					"properties":{
						"relevance":{
							"type":"number",
							"title":"Relevance"
						},
						"reasoning":{
							"type":"string",
							"title":"Reasoning"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"jsonString":"{{ mj9E8.outputs.relevance_response }}"
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialize string to json object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":65,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2WRbj@RYZa7@2yRzo-1@1@success",
			"id":"_UDmpo",
			"index":15,
			"inputs":{
				"variables":[
					{
						"source":"{{ bYRFf.outputs.relevance }}",
						"value":"{{ 2WRbj.outputs.result.relevance }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":56,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2WRbj@RYZa7@2yRzo-1@1@error",
			"id":"t5QYF",
			"index":16,
			"inputs":{
				"variables":[
					{
						"source":"{{ bYRFf.outputs.relevance }}",
						"value":10
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":34,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@2",
			"id":"RYZa7@2",
			"index":17,
			"inputs":{
				"name":"GroundedNess",
				"conditions":{
					"filters":[
						{
							"property":"{{ bYRFf.outputs.groundedness }}",
							"filter":{
								"operator":"EQUAL",
								"value":"1"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"template_by_unifyapps",
				"resourceVersion":77,
				"resourceName":"template_by_unifyapps_compile_template",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@2",
			"id":"PVFny",
			"index":18,
			"inputs":{
				"input_schema":{
					"answer":"{{ 9Ou0Q.outputs.answer }}",
					"context":"{{ ckKJQ.outputs.result.context }}"
				},
				"template_id":"e_66b0dc98818b84433fd0637d"
			},
			"skip":false,
			"subTitle":"Template by UnifyApps",
			"title":"Compile template",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":114,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@2",
			"id":"53TKb",
			"index":19,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"ui:submitButtonOptions":{
						"norender":true
					}
				},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"groundedness_response":{
							"type":"string",
							"title":"Groundedness Response"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"groundedness_response":{
							"type":"string",
							"title":"Groundedness Response"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":159,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@2",
			"id":"AYikG",
			"index":20,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"message":{
							"type":"object",
							"properties":{
								"text":{
									"type":"string",
									"title":"text"
								},
								"type":{
									"type":"string",
									"title":"type"
								}
							},
							"additionalProperties":false,
							"title":"message",
							"required":[]
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"message":{
					"type":"text",
					"text":"{{ PVFny.outputs.output }}"
				}
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"message":{
							"type":"object",
							"properties":{
								"text":{
									"type":"string",
									"title":"text"
								},
								"type":{
									"type":"string",
									"title":"type"
								}
							},
							"additionalProperties":false,
							"title":"message",
							"required":[]
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":48,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@2",
			"id":"51AmW",
			"index":21,
			"inputs":{
				"automationId":"66ac70650f725f5b425d12d8",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"logProbs":false,
					"aiAgentId":"{{ 9Ou0Q.outputs.aiAgentId }}",
					"modelId":"{{ 9Ou0Q.outputs.llmModel }}",
					"message":{
						"items":{
							"role":"user",
							"content":{
								"items":"{{ AYikG.outputs.message }}",
								"ua:type":"mappedArray"
							}
						},
						"ua:type":"mappedArray"
					},
					"responseFormat":{
						"type":"json_object"
					},
					"step":"Guardrail",
					"messageId":"{{ sXufa.outputs.messageId }}",
					"caseId":"{{ 9Ou0Q.outputs.caseId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":56,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RYZa7@2yRzo-1@2",
			"id":"1WNUn",
			"index":22,
			"inputs":{
				"variables":[
					{
						"source":"{{ 53TKb.outputs.groundedness_response }}",
						"value":"{{ 51AmW.outputs.llmResponse }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":12,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"RYZa7@2yRzo-1@2",
			"id":"eQIhy",
			"index":23,
			"inputs":{
				"jsonSchema":{
					"type":"object",
					"properties":{
						"score":{
							"type":"number",
							"title":"Score"
						},
						"reasoning":{
							"type":"string",
							"title":"Reasoning"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"jsonString":"{{ 53TKb.outputs.groundedness_response }}"
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialize string to json object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":65,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"eQIhy@RYZa7@2yRzo-1@2@success",
			"id":"_LgGJD",
			"index":24,
			"inputs":{
				"variables":[
					{
						"source":"{{ bYRFf.outputs.groundedness }}",
						"value":"{{ eQIhy.outputs.result.score }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":56,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"eQIhy@RYZa7@2yRzo-1@2@error",
			"id":"9WeDM",
			"index":25,
			"inputs":{
				"variables":[
					{
						"source":"{{ bYRFf.outputs.groundedness }}",
						"value":10
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":50,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"9Cy69",
			"index":26,
			"inputs":{
				"filters":[
					{
						"property":"{{ bYRFf.outputs.relevance }}",
						"filter":{
							"operator":"MISSING"
						}
					},
					{
						"property":"{{ bYRFf.outputs.groundedness }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"delay",
				"resourceVersion":33,
				"resourceName":"delay_for",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"9Cy69@2yRzo-1@y",
			"id":"I7hXX",
			"index":27,
			"inputs":{
				"duration":1,
				"unit":"SECONDS"
			},
			"skip":false,
			"subTitle":"Delay",
			"title":"Set delay duration",
			"type":"DELAY"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"n_Bvsy6",
			"index":28,
			"inputs":{
				"filters":[
					{
						"property":"{{ 9Ou0Q.outputs.parentType }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":467,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"n_Bvsy6@2yRzo-1@y",
			"id":"n_zYRZZ",
			"index":29,
			"inputs":{
				"automationId":"68c51597269ad81cc750a3ca",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ 9Ou0Q.outputs.caseId }}",
					"aiAgentId":"{{ 9Ou0Q.outputs.aiAgentId }}",
					"executionInstanceId":"{{ __RUN__.outputs.executionId }}",
					"parent":"{{ 9Ou0Q.outputs.parentType }}",
					"messageId":"{{ sXufa.outputs.messageId }}",
					"llmTimeTaken":"=INT((NOW()-DATE(1970,1,1))*86400000)-{{ bYRFf.outputs.startTime }}",
					"input":"{{ 9Ou0Q.outputs }}",
					"currentType":"Groundedness And Relevance",
					"rootExecutionId":"{{ __RUN__.outputs.rootExecutionId }}",
					"parentExecutionId":"{{ __RUN__.outputs.parentExecutionId }}",
					"userId":"=IF(ISNUMBER({{ __RUN__.outputs.userId }}), {{ __RUN__.outputs.userId }}, 0)",
					"output":"{\"groundedness\": {{ bYRFf.outputs.groundedness }}, \"relevance\": {{ bYRFf.outputs.relevance }}}",
					"fromAutomationId":"{{ __RUN__.outputs.workflowId }}",
					"startTime":"{{ bYRFf.outputs.startTime }}",
					"success":true
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"global":false
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Capture Trace",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":42,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"2yRzo-1",
			"id":"N6Zxf",
			"index":30,
			"inputs":{
				"result":{
					"groundedness":"{{ bYRFf.outputs.groundedness }}",
					"relevance":"{{ bYRFf.outputs.relevance }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":295,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent"
	],
	"version":147
}
{
	"appsUsed":[
		
	],
	"createdTime":1727849688223,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1758655357962,
		"deployedBy":0,
		"deployedDefinitionId":"68d2f37d38757c179b123655",
		"status":"DEPLOYED",
		"version":60,
		"workflowVersion":79
	},
	"edges":[
		{
			"fromNodeId":"NW4CS",
			"priority":0,
			"skip":false,
			"toNodeId":"_xLM96",
			"type":"next"
		},
		{
			"fromNodeId":"_xLM96",
			"priority":0,
			"skip":false,
			"toNodeId":"_z71Kj",
			"type":"next"
		},
		{
			"fromNodeId":"_z71Kj",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_3kctC",
			"type":"if"
		},
		{
			"fromNodeId":"_3kctC",
			"priority":0,
			"skip":false,
			"toNodeId":"_Rrtwk",
			"type":"next"
		},
		{
			"fromNodeId":"_Rrtwk",
			"priority":0,
			"skip":false,
			"toNodeId":"_j8oEM",
			"type":"next"
		},
		{
			"fromNodeId":"_j8oEM",
			"priority":0,
			"skip":false,
			"toNodeId":"_ZOvz7",
			"type":"next"
		},
		{
			"fromNodeId":"_ZOvz7",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"_RkJgF",
			"type":"next"
		},
		{
			"fromNodeId":"_RkJgF",
			"priority":0,
			"skip":false,
			"toNodeId":"_g73YC",
			"type":"next"
		},
		{
			"fromNodeId":"_ZOvz7",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"_wLx1e",
			"type":"error"
		},
		{
			"fromNodeId":"_z71Kj",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_KPsRh",
			"type":"next"
		},
		{
			"fromNodeId":"_KPsRh",
			"priority":0,
			"skip":false,
			"toNodeId":"_CwyLn",
			"type":"next"
		},
		{
			"fromNodeId":"_g73YC",
			"priority":0,
			"skip":false,
			"toNodeId":"UXenQ",
			"type":"next"
		},
		{
			"fromNodeId":"_wLx1e",
			"priority":0,
			"skip":false,
			"toNodeId":"UXenQ",
			"type":"next"
		},
		{
			"fromNodeId":"_CwyLn",
			"priority":0,
			"skip":false,
			"toNodeId":"UXenQ",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"66fce4d883726c045fb6263b",
	"lastModifiedBy":-1,
	"lcName":"ai agents multimodality image processing",
	"modifiedTime":1759243544586,
	"name":"AI Agents MultiModality Image Processing",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":58,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"NW4CS",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"image":{
							"type":"object",
							"properties":{
								"imageText":{
									"type":"string",
									"title":"imageText"
								},
								"page_number":{
									"type":"number",
									"title":"page_number"
								},
								"image_mime_type":{
									"type":"string",
									"title":"image_mime_type"
								}
							},
							"additionalProperties":false,
							"title":"image",
							"required":[]
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"image":{
							"type":"object",
							"properties":{
								"metadata":{
									"type":"object",
									"properties":{
										"filetype":{
											"type":"string",
											"title":"filetype"
										},
										"page_number":{
											"type":"integer",
											"title":"page_number"
										},
										"filename":{
											"type":"string",
											"title":"filename"
										},
										"languages":{
											"type":"array",
											"items":{
												"type":"string"
											},
											"title":"languages"
										},
										"image_base64":{
											"type":"string",
											"title":"image_base64"
										},
										"image_mime_type":{
											"type":"string",
											"title":"image_mime_type"
										}
									},
									"additionalProperties":false,
									"title":"metadata"
								},
								"element_id":{
									"type":"string",
									"title":"element_id"
								},
								"text":{
									"type":"string",
									"title":"text"
								},
								"type":{
									"type":"string",
									"title":"type"
								}
							},
							"additionalProperties":false,
							"title":"image",
							"required":[]
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"modelId":{
							"type":"string",
							"title":"modelId"
						},
						"context":{
							"type":"string",
							"title":"context"
						},
						"knowledgeId":{
							"type":"string",
							"title":"knowledgeId"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":123,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"_xLM96",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"llmOutput":{
							"type":"string",
							"title":"llmOutput"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"llmOutput":{
							"type":"string",
							"title":"llmOutput"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":52,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"_z71Kj",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ NW4CS.outputs.image.metadata.image_base64 }}",
						"filter":{
							"operator":"CONTAINS",
							"value":"a"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"template_by_unifyapps",
				"resourceVersion":85,
				"resourceName":"template_by_unifyapps_compile_template",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_z71Kj@kqPAS-1@y",
			"id":"_3kctC",
			"index":0,
			"inputs":{
				"input_schema":{
					"caption":"{{ NW4CS.outputs.context }}"
				},
				"template_id":"e_67014362aa92dc525d3c833e"
			},
			"skip":false,
			"subTitle":"Template by UnifyApps",
			"title":"Compile template",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":55,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_z71Kj@kqPAS-1@y",
			"id":"_Rrtwk",
			"index":0,
			"inputs":{
				"automationId":"66dfd76eb70dad256986b784",
				"runtimeConnections":{},
				"synchronous":true,
				"parameters":{
					"aiAgentId":"{{ NW4CS.outputs.aiAgentId }}",
					"modelId":"{{ NW4CS.outputs.modelId }}",
					"image_url":"{{ NW4CS.outputs.image.metadata.image_base64 }}",
					"content":"{{ _3kctC.outputs.output }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":18,
				"resourceName":"code_by_unifyapps_python",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_z71Kj@kqPAS-1@y",
			"id":"_j8oEM",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"output_str":{
							"type":"string",
							"title":"output_str"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"input_str":{
							"type":"string",
							"title":"input_str"
						}
					},
					"additionalProperties":false
				},
				"code":"import re\npattern = r'\\{(.*?)\\}(?=[^}]*$)'\nmatch = re.search(pattern, input_str, re.DOTALL)\nif match:\n    output_str= '{' + match.group(1) + '}'\nelse:\n    output_str=input_str\n\nresult={\"output_str\":output_str}\n",
				"isAsync":false,
				"parameters":{
					"input_str":"{{ _Rrtwk.outputs.llmResponse }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Python script",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":21,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"_z71Kj@kqPAS-1@y",
			"id":"_ZOvz7",
			"index":0,
			"inputs":{
				"jsonSchema":{
					"type":"object",
					"properties":{
						"is_info_present_in_image":{
							"type":"string",
							"title":"is_info_present_in_image"
						},
						"content":{
							"type":"string",
							"title":"content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"jsonString":"{{ _j8oEM.outputs.result.output_str }}"
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialise string to JSON object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":21,
				"resourceName":"utility_by_unifyapps_to_json_string",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_ZOvz7@_z71Kj@kqPAS-1@y@success",
			"id":"_RkJgF",
			"index":0,
			"inputs":{
				"object":"{{ _ZOvz7.outputs.result.content }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Serialise object to JSON string",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":64,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_ZOvz7@_z71Kj@kqPAS-1@y@success",
			"id":"_g73YC",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ _xLM96.outputs.llmOutput }}",
						"value":"{{ _RkJgF.outputs.result }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":64,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_ZOvz7@_z71Kj@kqPAS-1@y@error",
			"id":"_wLx1e",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ _xLM96.outputs.llmOutput }}",
						"value":"."
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":55,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_z71Kj@kqPAS-1@n",
			"id":"_KPsRh",
			"index":0,
			"inputs":{
				"automationId":"66dfd76eb70dad256986b784",
				"runtimeConnections":{},
				"synchronous":true,
				"parameters":{
					"aiAgentId":"{{ NW4CS.outputs.aiAgentId }}",
					"modelId":"{{ NW4CS.outputs.modelId }}",
					"content":"Context: {{ NW4CS.outputs.context }}, Given the context ,Generate Description for this table content:{{ NW4CS.outputs.image.text }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":64,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_z71Kj@kqPAS-1@n",
			"id":"_CwyLn",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ _xLM96.outputs.llmOutput }}",
						"value":"Description: {{ _KPsRh.outputs.llmResponse }}------------ Content: {{ NW4CS.outputs.image.text }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":49,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"UXenQ",
			"index":0,
			"inputs":{
				"result":{
					"image":{
						"page_number":"{{ NW4CS.outputs.image.metadata.page_number }}",
						"image_mime_type":"{{ NW4CS.outputs.image.metadata.image_mime_type }}",
						"imageText":"{{ _xLM96.outputs.llmOutput }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":295,
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent",
		"Knowledge"
	],
	"version":80
}
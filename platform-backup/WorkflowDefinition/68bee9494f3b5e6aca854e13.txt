{
	"appsUsed":[
		"microsoft_onedrive"
	],
	"createdTime":1757528317550,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759243526075,
		"deployedBy":-1,
		"deployedDefinitionId":"68dbed065e003e08cdeb2e65",
		"status":"DEPLOYED",
		"version":4,
		"workflowVersion":61
	},
	"edges":[
		{
			"fromNodeId":"n_ljCIU",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ZoZJY",
			"type":"next"
		},
		{
			"fromNodeId":"n_ZoZJY",
			"priority":0,
			"skip":false,
			"toNodeId":"1WPP3",
			"type":"next"
		},
		{
			"fromNodeId":"1WPP3",
			"priority":0,
			"skip":false,
			"toNodeId":"_lX2vf",
			"type":"next"
		},
		{
			"fromNodeId":"_lX2vf",
			"priority":0,
			"skip":false,
			"toNodeId":"n_iaXR5",
			"type":"next"
		},
		{
			"fromNodeId":"n_iaXR5",
			"priority":0,
			"skip":false,
			"toNodeId":"n_bFiXl",
			"type":"next"
		},
		{
			"fromNodeId":"n_bFiXl",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ob5x2",
			"type":"next"
		},
		{
			"fromNodeId":"n_ob5x2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_n6ZIg",
			"type":"next"
		},
		{
			"fromNodeId":"n_n6ZIg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_XT4gx",
			"type":"next"
		},
		{
			"fromNodeId":"n_XT4gx",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7jdLv",
			"type":"loop"
		},
		{
			"fromNodeId":"n_7jdLv",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_XT4gx",
			"type":"next"
		},
		{
			"fromNodeId":"n_XT4gx",
			"priority":0,
			"skip":false,
			"toNodeId":"Wdlf1",
			"type":"next"
		},
		{
			"fromNodeId":"Wdlf1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_vwbKn",
			"type":"next"
		},
		{
			"fromNodeId":"n_vwbKn",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Rah3o",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68bee9494f3b5e6aca854e13",
	"lastModifiedBy":-1,
	"lcName":"knowledge downloader | onedrive | folder",
	"modifiedTime":1759243561572,
	"name":"Knowledge Downloader | OneDrive | Folder",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":438,
				"resourceName":"callables_from_interface"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_ljCIU",
			"index":1,
			"inputs":{
				"result":{
					"additionalProperties":false,
					"type":"object",
					"required":[],
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"properties":{
						"hasMore":{
							"type":"boolean",
							"title":"Has More"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						},
						"downloadedEntitiesCount":{
							"type":"integer",
							"title":"Downloaded Entities Count"
						},
						"knowledgeDownloadFinished":{
							"type":"boolean",
							"title":"Knowledge Download Finished"
						}
					}
				},
				"callableInterfaceId":"6854484ac68462013926b9cf",
				"setup":{
					"additionalProperties":false,
					"type":"object",
					"required":[],
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"properties":{
						"knowledgeId":{
							"type":"string",
							"title":"knowledgeId"
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"knowledge":{
							"type":"object",
							"properties":{
								"readVersion":{
									"type":"integer",
									"title":"readVersion"
								},
								"lastSyncTime":{
									"type":"integer",
									"title":"lastSyncTime"
								},
								"cursorObject":{
									"type":"object",
									"title":"cursorObject"
								},
								"applicationInfo":{
									"type":"object",
									"properties":{
										"context":{
											"type":"object",
											"properties":{
												"connectionId":{
													"type":"string",
													"title":"Connection Id"
												}
											},
											"additionalProperties":false,
											"title":"Context",
											"required":[]
										}
									},
									"additionalProperties":false,
									"title":"Application Info",
									"required":[]
								},
								"indexingVersion":{
									"type":"integer",
									"title":"Indexing Version"
								}
							},
							"title":"knowledge",
							"additionalProperties":false,
							"required":[]
						},
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						},
						"importerConnections":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Importer Connections"
						},
						"downloaderConfig":{
							"type":"object",
							"properties":{
								"grabberType":{
									"type":"string",
									"title":"Grabber Type"
								},
								"currentTimeEpoch":{
									"type":"integer",
									"title":"Current Time Epoch"
								},
								"startTimeEpoch":{
									"type":"integer",
									"title":"Start Time Epoch"
								}
							},
							"additionalProperties":false,
							"title":"Downloader Config",
							"required":[]
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger interface",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_ZoZJY",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"skipToken":{
							"type":"string",
							"title":"Skip Token"
						},
						"lastModifiedTime":{
							"type":"integer",
							"title":"Last Modified Time"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"cursorObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor Object"
						}
					}
				},
				"code":"if(!binding.hasVariable('cursorObject') || !cursorObject.containsKey('skipToken')){\n  cursorObject[\"skipToken\"] = \"\"\n}\nreturn cursorObject",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"cursorObject":"{{ n_ljCIU.outputs.cursor }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":68,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"1WPP3",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"mappedInputs":{
							"type":"object",
							"properties":{
								"startDate":{
									"type":"number",
									"title":"Start Date"
								},
								"endDate":{
									"type":"number",
									"title":"End Date"
								},
								"recursive":{
									"type":"boolean",
									"title":"Recursive"
								},
								"folderPath":{
									"type":"string",
									"title":"Folder Path"
								},
								"fileType":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"File Type"
								},
								"nameContains":{
									"type":"string",
									"title":"Name Contains"
								},
								"author":{
									"type":"string",
									"title":"Author"
								},
								"fileSize":{
									"type":"number",
									"title":"File Size"
								}
							},
							"additionalProperties":false,
							"title":"Mapped Inputs",
							"required":[]
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						},
						"downloaderConfig":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Downloader Config"
						}
					}
				},
				"code":"import java.lang.Math\nimport java.time.Instant\nimport java.time.*\nimport java.time.Instant\nimport java.time.LocalDateTime\nimport java.time.ZoneId\nimport java.time.format.DateTimeFormatter\n\n\nString getTimeStampString(Long epoch) {\n    return LocalDateTime.ofInstant(Instant.ofEpochMilli(epoch), ZoneId.systemDefault()).format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd'T'HH:mm:ss\"));\n}\n\ndef mappedInputs = [:]\ndef userSpecifiedStartDate = 0\ndef userSpecifiedEndDate = binding.hasVariable(\"downloaderConfig\") ? downloaderConfig.get(\"currentTimeEpoch\",0) : 0;\n\nif(binding.hasVariable('inputs')){\n    if(inputs?.createdDate){\n        userSpecifiedStartDate = inputs.createdDate.from ?  Instant.parse(inputs.createdDate.from).toEpochMilli() : 0;\n        userSpecifiedEndDate = inputs.createdDate.to ? Instant.parse(inputs.createdDate.to).toEpochMilli() : downloaderConfig.get(\"currentTimeEpoch\",0);\n    }\n    mappedInputs[\"folderPath\"] = inputs?.folderPath\n    mappedInputs[\"recursive\"] = inputs?.recursive\n    mappedInputs[\"author\"] = inputs?.author\n    mappedInputs[\"fileSize\"] = inputs?.fileSize\n    mappedInputs[\"author\"] = inputs?.author\n    mappedInputs[\"nameContains\"] = inputs?.nameContains\n    mappedInputs[\"fileType\"] = inputs?.fileType\n}\n\nmappedInputs[\"startDate\"] = userSpecifiedStartDate\nmappedInputs[\"endDate\"] = userSpecifiedEndDate\n\nreturn [\"mappedInputs\": mappedInputs];",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"inputs":"{{ n_ljCIU.outputs.inputs }}",
					"cursor":"{{ n_ljCIU.outputs.cursor }}",
					"downloaderConfig":"{{ n_ljCIU.outputs.downloaderConfig }}"
				}
			},
			"skip":false,
			"subTitle":"Resolve inputs",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"_lX2vf",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"path":{
							"type":"object",
							"properties":{
								"id":{
									"type":"string",
									"title":"Id"
								}
							},
							"additionalProperties":false,
							"title":"Path",
							"required":[]
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"folderPath":{
							"type":"string",
							"title":"Folder Path"
						}
					}
				},
				"code":"def encodedFolderPath\n\nif(binding.hasVariable('folderPath')){\n  encodedFolderPath = encodeUrl(folderPath)\n}\n\ndef path = [:]\n\nif(encodedFolderPath == \"root\"){\n  return [\"path\": path]\n}\n\npath[\"id\"] = encodedFolderPath\n\nreturn [\"path\": path]\n\ndef encodeUrl(String url) {\n    def encoded = URLEncoder.encode(url, 'UTF-8')\n    newUrl = encoded.replace('+', '%20')\n    return newUrl\n}",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"folderPath":"{{ 1WPP3.outputs.result.mappedInputs.folderPath }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":450,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_iaXR5",
			"index":5,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":"object",
									"properties":{
										"@microsoft_graph_downloadUrl":{
											"type":"string",
											"title":"@microsoft_graph_downloadUrl"
										},
										"createdBy":{
											"type":"object",
											"properties":{
												"user":{
													"type":"object",
													"properties":{
														"email":{
															"type":"string",
															"title":"email"
														},
														"id":{
															"type":"string",
															"title":"id"
														},
														"displayName":{
															"type":"string",
															"title":"displayName"
														}
													},
													"title":"user",
													"additionalProperties":false
												}
											},
											"title":"createdBy",
											"additionalProperties":false
										},
										"createdDateTime":{
											"type":"string",
											"title":"createdDateTime"
										},
										"eTag":{
											"type":"string",
											"title":"eTag"
										},
										"id":{
											"type":"string",
											"title":"id"
										},
										"lastModifiedBy":{
											"type":"object",
											"properties":{
												"user":{
													"type":"object",
													"properties":{
														"email":{
															"type":"string",
															"title":"email"
														},
														"id":{
															"type":"string",
															"title":"id"
														},
														"displayName":{
															"type":"string",
															"title":"displayName"
														}
													},
													"title":"user",
													"additionalProperties":false
												}
											},
											"title":"lastModifiedBy",
											"additionalProperties":false
										},
										"lastModifiedDateTime":{
											"type":"string",
											"title":"lastModifiedDateTime"
										},
										"name":{
											"type":"string",
											"title":"name"
										},
										"parentReference":{
											"type":"object",
											"properties":{
												"driveType":{
													"type":"string",
													"title":"driveType"
												},
												"driveId":{
													"type":"string",
													"title":"driveId"
												},
												"id":{
													"type":"string",
													"title":"id"
												},
												"name":{
													"type":"string",
													"title":"name"
												},
												"path":{
													"type":"string",
													"title":"path"
												},
												"siteId":{
													"type":"string",
													"title":"siteId"
												}
											},
											"title":"parentReference",
											"additionalProperties":false
										},
										"webUrl":{
											"type":"string",
											"title":"webUrl"
										},
										"cTag":{
											"type":"string",
											"title":"cTag"
										},
										"file":{
											"type":"object",
											"properties":{
												"hashes":{
													"type":"object",
													"properties":{
														"quickXorHash":{
															"type":"string",
															"title":"quickXorHash"
														}
													},
													"title":"hashes",
													"additionalProperties":false
												},
												"mimeType":{
													"type":"string",
													"title":"mimeType"
												}
											},
											"title":"file",
											"additionalProperties":false
										},
										"fileSystemInfo":{
											"type":"object",
											"properties":{
												"createdDateTime":{
													"type":"string",
													"title":"createdDateTime"
												},
												"lastModifiedDateTime":{
													"type":"string",
													"title":"lastModifiedDateTime"
												}
											},
											"title":"fileSystemInfo",
											"additionalProperties":false
										},
										"shared":{
											"type":"object",
											"properties":{
												"scope":{
													"type":"string",
													"title":"scope"
												}
											},
											"title":"shared",
											"additionalProperties":false
										},
										"size":{
											"type":"integer",
											"title":"size"
										}
									},
									"additionalProperties":false
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"folderList",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"folderList",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"@microsoft_graph_downloadUrl":{
										"type":"string",
										"title":"@microsoft_graph_downloadUrl"
									},
									"createdBy":{
										"type":"object",
										"properties":{
											"user":{
												"type":"object",
												"properties":{
													"email":{
														"type":"string",
														"title":"email"
													},
													"id":{
														"type":"string",
														"title":"id"
													},
													"displayName":{
														"type":"string",
														"title":"displayName"
													}
												},
												"title":"user",
												"additionalProperties":false
											}
										},
										"title":"createdBy",
										"additionalProperties":false
									},
									"createdDateTime":{
										"type":"string",
										"title":"createdDateTime"
									},
									"eTag":{
										"type":"string",
										"title":"eTag"
									},
									"id":{
										"type":"string",
										"title":"id"
									},
									"lastModifiedBy":{
										"type":"object",
										"properties":{
											"user":{
												"type":"object",
												"properties":{
													"email":{
														"type":"string",
														"title":"email"
													},
													"id":{
														"type":"string",
														"title":"id"
													},
													"displayName":{
														"type":"string",
														"title":"displayName"
													}
												},
												"title":"user",
												"additionalProperties":false
											}
										},
										"title":"lastModifiedBy",
										"additionalProperties":false
									},
									"lastModifiedDateTime":{
										"type":"string",
										"title":"lastModifiedDateTime"
									},
									"name":{
										"type":"string",
										"title":"name"
									},
									"parentReference":{
										"type":"object",
										"properties":{
											"driveType":{
												"type":"string",
												"title":"driveType"
											},
											"driveId":{
												"type":"string",
												"title":"driveId"
											},
											"id":{
												"type":"string",
												"title":"id"
											},
											"name":{
												"type":"string",
												"title":"name"
											},
											"path":{
												"type":"string",
												"title":"path"
											},
											"siteId":{
												"type":"string",
												"title":"siteId"
											}
										},
										"title":"parentReference",
										"additionalProperties":false
									},
									"webUrl":{
										"type":"string",
										"title":"webUrl"
									},
									"cTag":{
										"type":"string",
										"title":"cTag"
									},
									"file":{
										"type":"object",
										"properties":{
											"hashes":{
												"type":"object",
												"properties":{
													"quickXorHash":{
														"type":"string",
														"title":"quickXorHash"
													}
												},
												"title":"hashes",
												"additionalProperties":false
											},
											"mimeType":{
												"type":"string",
												"title":"mimeType"
											}
										},
										"title":"file",
										"additionalProperties":false
									},
									"fileSystemInfo":{
										"type":"object",
										"properties":{
											"createdDateTime":{
												"type":"string",
												"title":"createdDateTime"
											},
											"lastModifiedDateTime":{
												"type":"string",
												"title":"lastModifiedDateTime"
											}
										},
										"title":"fileSystemInfo",
										"additionalProperties":false
									},
									"shared":{
										"type":"object",
										"properties":{
											"scope":{
												"type":"string",
												"title":"scope"
											}
										},
										"title":"shared",
										"additionalProperties":false
									},
									"size":{
										"type":"integer",
										"title":"size"
									}
								}
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":458,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_bFiXl",
			"index":6,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"downloadedEntities":{
							"type":"integer",
							"title":"Downloaded Entities"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"downloadedEntities":0
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"downloadedEntities":{
							"type":"integer",
							"title":"Downloaded Entities"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"microsoft_onedrive",
				"resourceVersion":2382,
				"connectionId":"68c30c2e37208f7049c80447",
				"resourceName":"microsoft_onedrive_list_drive_items",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_ob5x2",
			"index":7,
			"inputs":{
				"path":"{{ _lX2vf.outputs.result.path }}",
				"skipToken":"{{ n_ZoZJY.outputs.result.skipToken }}",
				"orderBy":"lastModifiedDateTime",
				"pageSize":100,
				"FilesOrFolders":"files",
				"operator":"asc"
			},
			"skip":false,
			"subTitle":"Microsoft OneDrive",
			"title":"List files and folders",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.inputFolders.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_n6ZIg",
			"index":8,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"filteredFiles":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"@microsoft_graph_downloadUrl":{
										"type":"string",
										"title":"@microsoft_graph_downloadUrl"
									},
									"createdBy":{
										"type":"object",
										"properties":{
											"application":{
												"type":"object",
												"properties":{
													"id":{
														"type":"string",
														"title":"id"
													},
													"displayName":{
														"type":"string",
														"title":"displayName"
													}
												},
												"title":"application",
												"additionalProperties":false
											},
											"user":{
												"type":"object",
												"properties":{
													"email":{
														"type":"string",
														"title":"email"
													},
													"id":{
														"type":"string",
														"title":"id"
													},
													"displayName":{
														"type":"string",
														"title":"displayName"
													}
												},
												"title":"user",
												"additionalProperties":false
											}
										},
										"title":"createdBy",
										"additionalProperties":false
									},
									"createdDateTime":{
										"type":"string",
										"title":"createdDateTime"
									},
									"eTag":{
										"type":"string",
										"title":"eTag"
									},
									"id":{
										"type":"string",
										"title":"id"
									},
									"lastModifiedBy":{
										"type":"object",
										"properties":{
											"user":{
												"type":"object",
												"properties":{
													"email":{
														"type":"string",
														"title":"email"
													},
													"id":{
														"type":"string",
														"title":"id"
													},
													"displayName":{
														"type":"string",
														"title":"displayName"
													}
												},
												"title":"user",
												"additionalProperties":false
											},
											"application":{
												"type":"object",
												"properties":{
													"id":{
														"type":"string",
														"title":"id"
													},
													"displayName":{
														"type":"string",
														"title":"displayName"
													}
												},
												"title":"application",
												"additionalProperties":false
											}
										},
										"title":"lastModifiedBy",
										"additionalProperties":false
									},
									"lastModifiedDateTime":{
										"type":"string",
										"title":"lastModifiedDateTime"
									},
									"name":{
										"type":"string",
										"title":"name"
									},
									"parentReference":{
										"type":"object",
										"properties":{
											"driveType":{
												"type":"string",
												"title":"driveType"
											},
											"driveId":{
												"type":"string",
												"title":"driveId"
											},
											"id":{
												"type":"string",
												"title":"id"
											},
											"name":{
												"type":"string",
												"title":"name"
											},
											"path":{
												"type":"string",
												"title":"path"
											},
											"siteId":{
												"type":"string",
												"title":"siteId"
											}
										},
										"title":"parentReference",
										"additionalProperties":false
									},
									"webUrl":{
										"type":"string",
										"title":"webUrl"
									},
									"cTag":{
										"type":"string",
										"title":"cTag"
									},
									"file":{
										"type":"object",
										"properties":{
											"hashes":{
												"type":"object",
												"properties":{
													"quickXorHash":{
														"type":"string",
														"title":"quickXorHash"
													}
												},
												"title":"hashes",
												"additionalProperties":false
											},
											"mimeType":{
												"type":"string",
												"title":"mimeType"
											}
										},
										"title":"file",
										"additionalProperties":false
									},
									"fileSystemInfo":{
										"type":"object",
										"properties":{
											"createdDateTime":{
												"type":"string",
												"title":"createdDateTime"
											},
											"lastModifiedDateTime":{
												"type":"string",
												"title":"lastModifiedDateTime"
											}
										},
										"title":"fileSystemInfo",
										"additionalProperties":false
									},
									"shared":{
										"type":"object",
										"properties":{
											"scope":{
												"type":"string",
												"title":"scope"
											}
										},
										"title":"shared",
										"additionalProperties":false
									},
									"size":{
										"type":"integer",
										"title":"size"
									}
								},
								"additionalProperties":false
							},
							"title":"Filtered Files"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"inputFolders":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Input Folders"
						},
						"userStartTime":{
							"type":"string",
							"title":"User Start Time"
						},
						"userEndTime":{
							"type":"string",
							"title":"User End Time"
						}
					}
				},
				"code":"import java.time.*\nimport java.time.format.DateTimeFormatter\n\ndef filterFilesByTime(folders, startTimeMillis, endTimeMillis) {\n    def filteredFiles = []\n\n    def startInstant = Instant.ofEpochMilli(startTimeMillis)\n    def endInstant = Instant.ofEpochMilli(endTimeMillis)\n\n    folders.each { file ->\n        def modifiedStr = file.createdDateTime\n        if (modifiedStr) {\n            def modifiedInstant = Instant.parse(modifiedStr)\n\n            if (!modifiedInstant.isBefore(startInstant) && !modifiedInstant.isAfter(endInstant)) {\n                filteredFiles << file\n            }\n        }\n    }\n\n    return [filteredFiles: filteredFiles]\n}\n\nif(!binding.hasVariable('inputFolders')){\n    return []\n}\n\ndef result = filterFilesByTime(inputFolders, userStartTime, userEndTime)\nreturn result\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"userStartTime":"{{ 1WPP3.outputs.result.mappedInputs.startDate }}",
					"userEndTime":"{{ 1WPP3.outputs.result.mappedInputs.endDate }}",
					"inputFolders":{
						"source":"{{ n_ob5x2.outputs.value }}",
						"ua:type":"mappedArray",
						"items":"{{ n_ob5x2.outputs.value[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":456,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_XT4gx",
			"index":9,
			"inputs":{
				"repeatMode":"BATCH",
				"listSource":"{{ n_n6ZIg.outputs.result.filteredFiles }}",
				"captureIterations":false,
				"batchSize":10
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":454,
				"resourceName":"callables_call_automation_batch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_XT4gx@_0u0ns-1@l",
			"id":"n_7jdLv",
			"index":10,
			"inputs":{
				"automationId":"68bef42fb2d57b3b8f06258d",
				"runtimeConnections":{
					"microsoft_onedrive":"{{ n_ljCIU.outputs.knowledge.applicationInfo.context.connectionId }}"
				},
				"synchronous":true,
				"distributeWorkflowLoad":false,
				"parametersList":{
					"source":"{{ n_XT4gx.outputs.item }}",
					"ua:type":"mappedArray",
					"items":{
						"connectionId":"{{ n_ljCIU.outputs.knowledge.applicationInfo.context.connectionId }}",
						"indexingVersion":"{{ n_ljCIU.outputs.knowledge.indexingVersion }}",
						"knowledgeId":"{{ n_ljCIU.outputs.knowledgeId }}",
						"parentPath":"{{ n_XT4gx.outputs.item[0].parentReference.path }}",
						"fileName":"{{ n_XT4gx.outputs.item[0].name }}",
						"inputs":"{{ 1WPP3.outputs.result.mappedInputs }}",
						"downloaderConfig":"{{ n_ljCIU.outputs.downloaderConfig }}",
						"maxModifiedTime":"{{ n_ZoZJY.outputs.result.lastModifiedTime }}"
					}
				},
				"version":"-1"
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.lastModifiedTimeList.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":52,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"Wdlf1",
			"index":11,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"skipToken":{
							"type":"string",
							"title":"Skip Token"
						},
						"hasMore":{
							"type":"boolean",
							"title":"Has More"
						},
						"lastModifiedTime":{
							"type":"integer",
							"title":"Last Modified Time"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"nextPageToken":{
							"type":"string",
							"title":"Next Page Token"
						},
						"lastModifiedTimeList":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Last Modified Time List"
						}
					}
				},
				"code":"import java.net.URLDecoder\nimport java.text.SimpleDateFormat\nimport java.util.TimeZone\nimport java.time.*\nimport java.time.format.DateTimeFormatter\nimport java.time.*\nimport java.time.format.DateTimeFormatter\n\n\nif (!binding.hasVariable('nextPageToken')) {\n    return [hasMore: false, skipToken: null] \n}\n\ndef lastModifiedTime\n\nif(binding.hasVariable('lastModifiedTimeList')){\n    lastModifiedTime = lastModifiedTimeList[-1]\n    lastModifiedTime = Instant.parse(lastModifiedTime).toEpochMilli()\n}\n\ndef queryParams = nextPageToken.split(\"\\\\?\")[1] \ndef params = queryParams.split(\"&\") \n\nfor (param in params) {\n    def keyValue = param.split(\"=\")\n    if (keyValue[0] == \"\\$skipToken\") { \n        def decodedToken = URLDecoder.decode(keyValue[1], \"UTF-8\") \n        return ['hasMore': true, 'skipToken': decodedToken, 'lastModifiedTime': lastModifiedTime] \n    }\n} \n\nreturn ['hasMore': false, 'skipToken': null, 'lastModifiedTime': lastModifiedTime] ",
				"compile_static":false,
				"isAsync":false,
				"captureStdOutput":false,
				"parameters":{
					"nextPageToken":"{{ n_ob5x2.outputs.@odata_nextLink }}",
					"lastModifiedTimeList":{
						"source":"{{ n_ob5x2.outputs.value }}",
						"ua:type":"mappedArray",
						"items":"{{ n_ob5x2.outputs.value[0].lastModifiedDateTime }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Extract cursor",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.files.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_vwbKn",
			"index":12,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"downloadedFileCount":{
							"type":"integer",
							"title":"Downloaded File Count"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						},
						"hasMore":{
							"type":"boolean",
							"title":"Has More"
						},
						"maxModifiedTime":{
							"type":"string",
							"title":"Max Modified Time"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"nextToken":{
							"type":"string",
							"title":"Next Token"
						},
						"userSpecifiedEndTime":{
							"type":"number",
							"title":"User Specified End Time"
						},
						"currentTimeEpoch":{
							"type":"number",
							"title":"Current Time Epoch"
						},
						"files":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Files"
						},
						"lastModifiedTime":{
							"type":"integer",
							"title":"Last Modified Time"
						},
						"currentToken":{
							"type":"string",
							"title":"Current Token"
						}
					}
				},
				"code":"boolean channelHasMore = false\ndef token\n\nif(binding.hasVariable('nextToken') && nextToken.length()>0){\n    channelHasMore = true \n    token = nextToken\n}\nelse if(binding.hasVariable('currentToken'))\n{\n    token = currentToken\n}\n\ndef lastModifiedTimeNew\n\nif(binding.hasVariable('lastModifiedTime')){\n    lastModifiedTimeNew = lastModifiedTime\n}\n\nboolean hasMore = (channelHasMore)\n\nreturn [\"cursor\": [\"skipToken\": token, \"lastModifiedTime\": lastModifiedTimeNew], \"hasMore\":hasMore]\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"nextToken":"{{ Wdlf1.outputs.result.skipToken }}",
					"userSpecifiedEndTime":"{{ 1WPP3.outputs.result.mappedInputs.endDate }}",
					"currentTimeEpoch":"{{ n_ljCIU.outputs.downloaderConfig.currentTimeEpoch }}",
					"lastModifiedTime":"{{ Wdlf1.outputs.result.lastModifiedTime }}",
					"currentToken":"{{ n_ZoZJY.outputs.result.skipToken }}",
					"files":{
						"source":"{{ n_ob5x2.outputs.value }}",
						"ua:type":"mappedArray",
						"items":"{{ n_ob5x2.outputs.value[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Resolve cursor and flags",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":454,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_0u0ns-1",
			"id":"n_Rah3o",
			"index":13,
			"inputs":{
				"result":{
					"hasMore":"{{ n_vwbKn.outputs.result.hasMore }}",
					"cursor":"{{ n_vwbKn.outputs.result.cursor }}",
					"downloadedEntitiesCount":"=LEN({{ n_n6ZIg.outputs.result.filteredFiles }})",
					"knowledgeDownloadFinished":false
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":635,
	"runtimeConnectionAppNames":[
		"microsoft_onedrive"
	],
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"headerValueTierMap":{},
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"knowledge_v2"
	],
	"version":62
}
{
	"appsUsed":[
		
	],
	"createdTime":1728369737832,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759243626833,
		"deployedBy":-1,
		"deployedDefinitionId":"68dbed6a5e003e08cdeb307c",
		"status":"DEPLOYED",
		"version":72,
		"workflowVersion":115
	},
	"edges":[
		{
			"fromNodeId":"_Fqzi9",
			"priority":0,
			"skip":false,
			"toNodeId":"Dsy4j",
			"type":"next"
		},
		{
			"fromNodeId":"Dsy4j",
			"priority":0,
			"skip":false,
			"toNodeId":"6QouL",
			"type":"next"
		},
		{
			"fromNodeId":"6QouL",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"6QouL@1",
			"type":"branch"
		},
		{
			"fromNodeId":"6QouL@1",
			"priority":0,
			"skip":false,
			"toNodeId":"9fjgA",
			"type":"next"
		},
		{
			"fromNodeId":"6QouL",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"6QouL@2",
			"type":"branch"
		},
		{
			"fromNodeId":"6QouL@2",
			"priority":0,
			"skip":false,
			"toNodeId":"TbO8i",
			"type":"next"
		},
		{
			"fromNodeId":"6QouL",
			"name":"3",
			"priority":0,
			"skip":false,
			"toNodeId":"6QouL@3",
			"type":"branch"
		},
		{
			"fromNodeId":"6QouL@3",
			"priority":0,
			"skip":false,
			"toNodeId":"0sPkb",
			"type":"next"
		},
		{
			"fromNodeId":"9fjgA",
			"priority":0,
			"skip":false,
			"toNodeId":"UtA9i",
			"type":"next"
		},
		{
			"fromNodeId":"TbO8i",
			"priority":0,
			"skip":false,
			"toNodeId":"UtA9i",
			"type":"next"
		},
		{
			"fromNodeId":"0sPkb",
			"priority":0,
			"skip":false,
			"toNodeId":"UtA9i",
			"type":"next"
		},
		{
			"fromNodeId":"6QouL",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"UtA9i",
			"type":"branch"
		},
		{
			"fromNodeId":"UtA9i",
			"priority":0,
			"skip":false,
			"toNodeId":"Cm0Dp",
			"type":"next"
		},
		{
			"fromNodeId":"Cm0Dp",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"Cm0Dp@1",
			"type":"branch"
		},
		{
			"fromNodeId":"Cm0Dp@1",
			"priority":0,
			"skip":false,
			"toNodeId":"G8U7K",
			"type":"next"
		},
		{
			"fromNodeId":"Cm0Dp",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"Cm0Dp@2",
			"type":"branch"
		},
		{
			"fromNodeId":"Cm0Dp@2",
			"priority":0,
			"skip":false,
			"toNodeId":"H10k0",
			"type":"next"
		},
		{
			"fromNodeId":"Cm0Dp",
			"name":"3",
			"priority":0,
			"skip":false,
			"toNodeId":"Cm0Dp@3",
			"type":"branch"
		},
		{
			"fromNodeId":"Cm0Dp@3",
			"priority":0,
			"skip":false,
			"toNodeId":"WXd1i",
			"type":"next"
		},
		{
			"fromNodeId":"Cm0Dp",
			"name":"4",
			"priority":0,
			"skip":false,
			"toNodeId":"Cm0Dp@4",
			"type":"branch"
		},
		{
			"fromNodeId":"Cm0Dp@4",
			"priority":0,
			"skip":false,
			"toNodeId":"W68aB",
			"type":"next"
		},
		{
			"fromNodeId":"G8U7K",
			"priority":0,
			"skip":false,
			"toNodeId":"dvxqL",
			"type":"next"
		},
		{
			"fromNodeId":"H10k0",
			"priority":0,
			"skip":false,
			"toNodeId":"dvxqL",
			"type":"next"
		},
		{
			"fromNodeId":"WXd1i",
			"priority":0,
			"skip":false,
			"toNodeId":"dvxqL",
			"type":"next"
		},
		{
			"fromNodeId":"W68aB",
			"priority":0,
			"skip":false,
			"toNodeId":"dvxqL",
			"type":"next"
		},
		{
			"fromNodeId":"Cm0Dp",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"dvxqL",
			"type":"branch"
		},
		{
			"fromNodeId":"dvxqL",
			"priority":0,
			"skip":false,
			"toNodeId":"_6zVDo",
			"type":"next"
		},
		{
			"fromNodeId":"_6zVDo",
			"priority":0,
			"skip":false,
			"toNodeId":"_eR1Wr",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"6704d4498ebb1e6635800a0a",
	"lastModifiedBy":-1,
	"lcName":"authority rerank documents",
	"modifiedTime":1759371944148,
	"name":"Authority Rerank Documents",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":352,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"_Fqzi9",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									}
								},
								"additionalProperties":false
							},
							"title":"chunks"
						}
					},
					"additionalProperties":false
				},
				"setup":{
					"type":"object",
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"authorEmail":{
										"type":"string",
										"title":"authorEmail"
									},
									"semanticScore":{
										"type":"number",
										"title":"semanticScore"
									}
								},
								"additionalProperties":false
							},
							"title":"chunks"
						},
						"internalAgentModelId":{
							"type":"string",
							"title":"internalAgentModelId"
						},
						"userQuery":{
							"type":"string",
							"title":"userQuery"
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"searcherId":{
							"type":"string",
							"title":"searcherId"
						},
						"expiryCheck":{
							"type":"boolean",
							"title":"expiryCheck",
							"default":"true"
						},
						"departmentCheck":{
							"type":"boolean",
							"title":"departmentCheck",
							"default":"true"
						},
						"verificationCheck":{
							"type":"boolean",
							"title":"verificationCheck",
							"default":"true"
						},
						"expertiseScore":{
							"type":"boolean",
							"title":"expertiseScore",
							"default":"true"
						},
						"seniorityScore":{
							"type":"boolean",
							"title":"seniorityScore",
							"default":"true"
						},
						"contentCategoryScore":{
							"type":"boolean",
							"title":"contentCategoryScore",
							"default":"true"
						},
						"publicationScore":{
							"type":"boolean",
							"title":"publicationScore",
							"default":"true"
						},
						"weightExpertiseAreas":{
							"type":"number",
							"title":"Weight Expertise Areas",
							"default":"0.4"
						},
						"weightSeniority":{
							"type":"number",
							"title":"Weight Seniority",
							"default":"0.3"
						},
						"weightContentCategory":{
							"type":"number",
							"title":"Weight Content Category",
							"default":"0.2"
						},
						"weightPublicationStatus":{
							"type":"number",
							"title":"Weight Publication Status",
							"default":"0.1"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"ChunkRerankerInterface",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.initial_chunks.items.chunkMetadata",
					"root.parameters.initial_chunks.items.text",
					"root.parameters.initial_chunks.items.semanticScore",
					"root.parameters.initial_chunks.items.chunk_uuid",
					"root.parameters.initial_chunks.items.authorEmail"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":349,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"Dsy4j",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"preProcessedChunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"semanticScore":{
										"type":"number",
										"title":"semanticScore"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									},
									"authorEmail":{
										"type":"string",
										"title":"Author Email"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"preProcessedChunks"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"initial_chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"semanticScore":{
										"type":"number",
										"title":"semanticScore"
									},
									"authorEmail":{
										"type":"string",
										"title":"Author Email"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"initial_chunks"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def chunks = []\n\nif (binding.hasVariable(\"initial_chunks\")) {\n    def re_scored_chunks = binding.getVariable(\"initial_chunks\")\n    \n    if (initial_chunks) {\n        def chunksCopy = initial_chunks.collect()\n        \n        chunksCopy.sort { a, b -> \n            int scoreComparison = (b.semanticScore <=> a.semanticScore)\n            return scoreComparison\n        }\n        \n        chunksCopy.eachWithIndex { chunk, index ->\n            chunk.chunk_uuid = index + 1\n        }\n        \n        chunks = chunksCopy\n    }\n}\n\nreturn [\n    preProcessedChunks : chunks\n]",
				"parameters":{
					"initial_chunks":{
						"source":"{{ _Fqzi9.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ _Fqzi9.outputs.chunks[0].chunkMetadata }}",
							"text":"{{ _Fqzi9.outputs.chunks[0].text }}",
							"semanticScore":"{{ _Fqzi9.outputs.chunks[0].semanticScore }}",
							"authorEmail":"{{ _Fqzi9.outputs.chunks[0].authorEmail }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"rankChunks",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"6QouL",
			"index":0,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"ExpiredChunks",
							"conditions":{
								"filters":[
									{
										"property":"{{ _Fqzi9.outputs.expiryCheck }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"DepartmentCheck",
							"conditions":{
								"filters":[
									{
										"property":"{{ _Fqzi9.outputs.departmentCheck }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"3",
						"inputs":{
							"name":"VerifiedChunks",
							"conditions":{
								"filters":[
									{
										"property":"{{ _Fqzi9.outputs.verificationCheck }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6QouL@_Tf4WF-1@1",
			"id":"6QouL@1",
			"index":0,
			"inputs":{
				"name":"ExpiredChunks",
				"conditions":{
					"filters":[
						{
							"property":"{{ _Fqzi9.outputs.expiryCheck }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":348,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6QouL@_Tf4WF-1@1",
			"id":"9fjgA",
			"index":0,
			"inputs":{
				"callableInterfaceId":"68206b77ccc45f469e288e6a",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"68284de7df825e08a73ea58e",
				"parameters":{
					"chunks":{
						"source":"{{ Dsy4j.outputs.result.preProcessedChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunkMetadata }}",
							"text":"{{ Dsy4j.outputs.result.preProcessedChunks[0].text }}",
							"semanticScore":"{{ Dsy4j.outputs.result.preProcessedChunks[0].semanticScore }}",
							"authorEmail":"{{ Dsy4j.outputs.result.preProcessedChunks[0].authorEmail }}",
							"chunk_uuid":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunk_uuid }}"
						}
					},
					"userQuery":"{{ _Fqzi9.outputs.userQuery }}",
					"aiAgentId":"{{ _Fqzi9.outputs.aiAgentId }}",
					"searcherId":"{{ _Fqzi9.outputs.searcherId }}",
					"internalAgentModelId":"{{ _Fqzi9.outputs.internalAgentModelId }}"
				}
			},
			"skip":false,
			"subTitle":"rmExpiredChunks",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6QouL@_Tf4WF-1@2",
			"id":"6QouL@2",
			"index":0,
			"inputs":{
				"name":"DepartmentCheck",
				"conditions":{
					"filters":[
						{
							"property":"{{ _Fqzi9.outputs.departmentCheck }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"subTitle":"FilterChunks",
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":349,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6QouL@_Tf4WF-1@2",
			"id":"TbO8i",
			"index":0,
			"inputs":{
				"callableInterfaceId":"68206b77ccc45f469e288e6a",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"682866bf719ce01dcde67efa",
				"parameters":{
					"chunks":{
						"source":"{{ Dsy4j.outputs.result.preProcessedChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunkMetadata }}",
							"text":"{{ Dsy4j.outputs.result.preProcessedChunks[0].text }}",
							"semanticScore":"{{ Dsy4j.outputs.result.preProcessedChunks[0].semanticScore }}",
							"authorEmail":"{{ Dsy4j.outputs.result.preProcessedChunks[0].authorEmail }}",
							"chunk_uuid":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunk_uuid }}"
						}
					},
					"userQuery":"{{ _Fqzi9.outputs.userQuery }}",
					"aiAgentId":"{{ _Fqzi9.outputs.aiAgentId }}",
					"searcherId":"{{ _Fqzi9.outputs.searcherId }}",
					"internalAgentModelId":"{{ _Fqzi9.outputs.internalAgentModelId }}"
				}
			},
			"skip":false,
			"subTitle":"rmNonDeptChunks",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6QouL@_Tf4WF-1@3",
			"id":"6QouL@3",
			"index":0,
			"inputs":{
				"name":"VerifiedChunks",
				"conditions":{
					"filters":[
						{
							"property":"{{ _Fqzi9.outputs.verificationCheck }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":350,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6QouL@_Tf4WF-1@3",
			"id":"0sPkb",
			"index":0,
			"inputs":{
				"callableInterfaceId":"68206b77ccc45f469e288e6a",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"682868d9719ce01dcde693fe",
				"parameters":{
					"chunks":{
						"source":"{{ Dsy4j.outputs.result.preProcessedChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunkMetadata }}",
							"text":"{{ Dsy4j.outputs.result.preProcessedChunks[0].text }}",
							"semanticScore":"{{ Dsy4j.outputs.result.preProcessedChunks[0].semanticScore }}",
							"authorEmail":"{{ Dsy4j.outputs.result.preProcessedChunks[0].authorEmail }}",
							"chunk_uuid":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunk_uuid }}"
						}
					},
					"userQuery":"{{ _Fqzi9.outputs.userQuery }}",
					"aiAgentId":"{{ _Fqzi9.outputs.aiAgentId }}",
					"searcherId":"{{ _Fqzi9.outputs.searcherId }}",
					"internalAgentModelId":"{{ _Fqzi9.outputs.internalAgentModelId }}"
				}
			},
			"skip":false,
			"subTitle":"rmNonVerifiedChunks",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"xsdSchemaConfig":{},
				"visibleOptionalFields":[
					"root.parameters.expiredChunks.items.chunkMetadata",
					"root.parameters.expiredChunks.items.rank",
					"root.parameters.expiredChunks.items.score",
					"root.parameters.expiredChunks.items.text",
					"root.parameters.expiredChunks.items.chunk_uuid",
					"root.parameters.departmentChunks.items.chunkMetadata",
					"root.parameters.departmentChunks.items.rank",
					"root.parameters.departmentChunks.items.score",
					"root.parameters.departmentChunks.items.text",
					"root.parameters.departmentChunks.items.chunk_uuid",
					"root.parameters.verifiedChunks.items.chunkMetadata",
					"root.parameters.verifiedChunks.items.rank",
					"root.parameters.verifiedChunks.items.score",
					"root.parameters.verifiedChunks.items.text",
					"root.parameters.verifiedChunks.items.chunk_uuid",
					"root.parameters.chunksList.items.chunkMetadata",
					"root.parameters.chunksList.items.rank",
					"root.parameters.chunksList.items.score",
					"root.parameters.chunksList.items.text",
					"root.parameters.chunksList.items.chunk_uuid"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":356,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"UtA9i",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"filteredChunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									},
									"authorEmail":{
										"type":"string",
										"title":"Author Email"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"filteredChunks"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"expiredChunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"expiredChunks"
						},
						"departmentChunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"departmentChunks"
						},
						"verifiedChunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"verifiedChunks"
						},
						"chunksList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"chunksList"
						}
					},
					"additionalProperties":false
				},
				"compile_static":false,
				"code":"def final_chunks = []\nif(binding.hasVariable(\"chunksList\")){\n  def chunksList = binding.getVariable(\"chunksList\")\n  final_chunks = chunksList\n  if(binding.hasVariable(\"expiredChunks\")){\n    def expiredChunks = binding.getVariable(\"expiredChunks\")\n    final_chunks = final_chunks.findAll { chunk ->\n      expiredChunks.any { expiredChunk -> \n        expiredChunk.chunk_uuid == chunk.chunk_uuid\n      }\n    }\n  }\n  if(binding.hasVariable(\"departmentChunks\")){\n    def departmentChunks = binding.getVariable(\"departmentChunks\")\n    final_chunks = final_chunks.findAll { chunk ->\n      departmentChunks.any { deptChunk -> \n        deptChunk.chunk_uuid == chunk.chunk_uuid\n      }\n    }\n  }\n  if(binding.hasVariable(\"verifiedChunks\")){\n    def verifiedChunks = binding.getVariable(\"verifiedChunks\")\n    final_chunks = final_chunks.findAll { chunk ->\n      verifiedChunks.any { verifiedChunk -> \n        verifiedChunk.chunk_uuid == chunk.chunk_uuid\n      }\n    }\n  }\n}\nreturn [filteredChunks:final_chunks]",
				"parameters":{
					"expiredChunks":{
						"source":"{{ 9fjgA.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ 9fjgA.outputs.chunks[0].chunkMetadata }}",
							"rank":"{{ 9fjgA.outputs.chunks[0].rank }}",
							"score":"{{ 9fjgA.outputs.chunks[0].score }}",
							"text":"{{ 9fjgA.outputs.chunks[0].text }}",
							"chunk_uuid":"{{ 9fjgA.outputs.chunks[0].chunk_uuid }}"
						}
					},
					"departmentChunks":{
						"source":"{{ TbO8i.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ TbO8i.outputs.chunks[0].chunkMetadata }}",
							"rank":"{{ TbO8i.outputs.chunks[0].rank }}",
							"score":"{{ TbO8i.outputs.chunks[0].score }}",
							"text":"{{ TbO8i.outputs.chunks[0].text }}",
							"chunk_uuid":"{{ TbO8i.outputs.chunks[0].chunk_uuid }}"
						}
					},
					"verifiedChunks":{
						"source":"{{ 0sPkb.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ 0sPkb.outputs.chunks[0].chunkMetadata }}",
							"rank":"{{ 0sPkb.outputs.chunks[0].rank }}",
							"score":"{{ 0sPkb.outputs.chunks[0].score }}",
							"text":"{{ 0sPkb.outputs.chunks[0].text }}",
							"chunk_uuid":"{{ 0sPkb.outputs.chunks[0].chunk_uuid }}{{ Dsy4j.outputs.result.preProcessedChunks }}"
						}
					},
					"chunksList":{
						"source":"{{ Dsy4j.outputs.result.preProcessedChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunkMetadata }}",
							"score":"{{ Dsy4j.outputs.result.preProcessedChunks[0].semanticScore }}",
							"text":"{{ Dsy4j.outputs.result.preProcessedChunks[0].text }}",
							"chunk_uuid":"{{ Dsy4j.outputs.result.preProcessedChunks[0].chunk_uuid }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"filterChunks",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"Cm0Dp",
			"index":0,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"ExpertiseAreas",
							"conditions":{
								"filters":[
									{
										"property":"{{ _Fqzi9.outputs.expertiseScore }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"SeniorityLevel",
							"conditions":{
								"filters":[
									{
										"property":"{{ _Fqzi9.outputs.seniorityScore }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"3",
						"inputs":{
							"name":"ContentCategory",
							"conditions":{
								"filters":[
									{
										"property":"{{ _Fqzi9.outputs.contentCategoryScore }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"4",
						"inputs":{
							"name":"PublicationStatus",
							"conditions":{
								"filters":[
									{
										"property":"{{ _Fqzi9.outputs.publicationScore }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@1",
			"id":"Cm0Dp@1",
			"index":0,
			"inputs":{
				"name":"ExpertiseAreas",
				"conditions":{
					"filters":[
						{
							"property":"{{ _Fqzi9.outputs.expertiseScore }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":353,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@1",
			"id":"G8U7K",
			"index":0,
			"inputs":{
				"callableInterfaceId":"68206b77ccc45f469e288e6a",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"68288ac9cd325002b2225090",
				"parameters":{
					"chunks":{
						"source":"{{ UtA9i.outputs.result.filteredChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ UtA9i.outputs.result.filteredChunks[0].chunkMetadata }}",
							"text":"{{ UtA9i.outputs.result.filteredChunks[0].text }}",
							"semanticScore":"{{ UtA9i.outputs.result.filteredChunks[0].score }}",
							"authorEmail":"{{ UtA9i.outputs.result.filteredChunks[0].authorEmail }}",
							"chunk_uuid":"{{ UtA9i.outputs.result.filteredChunks[0].chunk_uuid }}"
						}
					},
					"userQuery":"{{ _Fqzi9.outputs.userQuery }}",
					"aiAgentId":"{{ _Fqzi9.outputs.aiAgentId }}",
					"searcherId":"{{ _Fqzi9.outputs.searcherId }}",
					"internalAgentModelId":"{{ _Fqzi9.outputs.internalAgentModelId }}"
				}
			},
			"skip":false,
			"subTitle":"rankExpertiseAreas",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@2",
			"id":"Cm0Dp@2",
			"index":0,
			"inputs":{
				"name":"SeniorityLevel",
				"conditions":{
					"filters":[
						{
							"property":"{{ _Fqzi9.outputs.seniorityScore }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":353,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@2",
			"id":"H10k0",
			"index":0,
			"inputs":{
				"callableInterfaceId":"68206b77ccc45f469e288e6a",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"6828a61137887749329f29d4",
				"parameters":{
					"chunks":{
						"source":"{{ UtA9i.outputs.result.filteredChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ UtA9i.outputs.result.filteredChunks[0].chunkMetadata }}",
							"text":"{{ UtA9i.outputs.result.filteredChunks[0].text }}",
							"semanticScore":"{{ UtA9i.outputs.result.filteredChunks[0].score }}",
							"authorEmail":"{{ UtA9i.outputs.result.filteredChunks[0].authorEmail }}",
							"chunk_uuid":"{{ UtA9i.outputs.result.filteredChunks[0].chunk_uuid }}"
						}
					},
					"userQuery":"{{ _Fqzi9.outputs.userQuery }}",
					"aiAgentId":"{{ _Fqzi9.outputs.aiAgentId }}",
					"searcherId":"{{ _Fqzi9.outputs.searcherId }}",
					"internalAgentModelId":"{{ _Fqzi9.outputs.internalAgentModelId }}"
				}
			},
			"skip":false,
			"subTitle":"rankSeniority",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@3",
			"id":"Cm0Dp@3",
			"index":0,
			"inputs":{
				"name":"ContentCategory",
				"conditions":{
					"filters":[
						{
							"property":"{{ _Fqzi9.outputs.contentCategoryScore }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":353,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@3",
			"id":"WXd1i",
			"index":0,
			"inputs":{
				"callableInterfaceId":"68206b77ccc45f469e288e6a",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"6828a6ff37887749329f2c3d",
				"parameters":{
					"chunks":{
						"source":"{{ UtA9i.outputs.result.filteredChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ UtA9i.outputs.result.filteredChunks[0].chunkMetadata }}",
							"text":"{{ UtA9i.outputs.result.filteredChunks[0].text }}",
							"semanticScore":"{{ UtA9i.outputs.result.filteredChunks[0].score }}",
							"authorEmail":"{{ UtA9i.outputs.result.filteredChunks[0].authorEmail }}",
							"chunk_uuid":"{{ UtA9i.outputs.result.filteredChunks[0].chunk_uuid }}"
						}
					},
					"userQuery":"{{ _Fqzi9.outputs.userQuery }}",
					"aiAgentId":"{{ _Fqzi9.outputs.aiAgentId }}",
					"searcherId":"{{ _Fqzi9.outputs.searcherId }}",
					"internalAgentModelId":"{{ _Fqzi9.outputs.internalAgentModelId }}"
				}
			},
			"skip":false,
			"subTitle":"rankContentCategory",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@4",
			"id":"Cm0Dp@4",
			"index":0,
			"inputs":{
				"name":"PublicationStatus",
				"conditions":{
					"filters":[
						{
							"property":"{{ _Fqzi9.outputs.publicationScore }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":353,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cm0Dp@_Tf4WF-1@4",
			"id":"W68aB",
			"index":0,
			"inputs":{
				"callableInterfaceId":"68206b77ccc45f469e288e6a",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"6828a7cc37887749329f2e69",
				"parameters":{
					"chunks":{
						"source":"{{ UtA9i.outputs.result.filteredChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ UtA9i.outputs.result.filteredChunks[0].chunkMetadata }}",
							"text":"{{ UtA9i.outputs.result.filteredChunks[0].text }}",
							"semanticScore":"{{ UtA9i.outputs.result.filteredChunks[0].score }}",
							"authorEmail":"{{ UtA9i.outputs.result.filteredChunks[0].authorEmail }}",
							"chunk_uuid":"{{ UtA9i.outputs.result.filteredChunks[0].chunk_uuid }}"
						}
					},
					"userQuery":"{{ _Fqzi9.outputs.userQuery }}",
					"aiAgentId":"{{ _Fqzi9.outputs.aiAgentId }}",
					"searcherId":"{{ _Fqzi9.outputs.searcherId }}",
					"internalAgentModelId":"{{ _Fqzi9.outputs.internalAgentModelId }}"
				}
			},
			"skip":false,
			"subTitle":"rankPublicationStatus",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.rankexpertiseAreas.items.chunkMetadata",
					"root.parameters.rankexpertiseAreas.items.rank",
					"root.parameters.rankexpertiseAreas.items.score",
					"root.parameters.rankexpertiseAreas.items.text",
					"root.parameters.rankexpertiseAreas.items.chunk_uuid",
					"root.parameters.rankSeniority.items.chunkMetadata",
					"root.parameters.rankSeniority.items.rank",
					"root.parameters.rankSeniority.items.score",
					"root.parameters.rankSeniority.items.text",
					"root.parameters.rankSeniority.items.chunk_uuid",
					"root.parameters.rankContentCategory.items.chunkMetadata",
					"root.parameters.rankContentCategory.items.rank",
					"root.parameters.rankContentCategory.items.score",
					"root.parameters.rankContentCategory.items.text",
					"root.parameters.rankContentCategory.items.chunk_uuid",
					"root.parameters.rankPublicationStatus.items.chunkMetadata",
					"root.parameters.rankPublicationStatus.items.rank",
					"root.parameters.rankPublicationStatus.items.score",
					"root.parameters.rankPublicationStatus.items.text",
					"root.parameters.rankPublicationStatus.items.chunk_uuid",
					"root.parameters.chunksList.items.chunkMetadata",
					"root.parameters.chunksList.items.rank",
					"root.parameters.chunksList.items.score",
					"root.parameters.chunksList.items.text",
					"root.parameters.chunksList.items.chunk_uuid"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":356,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"dvxqL",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									}
								},
								"additionalProperties":false
							},
							"title":"chunks"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"rankexpertiseAreas":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"rankexpertiseAreas"
						},
						"rankSeniority":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"rankSeniority"
						},
						"rankContentCategory":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"rankContentCategory"
						},
						"rankPublicationStatus":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false
							},
							"title":"rankPublicationStatus"
						},
						"chunksList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"chunkMetadata"
									},
									"rank":{
										"type":"integer",
										"title":"rank"
									},
									"score":{
										"type":"number",
										"title":"score"
									},
									"text":{
										"type":"string",
										"title":"text"
									},
									"chunk_uuid":{
										"type":"integer",
										"title":"chunk_uuid"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"chunksList"
						},
						"weightExpertiseAreas":{
							"type":"number",
							"title":"Weight Expertise Areas"
						},
						"weightSeniority":{
							"type":"number",
							"title":"Weight Seniority"
						},
						"weightContentCategory":{
							"type":"number",
							"title":"Weight Content Category"
						},
						"weightPublicationStatus":{
							"type":"number",
							"title":"Weight Publication Status"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def final_chunks = []\nif(binding.hasVariable(\"chunksList\")){\n  def chunksList = binding.getVariable(\"chunksList\")\n  final_chunks = chunksList\n  \n  def weightExpertiseAreas = binding.hasVariable(\"weightExpertiseAreas\")?binding.getVariable(\"weightExpertiseAreas\"):0.4\n  def weightSeniority = binding.hasVariable(\"weightSeniority\")?binding.getVariable(\"weightSeniority\"):0.3\n  def weightContentCategory = binding.hasVariable(\"weightContentCategory\")?binding.getVariable(\"weightContentCategory\"):0.2\n  def weightPublicationStatus = binding.hasVariable(\"weightPublicationStatus\")?binding.getVariable(\"weightPublicationStatus\"):0.1\n  \n  final_chunks.each { chunk ->\n    chunk.scoreExpertiseAreas = 0\n    chunk.scoreSeniority = 0\n    chunk.scoreContentCategory = 0\n    chunk.scorePublicationStatus = 0\n  }\n  \n  if(binding.hasVariable(\"rankexpertiseAreas\")){\n    def rankexpertiseAreas = binding.getVariable(\"rankexpertiseAreas\")\n    final_chunks.each { item ->\n      def rankedItem = rankexpertiseAreas.find { it.chunk_uuid == item.chunk_uuid }\n      if (rankedItem) {\n        item.scoreExpertiseAreas = ((rankexpertiseAreas.size() - rankedItem.rank) / rankexpertiseAreas.size()) * 100\n      }\n    }\n  }\n  \n  if(binding.hasVariable(\"rankSeniority\")){\n    def rankSeniority = binding.getVariable(\"rankSeniority\")\n    final_chunks.each { item ->\n      def rankedItem = rankSeniority.find { it.chunk_uuid == item.chunk_uuid }\n      if (rankedItem) {\n        item.scoreSeniority = ((rankSeniority.size() - rankedItem.rank) / rankSeniority.size()) * 100\n      }\n    }\n  }\n  \n  if(binding.hasVariable(\"rankContentCategory\")){\n    def rankContentCategory = binding.getVariable(\"rankContentCategory\")\n    final_chunks.each { item ->\n      def rankedItem = rankContentCategory.find { it.chunk_uuid == item.chunk_uuid }\n      if (rankedItem) {\n        item.scoreContentCategory = ((rankContentCategory.size() - rankedItem.rank) / rankContentCategory.size()) * 100\n      }\n    }\n  }\n  \n  if(binding.hasVariable(\"rankPublicationStatus\")){\n    def rankPublicationStatus = binding.getVariable(\"rankPublicationStatus\")\n    final_chunks.each { item ->\n      def rankedItem = rankPublicationStatus.find { it.chunk_uuid == item.chunk_uuid }\n      if (rankedItem) {\n        item.scorePublicationStatus = ((rankPublicationStatus.size() - rankedItem.rank) / rankPublicationStatus.size()) * 100\n      }\n    }\n  }\n  \n  final_chunks.each { chunk ->\n    chunk.score = (\n      weightExpertiseAreas * chunk.scoreExpertiseAreas +\n      weightSeniority * chunk.scoreSeniority +\n      weightContentCategory * chunk.scoreContentCategory +\n      weightPublicationStatus * chunk.scorePublicationStatus\n    )\n  }\n  \n  boolean allScorersEmpty = !binding.hasVariable(\"rankexpertiseAreas\") && !binding.hasVariable(\"rankSeniority\") && !binding.hasVariable(\"rankContentCategory\") && !binding.hasVariable(\"rankPublicationStatus\")\n  \n  if (!allScorersEmpty) {\n    final_chunks.sort { a, b -> b.score <=> a.score }\n    \n    final_chunks.eachWithIndex { chunk, index ->\n      chunk.rank = index\n    }\n  }\n}\n\nreturn [filteredChunks:final_chunks]",
				"parameters":{
					"rankexpertiseAreas":{
						"source":"{{ G8U7K.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ G8U7K.outputs.chunks[0].chunkMetadata }}",
							"rank":"{{ G8U7K.outputs.chunks[0].rank }}",
							"score":"{{ G8U7K.outputs.chunks[0].score }}",
							"text":"{{ G8U7K.outputs.chunks[0].text }}",
							"chunk_uuid":"{{ G8U7K.outputs.chunks[0].chunk_uuid }}"
						}
					},
					"rankSeniority":{
						"source":"{{ H10k0.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ H10k0.outputs.chunks[0].chunkMetadata }}",
							"rank":"{{ H10k0.outputs.chunks[0].rank }}",
							"score":"{{ H10k0.outputs.chunks[0].score }}",
							"text":"{{ H10k0.outputs.chunks[0].text }}",
							"chunk_uuid":"{{ H10k0.outputs.chunks[0].chunk_uuid }}"
						}
					},
					"rankContentCategory":{
						"source":"{{ WXd1i.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ WXd1i.outputs.chunks[0].chunkMetadata }}",
							"rank":"{{ WXd1i.outputs.chunks[0].rank }}",
							"score":"{{ WXd1i.outputs.chunks[0].score }}",
							"text":"{{ WXd1i.outputs.chunks[0].text }}",
							"chunk_uuid":"{{ WXd1i.outputs.chunks[0].chunk_uuid }}"
						}
					},
					"rankPublicationStatus":{
						"source":"{{ W68aB.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ W68aB.outputs.chunks[0].chunkMetadata }}",
							"rank":"{{ W68aB.outputs.chunks[0].rank }}",
							"score":"{{ W68aB.outputs.chunks[0].score }}",
							"text":"{{ W68aB.outputs.chunks[0].text }}",
							"chunk_uuid":"{{ W68aB.outputs.chunks[0].chunk_uuid }}"
						}
					},
					"chunksList":{
						"source":"{{ UtA9i.outputs.result.filteredChunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ UtA9i.outputs.result.filteredChunks[0].chunkMetadata }}",
							"rank":"{{ UtA9i.outputs.result.filteredChunks[0].rank }}",
							"score":"{{ UtA9i.outputs.result.filteredChunks[0].score }}",
							"text":"{{ UtA9i.outputs.result.filteredChunks[0].text }}",
							"chunk_uuid":"{{ UtA9i.outputs.result.filteredChunks[0].chunk_uuid }}"
						}
					},
					"weightExpertiseAreas":"{{ _Fqzi9.outputs.weightExpertiseAreas }}",
					"weightSeniority":"{{ _Fqzi9.outputs.weightSeniority }}",
					"weightContentCategory":"{{ _Fqzi9.outputs.weightContentCategory }}",
					"weightPublicationStatus":"{{ _Fqzi9.outputs.weightPublicationStatus }}"
				}
			},
			"skip":false,
			"subTitle":"rankChunks",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":50,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"_6zVDo",
			"index":0,
			"inputs":{
				"result":{
					"chunks":{
						"source":"{{ dvxqL.outputs.result.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ dvxqL.outputs.result.chunks[0].chunkMetadata }}",
							"rank":"{{ dvxqL.outputs.result.chunks[0].rank }}",
							"score":"{{ dvxqL.outputs.result.chunks[0].score }}",
							"text":"{{ dvxqL.outputs.result.chunks[0].text }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Tf4WF-1",
			"id":"_eR1Wr",
			"index":0,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		}
	],
	"ownerUserId":465,
	"runtimeConnectionAppNames":[
		"openai"
	],
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"headerValueTierMap":{},
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent",
		"Internal"
	],
	"version":116
}
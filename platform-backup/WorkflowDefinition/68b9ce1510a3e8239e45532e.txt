{
	"appsUsed":[
		"slack"
	],
	"createdTime":1759309046834,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1757311941603,
		"deployedBy":46681,
		"deployedDefinitionId":"68be73c5a58922312b9b02e3",
		"status":"PAUSED",
		"version":2,
		"workflowVersion":6
	},
	"edges":[
		{
			"fromNodeId":"n_wEwuq",
			"priority":0,
			"skip":false,
			"toNodeId":"n_eW8Wy",
			"type":"next"
		},
		{
			"fromNodeId":"n_eW8Wy",
			"priority":0,
			"skip":false,
			"toNodeId":"n_RkWqs",
			"type":"next"
		},
		{
			"fromNodeId":"n_RkWqs",
			"priority":0,
			"skip":false,
			"toNodeId":"n_68BIW",
			"type":"next"
		},
		{
			"fromNodeId":"n_68BIW",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Pj6kD",
			"type":"next"
		},
		{
			"fromNodeId":"n_Pj6kD",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4bsK0",
			"type":"next"
		},
		{
			"fromNodeId":"n_4bsK0",
			"priority":0,
			"skip":false,
			"toNodeId":"n_pkiFg",
			"type":"next"
		},
		{
			"fromNodeId":"n_pkiFg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_n25uO",
			"type":"next"
		},
		{
			"fromNodeId":"n_n25uO",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SNNpu",
			"type":"loop"
		},
		{
			"fromNodeId":"n_SNNpu",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"_RuFlw",
			"type":"next"
		},
		{
			"fromNodeId":"_RuFlw",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ojnxt",
			"type":"next"
		},
		{
			"fromNodeId":"n_ojnxt",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_fWnlt",
			"type":"if"
		},
		{
			"fromNodeId":"n_fWnlt",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SOa4O",
			"type":"next"
		},
		{
			"fromNodeId":"n_ojnxt",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_SOa4O",
			"type":"next"
		},
		{
			"fromNodeId":"n_SOa4O",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DSTRP",
			"type":"next"
		},
		{
			"fromNodeId":"n_DSTRP",
			"priority":0,
			"skip":false,
			"toNodeId":"n_i7l7f",
			"type":"next"
		},
		{
			"fromNodeId":"n_i7l7f",
			"priority":0,
			"skip":false,
			"toNodeId":"n_hDhJJ",
			"type":"loop"
		},
		{
			"fromNodeId":"n_hDhJJ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DwKwi",
			"type":"next"
		},
		{
			"fromNodeId":"n_DwKwi",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"_OGGBj",
			"type":"next"
		},
		{
			"fromNodeId":"_OGGBj",
			"priority":0,
			"skip":false,
			"toNodeId":"_YN7MQ",
			"type":"next"
		},
		{
			"fromNodeId":"_YN7MQ",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_7tKXN",
			"type":"if"
		},
		{
			"fromNodeId":"_7tKXN",
			"priority":0,
			"skip":false,
			"toNodeId":"_DFIRF",
			"type":"next"
		},
		{
			"fromNodeId":"_YN7MQ",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_DFIRF",
			"type":"next"
		},
		{
			"fromNodeId":"_DFIRF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_cBgS2",
			"type":"next"
		},
		{
			"fromNodeId":"n_cBgS2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DGIc9",
			"type":"next"
		},
		{
			"fromNodeId":"n_DGIc9",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_i7l7f",
			"type":"next"
		},
		{
			"fromNodeId":"n_DwKwi",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"n_i7l7f",
			"type":"error"
		},
		{
			"fromNodeId":"n_i7l7f",
			"priority":0,
			"skip":false,
			"toNodeId":"n_f5RDB",
			"type":"next"
		},
		{
			"fromNodeId":"n_f5RDB",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_n25uO",
			"type":"next"
		},
		{
			"fromNodeId":"n_SNNpu",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"n_n25uO",
			"type":"error"
		},
		{
			"fromNodeId":"n_n25uO",
			"priority":0,
			"skip":false,
			"toNodeId":"n_aM3Sk",
			"type":"next"
		},
		{
			"fromNodeId":"n_aM3Sk",
			"priority":0,
			"skip":false,
			"toNodeId":"n_1JiZH",
			"type":"next"
		},
		{
			"fromNodeId":"n_1JiZH",
			"priority":0,
			"skip":false,
			"toNodeId":"n_xnkGu",
			"type":"loop"
		},
		{
			"fromNodeId":"n_xnkGu",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_1JiZH",
			"type":"next"
		},
		{
			"fromNodeId":"n_1JiZH",
			"priority":0,
			"skip":false,
			"toNodeId":"n_348cm",
			"type":"next"
		}
	],
	"id":"68b9ce1510a3e8239e45532e",
	"lastModifiedBy":13,
	"lcName":"amzon bedrock daily usage (qa)",
	"modifiedTime":1759309046834,
	"name":"Amzon Bedrock Daily Usage (QA)",
	"nodes":[
		{
			"context":{
				"appName":"schedule",
				"resourceVersion":120,
				"resourceName":"schedule_default"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_wEwuq",
			"index":1,
			"inputs":{
				"cron":"INTERVAL",
				"sequential":false,
				"timezone":"Asia/Calcutta",
				"interval":1,
				"frequency":"DAYS",
				"triggerAt":"10:05:00"
			},
			"skip":false,
			"subTitle":"Schedule",
			"title":"New recurring event",
			"trigger":{
				"type":"SCHEDULED"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":117,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_eW8Wy",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"connectionId":{
							"type":"string",
							"title":"Connection Id"
						},
						"adminToken":{
							"type":"string",
							"title":"Admin Token"
						},
						"env":{
							"type":"string",
							"title":"Env"
						},
						"count":{
							"type":"integer",
							"title":"Count"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"count":0,
				"connectionId":"683020ca44e4f747c6415668",
				"adminToken":"66732d0f1775b60a2f0f20e0",
				"env":"qa"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"connectionId":{
							"type":"string",
							"title":"Connection Id"
						},
						"adminToken":{
							"type":"string",
							"title":"Admin Token"
						},
						"env":{
							"type":"string",
							"title":"Env"
						},
						"count":{
							"type":"integer",
							"title":"Count"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_RkWqs",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"current":{
							"type":"integer",
							"title":"Current"
						},
						"fiveDaysAgo":{
							"type":"integer",
							"title":"Five Days Ago"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def now = System.currentTimeMillis()\ndef fiveDaysAgo = now - (5L * 24 * 60 * 60 * 1000)\n\nreturn ['current':now,'fiveDaysAgo':fiveDaysAgo]"
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"custom_http_endpoint",
				"resourceVersion":369,
				"resourceName":"custom_http_endpoint_execute",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_68BIW",
			"index":4,
			"inputs":{
				"isAsync":false,
				"enableProxy":false,
				"requestTimeoutInSecs":-1,
				"httpMethod":"POST",
				"body":{
					"test":1
				},
				"connectionType":"DIRECT",
				"sslVerify":false,
				"path":"/admin/customer-management/find-all-customers-info",
				"responseSchema":{
					"type":"object",
					"properties":{
						"hasMore":{
							"type":"boolean",
							"title":"hasMore"
						},
						"objects":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"createdTime":{
										"type":"integer",
										"title":"createdTime"
									},
									"deleted":{
										"type":"boolean",
										"title":"deleted"
									},
									"id":{
										"type":"string",
										"title":"id"
									},
									"lastModifiedBy":{
										"type":"integer",
										"title":"lastModifiedBy"
									},
									"modifiedTime":{
										"type":"integer",
										"title":"modifiedTime"
									},
									"name":{
										"type":"string",
										"title":"name"
									},
									"ownerUserId":{
										"type":"integer",
										"title":"ownerUserId"
									},
									"standard":{
										"type":"boolean",
										"title":"standard"
									},
									"version":{
										"type":"integer",
										"title":"version"
									},
									"grants":{
										"type":"object",
										"properties":{
											"configs":{
												"type":"array",
												"items":{
													"type":"object",
													"properties":{
														"permissions":{
															"type":"array",
															"items":{
																"type":"string"
															},
															"title":"permissions"
														},
														"principalType":{
															"type":"string",
															"title":"principalType"
														}
													},
													"additionalProperties":false
												},
												"title":"configs"
											}
										},
										"title":"grants",
										"additionalProperties":false
									},
									"sourceCustomer":{
										"type":"string",
										"title":"sourceCustomer"
									}
								},
								"additionalProperties":false
							},
							"title":"objects"
						},
						"totalHits":{
							"type":"integer",
							"title":"totalHits"
						},
						"type":{
							"type":"string",
							"title":"type"
						}
					},
					"additionalProperties":false
				},
				"baseUrl":"https://api-platform-global.ext-alb.{{ n_eW8Wy.outputs.env }}.unifyapps.com/api-endpoint",
				"bodySchema":{
					"type":"object",
					"properties":{
						"test":{
							"type":"number",
							"title":"Test"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"responseContentType":"application/json",
				"headersList":[
					{
						"key":"Content-Type",
						"value":"application/json"
					},
					{
						"key":"x-admin-authorization",
						"value":"{{ n_eW8Wy.outputs.adminToken }}"
					}
				],
				"authType":"CUSTOM",
				"requestContentType":"application/json",
				"ignoreTrailingSlashes":false
			},
			"skip":false,
			"subTitle":"Custom HTTP Endpoint",
			"title":"Execute REST request",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.input1.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":807,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_Pj6kD",
			"index":5,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"result":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"key":{
										"type":"string",
										"title":"Key"
									},
									"value":{
										"type":"string",
										"title":"Value"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Result"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"input1":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Input 1"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def list = (binding.hasVariable('input1') && input1) ? input1 : []\n\ndef transformed = list.collect { item ->\n    def copy = [:]\n    copy.putAll(item)  // keep full structure\n    copy.key = item.id\n    copy.value = item.name\n    copy.remove(\"id\")\n    copy.remove(\"name\")\n    return copy\n}\n\nreturn [\"result\": transformed]\n",
				"parameters":{
					"input1":{
						"source":"{{ n_68BIW.outputs.result.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ n_68BIW.outputs.result.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_4bsK0",
			"index":6,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"payload":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Payload"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"since":{
							"type":"integer",
							"title":"Since"
						},
						"until":{
							"type":"integer",
							"title":"Until"
						},
						"connectionId":{
							"type":"string",
							"title":"Connection Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def payload = [\n    group      : \"PLATFORM\",\n    entityType : \"WORKFLOW_NODE_EXECUTION\",\n    projections: [\n        [\n            name                  : \"CURRENT_NODE_CONNECTION_ID\",\n            aggregationFunction   : \"COUNT\",\n            alias                 : \"COUNT\",\n            includePercentageChange: false\n        ],\n        [\n            name                  : \"CURRENT_NODE_APP_NAME\",\n            aggregationFunction   : \"GROUP\",\n            alias                 : \"appName\",\n            includePercentageChange: false\n        ],\n        [\n            name                  : \"WORKFLOW_ID\",\n            aggregationFunction   : \"GROUP\",\n            alias                 : \"workflowId\",\n            includePercentageChange: false\n        ],\n        [\n            name                  : \"CURRENT_NODE_CONNECTION_ID\",\n            aggregationFunction   : \"GROUP\",\n            alias                 : \"connectionId\",\n            includePercentageChange: false\n        ]\n    ],\n    filter     : [\n        values: [\n            [\n                field : \"CURRENT_NODE_APP_NAME\",\n                op    : \"EQUAL\",\n                values: [\"amazon_bedrock\"]\n            ],\n            [\n                field : \"CURRENT_NODE_CONNECTION_ID\",\n                op    : \"EQUAL\",\n                values: [connectionId]\n            ]\n        ],\n        op: \"AND\"\n    ],\n    timeFilter : [\n        since: since,\n        until: until\n    ],\n    sorts      : [\n        [\n            field: \"COUNT\",\n            order: \"DESC\"\n        ]\n    ],\n    page       : [\n        limit: 1000\n    ]\n]\n\nreturn [\"payload\":payload]\n",
				"parameters":{
					"until":"{{ n_RkWqs.outputs.result.current }}",
					"since":"{{ n_RkWqs.outputs.result.fiveDaysAgo }}",
					"connectionId":"{{ n_eW8Wy.outputs.connectionId }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":118,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_pkiFg",
			"index":7,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"finalRes":{
											"type":"array",
											"items":{
												"type":"object",
												"properties":{},
												"additionalProperties":false
											},
											"title":"Final Res"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"List",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"List",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"finalRes":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{},
											"additionalProperties":false
										},
										"title":"Final Res"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":0,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_n25uO",
			"index":8,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_Pj6kD.outputs.result.result }}",
				"captureIterations":true
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"custom_http_endpoint",
				"resourceVersion":0,
				"resourceName":"custom_http_endpoint_execute",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"n_n25uO@_4Xg1j-1@l",
			"id":"n_SNNpu",
			"index":9,
			"inputs":{
				"isAsync":false,
				"enableProxy":false,
				"requestTimeoutInSecs":-1,
				"httpMethod":"POST",
				"body":"{{ n_4bsK0.outputs.result.payload }}",
				"connectionType":"DIRECT",
				"sslVerify":false,
				"path":"/{{ n_n25uO.outputs.item.key }}/query",
				"responseSchema":{
					"type":"object",
					"properties":{
						"hasMore":{
							"type":"boolean",
							"title":"hasMore"
						},
						"metadata":{
							"type":"object",
							"properties":{
								"rowMetadata":{
									"type":"array",
									"items":{
										"type":"object",
										"properties":{
											"columnName":{
												"type":"string",
												"title":"columnName"
											},
											"dataType":{
												"type":"string",
												"title":"dataType"
											}
										},
										"additionalProperties":false
									},
									"title":"rowMetadata"
								}
							},
							"title":"metadata",
							"additionalProperties":false
						},
						"objects":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"appName":{
												"type":"string",
												"title":"appName"
											},
											"connectionId":{
												"type":"string",
												"title":"connectionId"
											},
											"COUNT":{
												"type":"integer",
												"title":"COUNT"
											},
											"workflowId":{
												"type":"string",
												"title":"workflowId"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"objects"
						},
						"type":{
							"type":"string",
							"title":"type"
						}
					},
					"additionalProperties":false
				},
				"baseUrl":"https://api-platform-global.ext-alb.{{ n_eW8Wy.outputs.env }}.unifyapps.com/api-endpoint/admin/reporting",
				"responseContentType":"application/json",
				"headersList":[
					{
						"key":"Content-Type",
						"value":"application/json"
					},
					{
						"key":"x-admin-authorization",
						"value":"{{ n_eW8Wy.outputs.adminToken }}"
					}
				],
				"authType":"CUSTOM",
				"requestContentType":"text/plain",
				"ignoreTrailingSlashes":false
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"global":false
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Custom HTTP Endpoint",
			"title":"Execute REST request",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				},
				"visibleOptionalFields":[
					"root.parameters.input1.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_SNNpu@n_n25uO@_4Xg1j-1@l@success",
			"id":"_RuFlw",
			"index":10,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"size":{
							"type":"integer",
							"title":"Size"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"input1":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Input 1"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def input = (binding.hasVariable('input1') && input1) ? input1 : []\n\nreturn ['size':input.size()]\n",
				"parameters":{
					"input1":{
						"source":"{{ n_SNNpu.outputs.result.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ n_SNNpu.outputs.result.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":117,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_SNNpu@n_n25uO@_4Xg1j-1@l@success",
			"id":"n_ojnxt",
			"index":11,
			"inputs":{
				"filters":[
					{
						"property":"{{ _RuFlw.outputs.result.size }}",
						"filter":{
							"operator":"EQUAL",
							"value":"{{ n_eW8Wy.outputs.count }}"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":117,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ojnxt@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@y",
			"id":"n_fWnlt",
			"index":12,
			"inputs":{
				"loop":"n_n25uO"
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				},
				"visibleOptionalFields":[
					"root.parameters.input1.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_SNNpu@n_n25uO@_4Xg1j-1@l@success",
			"id":"n_SOa4O",
			"index":13,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"ans":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"appName":{
												"type":"string",
												"title":"appName"
											},
											"connectionId":{
												"type":"string",
												"title":"connectionId"
											},
											"COUNT":{
												"type":"integer",
												"title":"COUNT"
											},
											"workflowId":{
												"type":"string",
												"title":"workflowId"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"ans"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"input1":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Input 1"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def input = (binding.hasVariable('input1') && input1) ? input1 : []\n\n// safe sort: use 0 if COUNT is missing/null\ndef sorted = input.sort { -(it.columns.COUNT ?: 0) }\n\n// limit to top 3 (or fewer if input smaller)\ndef limit = Math.min(3, sorted.size())\ndef top3 = sorted[0..<limit]\n\nreturn ['ans': top3]\n",
				"parameters":{
					"input1":{
						"source":"{{ n_SNNpu.outputs.result.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ n_SNNpu.outputs.result.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":118,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_SNNpu@n_n25uO@_4Xg1j-1@l@success",
			"id":"n_DSTRP",
			"index":14,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"connectionId":{
											"type":"string",
											"title":"Connection Id"
										},
										"hitCount":{
											"type":"number",
											"title":"Hit Count"
										},
										"workflowId":{
											"type":"string",
											"title":"Workflow Id"
										},
										"agents":{
											"type":"array",
											"items":{
												"type":"object",
												"properties":{},
												"additionalProperties":false
											},
											"title":"Agents"
										},
										"customerId":{
											"type":"string",
											"title":"Customer Id"
										},
										"customerName":{
											"type":"string",
											"title":"Customer Name"
										},
										"workflowName":{
											"type":"string",
											"title":"Workflow Name"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"List",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"List",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"connectionId":{
										"type":"string",
										"title":"Connection Id"
									},
									"hitCount":{
										"type":"number",
										"title":"Hit Count"
									},
									"workflowId":{
										"type":"string",
										"title":"Workflow Id"
									},
									"agents":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{},
											"additionalProperties":false
										},
										"title":"Agents"
									},
									"customerId":{
										"type":"string",
										"title":"Customer Id"
									},
									"customerName":{
										"type":"string",
										"title":"Customer Name"
									},
									"workflowName":{
										"type":"string",
										"title":"Workflow Name"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":0,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_SNNpu@n_n25uO@_4Xg1j-1@l@success",
			"id":"n_i7l7f",
			"index":15,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_SOa4O.outputs.result.ans }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l",
			"id":"n_hDhJJ",
			"index":16,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"res":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Res"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"since":{
							"type":"number",
							"title":"Since"
						},
						"until":{
							"type":"number",
							"title":"Until"
						},
						"workflowId":{
							"type":"string",
							"title":"Workflow Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"\n\n// build the map\ndef query = [\n    group      : \"PLATFORM\",\n    entityType : \"WORKFLOW_EXECUTION\",\n    projections: [\n        [\n            name                  : \"AI_AGENT_ID\",\n            aggregationFunction   : \"GROUP\",\n            alias                 : \"\",\n            includePercentageChange: false\n        ],\n        [\n            name                  : \"WORKFLOW_ID\",\n            aggregationFunction   : \"COUNT\",\n            alias                 : \"count\",\n            includePercentageChange: false\n        ]\n    ],\n    timeFilter: [\n        since: since,\n        until: until\n    ],\n    filter: [\n        values: [\n            [\n                field : \"WORKFLOW_ID\",\n                op    : \"EQUAL\",\n                values: [workflowId]\n            ],\n            [\n                field : \"STATUS\",\n                op    : \"NOT_EQUAL\",\n                values: [\"FAILED\"]\n            ]\n        ],\n        op: \"AND\"\n    ],\n    page: [\n        limit: 1000\n    ],\n    sorts: [\n        [\n            field: \"count\",\n            order: \"DESC\"\n        ]\n    ]\n]\n\nreturn ['res':query]\n",
				"parameters":{
					"until":"{{ n_RkWqs.outputs.result.current }}",
					"since":"{{ n_RkWqs.outputs.result.fiveDaysAgo }}",
					"workflowId":"{{ n_i7l7f.outputs.item.columns.workflowId }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"custom_http_endpoint",
				"resourceVersion":0,
				"resourceName":"custom_http_endpoint_execute",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l",
			"id":"n_DwKwi",
			"index":17,
			"inputs":{
				"isAsync":false,
				"enableProxy":false,
				"requestTimeoutInSecs":-1,
				"httpMethod":"POST",
				"body":"{{ n_hDhJJ.outputs.result.res }}",
				"connectionType":"DIRECT",
				"sslVerify":false,
				"path":"/{{ n_n25uO.outputs.item.key }}/query",
				"responseSchema":{
					"type":"object",
					"properties":{
						"hasMore":{
							"type":"boolean",
							"title":"hasMore"
						},
						"metadata":{
							"type":"object",
							"properties":{
								"rowMetadata":{
									"type":"array",
									"items":{
										"type":"object",
										"properties":{
											"columnName":{
												"type":"string",
												"title":"columnName"
											},
											"dataType":{
												"type":"string",
												"title":"dataType"
											}
										},
										"additionalProperties":false
									},
									"title":"rowMetadata"
								}
							},
							"title":"metadata",
							"additionalProperties":false
						},
						"objects":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"AI_AGENT_ID":{
												"type":"string",
												"title":"AI_AGENT_ID"
											},
											"count":{
												"type":"integer",
												"title":"count"
											}
										},
										"title":"columns",
										"additionalProperties":false
									}
								},
								"additionalProperties":false
							},
							"title":"objects"
						},
						"type":{
							"type":"string",
							"title":"type"
						}
					},
					"additionalProperties":false
				},
				"baseUrl":"https://api-platform-global.ext-alb.{{ n_eW8Wy.outputs.env }}.unifyapps.com/api-endpoint/admin/reporting",
				"responseContentType":"application/json",
				"headersList":[
					{
						"key":"Content-Type",
						"value":"application/json"
					},
					{
						"key":"x-admin-authorization",
						"value":"{{ n_eW8Wy.outputs.adminToken }}"
					}
				],
				"authType":"CUSTOM",
				"requestContentType":"text/plain",
				"ignoreTrailingSlashes":false
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"global":false
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Custom HTTP Endpoint",
			"title":"Execute REST request",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				},
				"visibleOptionalFields":[
					"root.parameters.input1.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_DwKwi@n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l@success",
			"id":"_OGGBj",
			"index":18,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"size":{
							"type":"integer",
							"title":"Size"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"input1":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Input 1"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def input = (binding.hasVariable('input1') && input1) ? input1 : []\n\nreturn ['size':input.size()]\n",
				"parameters":{
					"input1":{
						"ua:type":"mappedArray",
						"source":"{{ n_DwKwi.outputs.result.objects }}",
						"items":"{{ n_DwKwi.outputs.result.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":117,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_DwKwi@n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l@success",
			"id":"_YN7MQ",
			"index":19,
			"inputs":{
				"filters":[
					{
						"property":"{{ _OGGBj.outputs.result.size }}",
						"filter":{
							"operator":"EQUAL",
							"value":"{{ n_eW8Wy.outputs.count }}"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":117,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YN7MQ@n_DwKwi@n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l@success@y",
			"id":"_7tKXN",
			"index":20,
			"inputs":{
				"loop":"n_i7l7f"
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				},
				"visibleOptionalFields":[
					"root.parameters.input1.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_DwKwi@n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l@success",
			"id":"_DFIRF",
			"index":21,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"ans":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"columns":{
										"type":"object",
										"properties":{
											"AI_AGENT_ID":{
												"type":"string",
												"title":"AI AGENT ID"
											},
											"count":{
												"type":"string",
												"title":"Count"
											}
										},
										"title":"columns",
										"additionalProperties":false,
										"required":[]
									}
								},
								"additionalProperties":false
							},
							"title":"ans"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"input1":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Input 1"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def input = (binding.hasVariable('input1') && input1) ? input1 : []\n\n// include only rows where AI_AGENT_ID is present\ndef filtered = input.findAll { it?.columns?.AI_AGENT_ID }\n\n// safe sort: use 0 if count is missing/null\ndef sorted = filtered.sort { -(it.columns.count ?: 0) }\n\n// limit to top 5 (or fewer if input smaller)\ndef limit = Math.min(5, sorted.size())\ndef top5 = sorted[0..<limit]\n\nreturn ['ans': top5]\n",
				"parameters":{
					"input1":{
						"ua:type":"mappedArray",
						"source":"{{ n_DwKwi.outputs.result.objects }}",
						"items":"{{ n_DwKwi.outputs.result.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"custom_http_endpoint",
				"resourceVersion":2,
				"resourceName":"custom_http_endpoint_execute",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_DwKwi@n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l@success",
			"id":"n_cBgS2",
			"index":22,
			"inputs":{
				"isAsync":false,
				"enableProxy":false,
				"requestTimeoutInSecs":-1,
				"httpMethod":"GET",
				"connectionType":"DIRECT",
				"sslVerify":false,
				"path":"/{{ n_n25uO.outputs.item.key }}/{{ n_i7l7f.outputs.item.columns.workflowId }}",
				"responseSchema":{
					"type":"object",
					"properties":{
						"name":{
							"type":"string",
							"title":"Name"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"baseUrl":"https://api-platform-global.ext-alb.{{ n_eW8Wy.outputs.env }}.unifyapps.com/api-endpoint/admin/workflow-definition",
				"responseContentType":"application/json",
				"headersList":[
					{
						"key":"x-admin-authorization",
						"value":"{{ n_eW8Wy.outputs.adminToken }}"
					}
				],
				"authType":"CUSTOM",
				"requestContentType":"application/json",
				"ignoreTrailingSlashes":false
			},
			"skip":false,
			"subTitle":"Custom HTTP Endpoint",
			"title":"Execute REST request",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemToAdd.agents.items"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":118,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_DwKwi@n_i7l7f@n_SNNpu@n_n25uO@_4Xg1j-1@l@success@l@success",
			"id":"n_DGIc9",
			"index":23,
			"inputs":{
				"itemToAdd":{
					"connectionId":"{{ n_eW8Wy.outputs.connectionId }}",
					"hitCount":"{{ n_i7l7f.outputs.item.columns.COUNT }}",
					"workflowId":"{{ n_i7l7f.outputs.item.columns.workflowId }}",
					"agents":{
						"source":"{{ _DFIRF.outputs.result.ans }}",
						"ua:type":"mappedArray",
						"items":"{{ _DFIRF.outputs.result.ans[0] }}"
					},
					"customerId":"{{ n_n25uO.outputs.item.key }}",
					"customerName":"{{ n_n25uO.outputs.item.value }}",
					"workflowName":"{{ n_cBgS2.outputs.result.name }}"
				},
				"insertLocation":"END",
				"listName":"{{ n_DSTRP.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemToAdd.finalRes.items"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":118,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_SNNpu@n_n25uO@_4Xg1j-1@l@success",
			"id":"n_f5RDB",
			"index":24,
			"inputs":{
				"itemToAdd":{
					"finalRes":{
						"source":"{{ n_DSTRP.outputs.items }}",
						"ua:type":"mappedArray",
						"items":"{{ n_DSTRP.outputs.items[0] }}"
					}
				},
				"insertLocation":"END",
				"listName":"{{ n_pkiFg.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.input1.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":118,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_aM3Sk",
			"index":25,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"res":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"title":{
										"type":"string",
										"title":"Title"
									},
									"message":{
										"type":"string",
										"title":"Message"
									},
									"preText":{
										"type":"string",
										"title":"Pre Text"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Res"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"input1":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Input 1"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def data = (binding.hasVariable('input1') && input1) ? input1 : []\n\ndef results = []\n\ndata.each { entry ->\n    def finalResList = entry.finalRes ?: []\n    if (!finalResList) return\n\n    def customerId = finalResList[0].customerId\n    def customerName = finalResList[0].customerName  \n\n    StringBuilder msg = new StringBuilder()\n    long totalHits = 0\n\n    // Header\n    msg.append(\"Environment: *QA*\\n\")\n    msg.append(\"Customer: *${customerName}* (ID: ${customerId})\\n\\n\".toString())\n\n    finalResList.each { res ->\n        totalHits += (res.hitCount ?: 0)\n        msg.append(\"\\n------------------------------------------------------------------------\\n\\n\")\n        msg.append(\"Workflow: `${res.workflowName}` - `${res.workflowId}`\\n\".toString())\n        msg.append(\"Hits in this workflow: `${res.hitCount}`\\n\".toString())\n\n        if (res.agents) {\n            msg.append(\"AI Agent breakdown:\\n\")\n            res.agents.each { agent ->\n                def id = agent.columns.AI_AGENT_ID\n                def count = agent.columns.count\n                msg.append(\"   AI Agent `${id}` hit this workflow *${count}* times\\n\".toString())\n            }\n        }\n    }\n\n    //  Move total hits summary to top\n    def summary = \"*Total Hits for Customer ${customerId}:* `${totalHits}`\\n\\n\".toString()\n    msg.insert(msg.indexOf(\"\\n\\n\") + 2, summary)\n\n    results << [\n        title  : \"Bedrock Usage | ${customerName} (ID: ${customerId}) | QA\".toString(),\n        preText : \"*Amazon Bedrock Usage Alert of last 5 days* :rocket:\",\n        message: msg.toString()\n    ]\n}\n\nreturn ['res':results]\n",
				"parameters":{
					"input1":{
						"source":"{{ n_pkiFg.outputs.items }}",
						"ua:type":"mappedArray",
						"items":"{{ n_pkiFg.outputs.items[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":117,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_1JiZH",
			"index":26,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_aM3Sk.outputs.result.res }}",
				"captureIterations":true
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"slack",
				"resourceVersion":5641,
				"connectionId":"66a7e9d5d9b2fb0ec5db29f3",
				"resourceName":"slack_post_message_in_channel",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"n_1JiZH@_4Xg1j-1@l",
			"id":"n_xnkGu",
			"index":27,
			"inputs":{
				"link_names":true,
				"messageType":"blocks",
				"Attach":[
					{
						"attachmentsBlock":{
							"fields":[],
							"mrkdwn_in":[
								"text",
								"pretext",
								"fields",
								"footer"
							],
							"color":"#FFD700",
							"title":"{{ n_1JiZH.outputs.item.title }}",
							"text":"{{ n_1JiZH.outputs.item.message }}",
							"pretext":"{{ n_1JiZH.outputs.item.preText }}"
						},
						"attachmentsType":"attachmentBlock",
						"attachmentsButtons":{
							"color":"#FFD700",
							"blocks":[]
						}
					}
				],
				"channel":"C09DG326BS7",
				"mrkdwn":true
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"global":false
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false,
					"slidingWindowType":"COUNT_BASED"
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"unit":"MINUTES",
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Slack",
			"title":"Post message",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_4Xg1j-1",
			"id":"n_348cm",
			"index":28,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		}
	],
	"ownerUserId":13,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"version":6
}
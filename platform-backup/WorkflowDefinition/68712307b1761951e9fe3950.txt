{
	"appsUsed":[
		
	],
	"createdTime":1757060049014,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759243602677,
		"deployedBy":-1,
		"deployedDefinitionId":"68dbed525e003e08cdeb2ffd",
		"status":"DEPLOYED",
		"version":11,
		"workflowVersion":81
	},
	"edges":[
		{
			"fromNodeId":"n_zLnJZ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_nUwPD",
			"type":"next"
		},
		{
			"fromNodeId":"n_nUwPD",
			"priority":0,
			"skip":false,
			"toNodeId":"n_6P1jo",
			"type":"next"
		},
		{
			"fromNodeId":"n_6P1jo",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zMqep",
			"type":"next"
		},
		{
			"fromNodeId":"n_zMqep",
			"priority":0,
			"skip":false,
			"toNodeId":"_312qg",
			"type":"next"
		},
		{
			"fromNodeId":"_312qg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_pTWbE",
			"type":"next"
		},
		{
			"fromNodeId":"n_pTWbE",
			"priority":0,
			"skip":false,
			"toNodeId":"n_sUpLa",
			"type":"next"
		},
		{
			"fromNodeId":"n_sUpLa",
			"priority":0,
			"skip":false,
			"toNodeId":"n_bB7w6",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68712307b1761951e9fe3950",
	"lastModifiedBy":-1,
	"lcName":"[indexing dashboard] fetch downloader cursor specific schedulers",
	"modifiedTime":1759371921685,
	"name":"[Indexing Dashboard] Fetch Downloader Cursor Specific Schedulers",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":445,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"n_zLnJZ",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"schedulerRunInfo":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"url":{
										"type":"string",
										"title":"Url"
									},
									"status":{
										"type":"string",
										"title":"Status"
									},
									"downloadEntities":{
										"type":"integer",
										"title":"Download Entities"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Scheduler Run Info"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"knowledgeId":{
							"type":"string",
							"title":"Knowledge Id"
						},
						"grabberType":{
							"type":"string",
							"title":"Grabber Type"
						},
						"parentEntityId":{
							"type":"string",
							"title":"Parent Entity Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"n_nUwPD",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"domain":{
							"type":"string",
							"title":"Domain"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"domain":"{{ __ENV__.outputs.PlatformDomain }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"domain":{
							"type":"string",
							"title":"Domain"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":443,
				"resourceName":"analytics_by_unifyapps_execute_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"n_6P1jo",
			"index":3,
			"inputs":{
				"outputSchema":{
					"type":"object",
					"properties":{
						"id":{
							"type":"string",
							"title":"Id"
						},
						"status":{
							"type":"string",
							"title":"Status"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"query":"SELECT id, status\nFROM WORKFLOW_EXECUTION\nWHERE workflowId = '6859a7fdff420a0e4ad2c4a3'\n  AND JSON_QUERY(startNodeOutput, '$.parentEntityId') = '{{ n_zLnJZ.outputs.parentEntityId }}'\n  AND JSON_QUERY(startNodeOutput, '$.knowledgeId') = '{{ n_zLnJZ.outputs.knowledgeId }}'\n  AND JSON_QUERY(startNodeOutput, '$.importerParams.downloaderConfig.grabberType') = '{{ n_zLnJZ.outputs.grabberType }}'\nORDER BY startTime DESC;\n",
				"group":"PLATFORM"
			},
			"skip":false,
			"subTitle":"Analytics by UnifyApps",
			"title":"Execute Analytics SQL Query",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.executionIds.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"n_zMqep",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"filter":{
							"type":"string",
							"title":"Filter"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"executionIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Execution Ids"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"ids = []\nif (binding.hasVariable('executionIds')) {\n    ids = executionIds\n}\n\ndef builder = new StringBuilder()\nbuilder.append('(')\n\nfor (int i = 0; i < ids.size(); i++) {\n    def transformedId = ids[i] + '_n_pJ2da'\n    builder.append(\"'\").append(transformedId).append(\"'\")\n    builder.append(', ')\n}\n\nfor (int i = 0; i < ids.size(); i++) {\n    def transformedId = ids[i] + '_n_f9PBL'\n    builder.append(\"'\").append(transformedId).append(\"'\")\n    if (i < ids.size() - 1) {\n        builder.append(', ')\n    }\n}\n\nbuilder.append(')')\n\ndef result = builder.toString()\nreturn [\"filter\": result]",
				"parameters":{
					"executionIds":{
						"ua:type":"mappedArray",
						"items":"{{ n_6P1jo.outputs.objects[0].columns.id }}",
						"source":"{{ n_6P1jo.outputs.objects }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":443,
				"resourceName":"analytics_by_unifyapps_execute_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"_312qg",
			"index":5,
			"inputs":{
				"outputSchema":{
					"type":"object",
					"properties":{
						"executionInstanceId":{
							"type":"string",
							"title":"Execution Instance Id"
						},
						"downloadedEntitiesCount":{
							"type":"string",
							"title":"Downloaded Entities Count"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"query":"SELECT \n  executionInstanceId,\n  JSON_QUERY(outputs, '$.downloadedEntitiesCount') AS downloadedEntitiesCount\nFROM \n  WORKFLOW_NODE_EXECUTION\nWHERE \n  id IN {{ n_zMqep.outputs.result.filter }};\n",
				"group":"PLATFORM"
			},
			"skip":false,
			"subTitle":"Analytics by UnifyApps",
			"title":"Execute Analytics SQL Query",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.statusList.items.id",
					"root.parameters.statusList.items.status",
					"root.parameters.downloadEntitiesList.items.id",
					"root.parameters.downloadEntitiesList.items.downloadEntities"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"n_pTWbE",
			"index":6,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"runInfo":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"Id"
									},
									"status":{
										"type":"string",
										"title":"Status"
									},
									"downloadEntities":{
										"type":"integer",
										"title":"Download Entities"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Run Info"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"statusList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"Id"
									},
									"status":{
										"type":"string",
										"title":"Status"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Status List"
						},
						"downloadEntitiesList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"Id"
									},
									"downloadEntities":{
										"type":"string",
										"title":"Download Entities"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Download Entities List"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def merged = []\n\nif (statusList) {\n    merged = statusList.findAll { it?.id }.collect { statusEntry ->\n        def id = statusEntry.id\n        def status = statusEntry?.status ?: 'UNKNOWN'\n\n        def count = 0\n\n        if(binding.hasVariable('downloadEntitiesList'))\n        {\n            def countEntry = downloadEntitiesList.find { it?.id == id }\n            def countStr = countEntry?.downloadEntities ?: \"0\"\n            count = countStr.isInteger() ? countStr.toInteger() : 0\n        }\n        \n        [\n            id              : id,\n            downloadEntities: count,\n            status          : status\n        ]\n    }\n}\n\nreturn [\"runInfo\": merged]",
				"parameters":{
					"statusList":{
						"source":"{{ n_6P1jo.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":{
							"status":"{{ n_6P1jo.outputs.objects[0].columns.status }}",
							"id":"{{ n_6P1jo.outputs.objects[0].columns.id }}"
						}
					},
					"downloadEntitiesList":{
						"source":"{{ _312qg.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":{
							"id":"{{ _312qg.outputs.objects[0].columns.executionInstanceId }}",
							"downloadEntities":"{{ _312qg.outputs.objects[0].columns.downloadedEntitiesCount }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.runsInfo.items.id",
					"root.parameters.runsInfo.items.status",
					"root.parameters.runsInfo.items.downloadEntities"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"n_sUpLa",
			"index":7,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"schedulerRunInfo":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"url":{
										"type":"string",
										"title":"Url"
									},
									"status":{
										"type":"string",
										"title":"Status"
									},
									"downloadEntities":{
										"type":"integer",
										"title":"Download Entities"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Scheduler Run Info"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"runsInfo":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"Id"
									},
									"status":{
										"type":"string",
										"title":"Status"
									},
									"downloadEntities":{
										"type":"integer",
										"title":"Download Entities"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Runs Info"
						},
						"domain":{
							"type":"string",
							"title":"Domain"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def schedulerRunInfo = []\nif(binding.hasVariable('runsInfo')) {\n   for(run in runsInfo) {\n      def url = \"https://\" + domain + \"/p/0/automations/6859a7fdff420a0e4ad2c4a3\" + \"/runs/\" + run.id\n      schedulerRunInfo.add([\"url\":url, \"status\": run.status, \"downloadEntities\": run.downloadEntities])\n   }\n}\n\nreturn [\"schedulerRunInfo\": schedulerRunInfo]",
				"parameters":{
					"runsInfo":{
						"ua:type":"mappedArray",
						"items":{
							"status":"{{ n_pTWbE.outputs.result.runInfo[0].status }}",
							"downloadEntities":"{{ n_pTWbE.outputs.result.runInfo[0].downloadEntities }}",
							"id":"{{ n_pTWbE.outputs.result.runInfo[0].id }}"
						},
						"source":"{{ n_pTWbE.outputs.result.runInfo }}"
					},
					"domain":"{{ n_nUwPD.outputs.domain }}"
				}
			},
			"skip":false,
			"subTitle":"Create schedulerRunInfo - RunLink + Status",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_f055c-1",
			"id":"n_bB7w6",
			"index":8,
			"inputs":{
				"result":{
					"schedulerRunInfo":{
						"ua:type":"mappedArray",
						"items":{
							"url":"{{ n_sUpLa.outputs.result.schedulerRunInfo[0].url }}",
							"status":"{{ n_sUpLa.outputs.result.schedulerRunInfo[0].status }}",
							"downloadEntities":"{{ n_sUpLa.outputs.result.schedulerRunInfo[0].downloadEntities }}"
						},
						"source":"{{ n_sUpLa.outputs.result.schedulerRunInfo }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":44104,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":false,
		"enableRunLogging":false,
		"enableVariableLogging":false,
		"route":{
			"default":false,
			"headerValueTierMap":{},
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":82
}
{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1753185932366,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759243591309,
		"deployedBy":-1,
		"deployedDefinitionId":"68dbed479213d707c2d273f1",
		"status":"DEPLOYED",
		"version":30,
		"workflowVersion":49
	},
	"edges":[
		{
			"fromNodeId":"od8bl",
			"priority":0,
			"skip":false,
			"toNodeId":"RckcQ",
			"type":"next"
		},
		{
			"fromNodeId":"RckcQ",
			"priority":0,
			"skip":false,
			"toNodeId":"QP16Q",
			"type":"next"
		},
		{
			"fromNodeId":"QP16Q",
			"priority":0,
			"skip":false,
			"toNodeId":"n7DBj",
			"type":"next"
		},
		{
			"fromNodeId":"n7DBj",
			"priority":0,
			"skip":false,
			"toNodeId":"In9h9",
			"type":"next"
		},
		{
			"fromNodeId":"In9h9",
			"priority":0,
			"skip":false,
			"toNodeId":"n_vev61",
			"type":"next"
		},
		{
			"fromNodeId":"n_vev61",
			"priority":0,
			"skip":false,
			"toNodeId":"Tooqh",
			"type":"next"
		},
		{
			"fromNodeId":"Tooqh",
			"priority":0,
			"skip":false,
			"toNodeId":"RF77P",
			"type":"next"
		},
		{
			"fromNodeId":"RF77P",
			"priority":0,
			"skip":false,
			"toNodeId":"MFwMy",
			"type":"next"
		},
		{
			"fromNodeId":"MFwMy",
			"priority":0,
			"skip":false,
			"toNodeId":"aoQxH",
			"type":"next"
		},
		{
			"fromNodeId":"aoQxH",
			"priority":0,
			"skip":false,
			"toNodeId":"whOJc",
			"type":"next"
		},
		{
			"fromNodeId":"whOJc",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"8GW17",
			"type":"if"
		},
		{
			"fromNodeId":"8GW17",
			"priority":0,
			"skip":false,
			"toNodeId":"n_GycoH",
			"type":"next"
		},
		{
			"fromNodeId":"n_GycoH",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Kyv53",
			"type":"next"
		},
		{
			"fromNodeId":"n_Kyv53",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_mLWwI",
			"type":"if"
		},
		{
			"fromNodeId":"n_mLWwI",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"rc5xO",
			"type":"if"
		},
		{
			"fromNodeId":"rc5xO",
			"priority":0,
			"skip":false,
			"toNodeId":"1GZhm",
			"type":"next"
		},
		{
			"fromNodeId":"1GZhm",
			"priority":0,
			"skip":false,
			"toNodeId":"n_NaLB1",
			"type":"next"
		},
		{
			"fromNodeId":"n_mLWwI",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wQ0su",
			"type":"next"
		},
		{
			"fromNodeId":"n_NaLB1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_XM3pu",
			"type":"next"
		},
		{
			"fromNodeId":"n_wQ0su",
			"priority":0,
			"skip":false,
			"toNodeId":"n_XM3pu",
			"type":"next"
		},
		{
			"fromNodeId":"n_XM3pu",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_GDS5y",
			"type":"if"
		},
		{
			"fromNodeId":"n_GDS5y",
			"priority":0,
			"skip":false,
			"toNodeId":"n_GCBxT",
			"type":"next"
		},
		{
			"fromNodeId":"n_GCBxT",
			"priority":0,
			"skip":false,
			"toNodeId":"n_hy0Q2",
			"type":"loop"
		},
		{
			"fromNodeId":"n_hy0Q2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zJeMS",
			"type":"next"
		},
		{
			"fromNodeId":"n_zJeMS",
			"priority":0,
			"skip":false,
			"toNodeId":"n_1Lv0S",
			"type":"next"
		},
		{
			"fromNodeId":"n_1Lv0S",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_GCBxT",
			"type":"next"
		},
		{
			"fromNodeId":"n_GCBxT",
			"priority":0,
			"skip":false,
			"toNodeId":"n_iSpSU",
			"type":"next"
		},
		{
			"fromNodeId":"n_iSpSU",
			"priority":0,
			"skip":false,
			"toNodeId":"n_9Jm8I",
			"type":"next"
		},
		{
			"fromNodeId":"n_9Jm8I",
			"priority":0,
			"skip":false,
			"toNodeId":"_R1dmZ",
			"type":"loop"
		},
		{
			"fromNodeId":"_R1dmZ",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_h3gkh",
			"type":"if"
		},
		{
			"fromNodeId":"_h3gkh",
			"priority":0,
			"skip":false,
			"toNodeId":"_gChqd",
			"type":"next"
		},
		{
			"fromNodeId":"_R1dmZ",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_gChqd",
			"type":"next"
		},
		{
			"fromNodeId":"_gChqd",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_9Jm8I",
			"type":"next"
		},
		{
			"fromNodeId":"n_Kyv53",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"mRevl",
			"type":"next"
		},
		{
			"fromNodeId":"mRevl",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"NApos",
			"type":"if"
		},
		{
			"fromNodeId":"NApos",
			"priority":0,
			"skip":false,
			"toNodeId":"1VCbt",
			"type":"next"
		},
		{
			"fromNodeId":"1VCbt",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"Rp3Er",
			"type":"if"
		},
		{
			"fromNodeId":"Rp3Er",
			"priority":0,
			"skip":false,
			"toNodeId":"GbxJx",
			"type":"next"
		},
		{
			"fromNodeId":"1VCbt",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"GbxJx",
			"type":"next"
		},
		{
			"fromNodeId":"n_9Jm8I",
			"priority":0,
			"skip":false,
			"toNodeId":"IMlgB",
			"type":"next"
		},
		{
			"fromNodeId":"n_XM3pu",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"IMlgB",
			"type":"next"
		},
		{
			"fromNodeId":"GbxJx",
			"priority":0,
			"skip":false,
			"toNodeId":"IMlgB",
			"type":"next"
		},
		{
			"fromNodeId":"mRevl",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"IMlgB",
			"type":"next"
		},
		{
			"fromNodeId":"IMlgB",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"FIysl",
			"type":"if"
		},
		{
			"fromNodeId":"FIysl",
			"priority":0,
			"skip":false,
			"toNodeId":"KYLEz",
			"type":"next"
		},
		{
			"fromNodeId":"KYLEz",
			"priority":0,
			"skip":false,
			"toNodeId":"yFOAe",
			"type":"next"
		},
		{
			"fromNodeId":"whOJc",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"xuo80",
			"type":"next"
		},
		{
			"fromNodeId":"xuo80",
			"priority":0,
			"skip":false,
			"toNodeId":"WgrTj",
			"type":"next"
		},
		{
			"fromNodeId":"yFOAe",
			"priority":0,
			"skip":false,
			"toNodeId":"4Ssfa",
			"type":"next"
		},
		{
			"fromNodeId":"IMlgB",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"4Ssfa",
			"type":"next"
		},
		{
			"fromNodeId":"WgrTj",
			"priority":0,
			"skip":false,
			"toNodeId":"4Ssfa",
			"type":"next"
		},
		{
			"fromNodeId":"4Ssfa",
			"priority":0,
			"skip":false,
			"toNodeId":"Ye3ke",
			"type":"next"
		},
		{
			"fromNodeId":"Ye3ke",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"jdaMx",
			"type":"if"
		},
		{
			"fromNodeId":"jdaMx",
			"priority":0,
			"skip":false,
			"toNodeId":"B322J",
			"type":"next"
		},
		{
			"fromNodeId":"B322J",
			"priority":0,
			"skip":false,
			"toNodeId":"7IAtb",
			"type":"next"
		},
		{
			"fromNodeId":"7IAtb",
			"priority":0,
			"skip":false,
			"toNodeId":"cHTU1",
			"type":"next"
		},
		{
			"fromNodeId":"Ye3ke",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"cHTU1",
			"type":"next"
		},
		{
			"fromNodeId":"cHTU1",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"sWJ66",
			"type":"if"
		},
		{
			"fromNodeId":"sWJ66",
			"priority":0,
			"skip":false,
			"toNodeId":"hxtR4",
			"type":"next"
		},
		{
			"fromNodeId":"cHTU1",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"hxtR4",
			"type":"next"
		},
		{
			"fromNodeId":"hxtR4",
			"priority":0,
			"skip":false,
			"toNodeId":"R73tS",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"687269502bebc94b17800755",
	"lastModifiedBy":-1,
	"lcName":"[strands] agent executor",
	"modifiedTime":1759371910845,
	"name":"[Strands] Agent Executor",
	"nodes":[
		{
			"additional":{
				"xsdSchemaConfig":{
					"root.result":{}
				}
			},
			"context":{
				"appName":"callables",
				"resourceVersion":7,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"od8bl",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"success":{
							"type":"string",
							"title":"Success"
						}
					},
					"additionalProperties":false,
					"required":[
						"success"
					]
				},
				"setup":{
					"type":"object",
					"properties":{
						"caseId":{
							"type":"string",
							"title":"caseId"
						},
						"task":{
							"type":"string",
							"title":"Task"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						},
						"instructionsToAppend":{
							"type":"string",
							"title":"Instructions To Append"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":299,
				"resourceName":"variable_by_unifyapps_get_session_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"RckcQ",
			"index":2,
			"inputs":{
				"variableSchema":{
					"type":"object",
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable",
			"title":"Get Session Variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":7,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"QP16Q",
			"index":3,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"errorFeedback":{
							"type":"string",
							"title":"Error Feedback"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"errorFeedback":{
							"type":"string",
							"title":"Error Feedback"
						},
						"_ua_variableDetails":{
							"items":{
								"type":"object",
								"properties":{
									"dataType":{
										"type":"string",
										"description":"Data type of the variable"
									},
									"name":{
										"type":"string",
										"description":"Name of the variable"
									},
									"description":{
										"type":"string",
										"description":"Description of the variable"
									}
								}
							},
							"type":"array",
							"title":"Variable Details"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"messageId",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":436,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"n7DBj",
			"index":4,
			"inputs":{
				"recordId":"{{ od8bl.outputs.caseId }}",
				"writeThroughSessionVariables":true,
				"object_type":"e_ai_agent_conversation_state",
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.agentTriggeredCount",
						"actionType":"INCREMENT",
						"setValue":"1"
					}
				]
			},
			"skip":false,
			"subTitle":"inc Trigger Count",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":11,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"In9h9",
			"index":5,
			"inputs":{
				"automationId":"687799318b70b33944b7c6af",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ od8bl.outputs.caseId }}",
					"agentId":"{{ od8bl.outputs.aiAgentId }}",
					"task":"{{ od8bl.outputs.task }}",
					"instructionsToAppend":"{{ od8bl.outputs.instructionsToAppend }}"
				}
			},
			"skip":false,
			"subTitle":"prompt builder",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.messages.source",
					"root.parameters.messages.ua:type",
					"root.parameters.messages.items.content.source",
					"root.parameters.messages.items.content.ua:type",
					"root.parameters.messages.items.role"
				]
			},
			"context":{
				"appName":"callables",
				"resourceVersion":460,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"n_vev61",
			"index":6,
			"inputs":{
				"automationId":"687202f0d82a871083d2f7b6",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"messages":{
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"source":"{{ In9h9.outputs.messages[0].content }}",
								"ua:type":"mappedArray",
								"items":"{{ In9h9.outputs.messages[0].content[0] }}"
							},
							"role":"{{ In9h9.outputs.messages[0].role }}"
						},
						"source":"{{ In9h9.outputs.messages }}"
					}
				}
			},
			"skip":false,
			"subTitle":"CleanOrphanedTool",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.message.source",
					"root.parameters.message.ua:type",
					"root.parameters.message.items.role",
					"root.parameters.message.items.content.source",
					"root.parameters.message.items.content.ua:type",
					"root.parameters.message.items.content.items.type",
					"root.parameters.message.items.content.items.text"
				]
			},
			"context":{
				"appName":"callables",
				"resourceVersion":11,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"Tooqh",
			"index":7,
			"inputs":{
				"automationId":"6851442f9e30586f552a6d73",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ od8bl.outputs.caseId }}",
					"message":{
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"ua:type":"mappedArray",
								"source":"{{ n_vev61.outputs.messages[0].content }}",
								"items":"{{ n_vev61.outputs.messages[0].content[0] }}"
							},
							"role":"{{ n_vev61.outputs.messages[0].role }}"
						},
						"source":"{{ n_vev61.outputs.messages }}"
					},
					"systemPrompt":"{{ In9h9.outputs.systemPrompt }}",
					"tools":{
						"source":"{{ In9h9.outputs.availableTools }}",
						"ua:type":"mappedArray",
						"items":{
							"type":"function",
							"function":{
								"name":"{{ In9h9.outputs.availableTools[0].name }}",
								"description":"{{ In9h9.outputs.availableTools[0].description }}",
								"parameters":"{{ In9h9.outputs.availableTools[0].toolInputSchema }}"
							}
						}
					},
					"modelId":"{{ In9h9.outputs.modelId }}",
					"responseFormat":{
						"type":"{{ In9h9.outputs.response_format_type }}"
					},
					"stream":"{{ In9h9.outputs.stream }}",
					"messageId":"{{ RckcQ.outputs.messageId }}",
					"step":"Agent Execution",
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}"
				}
			},
			"skip":false,
			"subTitle":"llm",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"xsdSchemaConfig":{}
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":299,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"RF77P",
			"index":8,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"step":{
							"type":"string",
							"title":"step"
						},
						"caseId":{
							"type":"string",
							"title":"caseId"
						},
						"modelId":{
							"type":"string",
							"title":"modelId"
						},
						"inputTokenCost":{
							"type":"number",
							"title":"inputTokenCost"
						},
						"outputTokenCost":{
							"type":"number",
							"title":"outputTokenCost"
						},
						"inputTokens":{
							"type":"integer",
							"title":"inputTokens"
						},
						"outputTokens":{
							"type":"integer",
							"title":"outputTokens"
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"messageId":{
							"type":"string",
							"title":"Message Id"
						}
					},
					"additionalProperties":false,
					"$comment":"agentReporting",
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"step":{
							"type":"string",
							"title":"step"
						},
						"caseId":{
							"type":"string",
							"title":"caseId"
						},
						"modelId":{
							"type":"string",
							"title":"modelId"
						},
						"inputTokenCost":{
							"type":"number",
							"title":"inputTokenCost"
						},
						"outputTokenCost":{
							"type":"number",
							"title":"outputTokenCost"
						},
						"inputTokens":{
							"type":"integer",
							"title":"inputTokens"
						},
						"outputTokens":{
							"type":"integer",
							"title":"outputTokens"
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"messageId":{
							"type":"string",
							"title":"Message Id"
						}
					},
					"additionalProperties":false,
					"$comment":"agentReporting",
					"required":[]
				},
				"compile_static":true,
				"code":"Map<String, Object> result = [:]\n\nString step = binding.hasVariable(\"step\") ? (binding.getVariable(\"step\") != null ? binding.getVariable(\"step\").toString() : \"\") : \"\"\nString modelId = binding.hasVariable(\"modelId\") ? (binding.getVariable(\"modelId\") != null ? binding.getVariable(\"modelId\").toString() : \"e_ai_agent_bedrock_default_model\") : \"e_ai_agent_bedrock_default_model\"\n\nInteger inputTokenCost = binding.hasVariable(\"inputTokenCost\") ? (binding.getVariable(\"inputTokenCost\") != null ? ((Number) binding.getVariable(\"inputTokenCost\")).intValue() : 0) : 0\nInteger outputTokenCost = binding.hasVariable(\"outputTokenCost\") ? (binding.getVariable(\"outputTokenCost\") != null ? ((Number) binding.getVariable(\"outputTokenCost\")).intValue() : 0) : 0\n\nInteger inputTokens = binding.hasVariable(\"inputTokens\") ? (binding.getVariable(\"inputTokens\") != null ? ((Number) binding.getVariable(\"inputTokens\")).intValue() : 0) : 0\nInteger outputTokens = binding.hasVariable(\"outputTokens\") ? (binding.getVariable(\"outputTokens\") != null ? ((Number) binding.getVariable(\"outputTokens\")).intValue() : 0) : 0\n\nString aiAgentId = binding.hasVariable(\"aiAgentId\") ? (binding.getVariable(\"aiAgentId\") != null ? binding.getVariable(\"aiAgentId\").toString() : \"\") : \"\"\nString caseId = binding.hasVariable(\"caseId\") ? (binding.getVariable(\"caseId\") != null ? binding.getVariable(\"caseId\").toString() : \"\") : \"\"\nString messageId = binding.hasVariable(\"messageId\") ? (binding.getVariable(\"messageId\") != null ? binding.getVariable(\"messageId\").toString() : \"\") : \"\"\n\nreturn [\n    step           : step,\n    modelId        : modelId,\n    inputTokenCost : inputTokenCost,\n    outputTokenCost: outputTokenCost,\n    inputTokens    : inputTokens,\n    outputTokens   : outputTokens,\n    aiAgentId      : aiAgentId,\n    caseId         : caseId,\n    messageId      : messageId\n]\n",
				"parameters":{
					"modelId":"{{ In9h9.outputs.modelId }}",
					"inputTokens":"{{ Tooqh.outputs.inputTokens }}",
					"outputTokens":"{{ Tooqh.outputs.outputTokens }}",
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}",
					"caseId":"{{ od8bl.outputs.caseId }}",
					"step":"{{ od8bl.outputs.task }}",
					"messageId":"{{ RckcQ.outputs.messageId }}",
					"outputTokenCost":"{{ Tooqh.outputs.outputTokensCost }}",
					"inputTokenCost":"{{ Tooqh.outputs.inputTokensCost }}"
				}
			},
			"skip":false,
			"subTitle":"capture Reporting",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":165,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"MFwMy",
			"index":9,
			"inputs":{
				"automationId":"678511ee5384a9541846fcee",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"llmResponse":"{{ Tooqh.outputs.llmResponse }}",
					"caseId":"{{ od8bl.outputs.caseId }}",
					"availableTools":{
						"ua:type":"mappedArray",
						"source":"{{ In9h9.outputs.availableTools }}",
						"items":"{{ In9h9.outputs.availableTools[0] }}"
					},
					"toolsToExectue":{
						"ua:type":"mappedArray",
						"items":{
							"name":"{{ Tooqh.outputs.tools[0].name }}",
							"arguments":"{{ Tooqh.outputs.tools[0].arguments }}",
							"toolId":"{{ Tooqh.outputs.tools[0].toolId }}"
						},
						"source":"{{ Tooqh.outputs.tools }}"
					},
					"agentId":"{{ od8bl.outputs.aiAgentId }}",
					"modelId":"{{ In9h9.outputs.modelId }}",
					"errorMessage":"{{ Tooqh.outputs.errorMessage }}"
				}
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false
				},
				"logConfig":{
					"enabled":false
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false
				}
			},
			"skip":false,
			"subTitle":"Validate And Clean LLM response_guardrail",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":11,
				"resourceName":"storage_by_unifyapps_update_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"aoQxH",
			"index":10,
			"inputs":{
				"numberOfRecordsToUpdate":"SINGLE",
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_caseId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ od8bl.outputs.caseId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"debug_agent",
				"updateFields":[
					{
						"fieldName":"properties.events",
						"actionType":"ADD",
						"setValue":"=CONCATENATE(IF(ISBLANK({{ MFwMy.outputs.toolName }}),IF(ISBLANK({{ MFwMy.outputs.errorMessage }}),\"Final Answer Received\", CONCATENATE(\"Format Error\")), CONCATENATE(\"Tool:\" ,{{ MFwMy.outputs.toolName }})), \"->\", {{ __RUN__.outputs.executionId }})"
					}
				],
				"skipIfEmpty":false,
				"page":{
					"offset":0,
					"limit":20
				}
			},
			"skip":true,
			"subTitle":"debug Agent",
			"title":"Update records by query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":153,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"whOJc",
			"index":11,
			"inputs":{
				"filters":[
					{
						"property":"{{ MFwMy.outputs.errorMessage }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Execute ?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":168,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"whOJc@AdoDF-1@y",
			"id":"8GW17",
			"index":12,
			"inputs":{
				"automationId":"67deb8826ff2a8770508424b",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"publishThought":"{{ MFwMy.outputs.publishThought }}",
					"thought":"{{ MFwMy.outputs.thought }}",
					"finalAnswer":"{{ MFwMy.outputs.finalAnswer }}",
					"toolId":"{{ MFwMy.outputs.toolId }}",
					"caseId":"{{ od8bl.outputs.caseId }}",
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}",
					"thinkingSignature":"{{ Tooqh.outputs.thinkingSignature }}"
				}
			},
			"skip":false,
			"subTitle":"Publish LLM Response",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":452,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"whOJc@AdoDF-1@y",
			"id":"n_GycoH",
			"index":13,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"publishMessageId":{
							"type":"string",
							"title":"Publish Message Id"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"publishMessageId":"{{ 8GW17.outputs.messageId }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"publishMessageId":{
							"type":"string",
							"title":"Publish Message Id"
						},
						"_ua_variableDetails":{
							"items":{
								"type":"object",
								"properties":{
									"dataType":{
										"type":"string",
										"description":"Data type of the variable"
									},
									"name":{
										"type":"string",
										"description":"Name of the variable"
									},
									"description":{
										"type":"string",
										"description":"Description of the variable"
									}
								}
							},
							"type":"array",
							"title":"Variable Details"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":437,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"whOJc@AdoDF-1@y",
			"id":"n_Kyv53",
			"index":14,
			"inputs":{
				"filters":[
					{
						"property":"{{ Tooqh.outputs.parallelToolCallEnabled }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"parallelToolCallEnabled?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":437,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Kyv53@whOJc@AdoDF-1@y@y",
			"id":"n_mLWwI",
			"index":15,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_GycoH.outputs.publishMessageId }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_mLWwI@n_Kyv53@whOJc@AdoDF-1@y@y@y",
			"id":"rc5xO",
			"index":16,
			"inputs":{
				"object_type":"service_hub_case",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"id":"{{ od8bl.outputs.caseId }}",
				"readThroughSessionVariables":true
			},
			"skip":false,
			"subTitle":"case",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.record.cc.items.name",
					"root.record.cc.items.email",
					"root.record.bcc.items.name",
					"root.record.bcc.items.email",
					"root.record.content.text",
					"root.record.content.type",
					"root.record.content.html",
					"root.record.content.choices.items",
					"root.record.content.coPilotBlocks.blocks.items",
					"root.record.content.coPilotBlocks.role",
					"root.record.content.choiceList.items.id",
					"root.record.content.choiceList.items.title",
					"root.record.content.choiceList.items.url",
					"root.record.content.interfaceDetails.interfaceId",
					"root.record.content.interfaceDetails.pageId",
					"root.record.content.interfaceDetails.slug",
					"root.record.content.interfaceDetails.pageInputs",
					"root.record.content.agentResponse.toolUseDetails.toolId",
					"root.record.content.agentResponse.toolUseDetails.toolName",
					"root.record.content.agentResponse.toolUseDetails.toolInput",
					"root.record.content.agentResponse.toolUseDetails.toolOutput",
					"root.record.content.agentResponse.rawLLMResponse",
					"root.record.to.items.name",
					"root.record.to.items.email",
					"root.record.feedback.userFeedback",
					"root.record.feedback.feedbackCategories.items",
					"root.record.feedback.reaction",
					"root.record.additional.rephrasedUserMessage",
					"root.record.additional.sqlQuery",
					"root.record.additional.platformUserId",
					"root.record.additional.temporaryMessage",
					"root.record.additional.internalMessageType",
					"root.record.content.agentResponse.observation",
					"root.record.content.interfaceDetails.interfaceDescription",
					"root.record.content.agentResponse.toolUseDetails.toolResponseTime",
					"root.record.additional.streamingInProgress",
					"root.record.additional.ttsDetails.fileUrl",
					"root.record.additional.parentMessageId",
					"root.record.content.agentResponse.toolUseDetails.toolExecutionStatus",
					"root.record.additional.parallelToolCallEnabled"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":54,
				"resourceName":"storage_by_unifyapps_create_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_mLWwI@n_Kyv53@whOJc@AdoDF-1@y@y@y",
			"id":"1GZhm",
			"index":17,
			"inputs":{
				"writeThroughSessionVariables":false,
				"object_type":"service_hub_message",
				"record":{
					"additional":{
						"parallelToolCallEnabled":"{{ Tooqh.outputs.parallelToolCallEnabled }}",
						"internalMessageType":"THOUGHT",
						"parentMessageId":"{{ rc5xO.outputs.properties.lastFanMessageId }}",
						"temporaryMessage":true
					},
					"accountId":"{{ __RUN__.outputs.executionId }}",
					"channelName":"{{ rc5xO.outputs.properties.channelName }}",
					"uniqueId":"{{ __RUN__.outputs.executionId }}",
					"toCustomerUserId":"{{ rc5xO.outputs.properties.fromCustomerUserId }}",
					"toCustomerUserIdentityId":"{{ rc5xO.outputs.properties.fromCustomerUserId }}",
					"messageId":"{{ __RUN__.outputs.executionId }}",
					"fromCustomerUserId":"{{ od8bl.outputs.aiAgentId }}",
					"type":"bot",
					"fromCustomerUserIdentityId":"{{ od8bl.outputs.aiAgentId }}",
					"caseId":"{{ od8bl.outputs.caseId }}"
				}
			},
			"skip":false,
			"subTitle":"create",
			"title":"Create record",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":445,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_mLWwI@n_Kyv53@whOJc@AdoDF-1@y@y@y",
			"id":"n_NaLB1",
			"index":18,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_GycoH.outputs.publishMessageId }}",
						"value":"{{ 1GZhm.outputs.id }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":438,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_mLWwI@n_Kyv53@whOJc@AdoDF-1@y@y@n",
			"id":"n_wQ0su",
			"index":19,
			"inputs":{
				"recordId":"{{ n_GycoH.outputs.publishMessageId }}",
				"writeThroughSessionVariables":false,
				"object_type":"service_hub_message",
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.additional.parallelToolCallEnabled",
						"actionType":"SET",
						"setValue":"{{ Tooqh.outputs.parallelToolCallEnabled }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":437,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Kyv53@whOJc@AdoDF-1@y@y",
			"id":"n_XM3pu",
			"index":20,
			"inputs":{
				"filters":[
					{
						"property":"=LEN({{ MFwMy.outputs.tools }})",
						"filter":{
							"operator":"GT",
							"value":"0"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y",
			"id":"n_GDS5y",
			"index":21,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"signals",
				"ua:list_type":"STRING"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"signals",
							"disableActions":true,
							"items":{
								"type":"string"
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":453,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y",
			"id":"n_GCBxT",
			"index":22,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ MFwMy.outputs.tools }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_GCBxT@n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y@l",
			"id":"n_hy0Q2",
			"index":23,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"signalId":{
							"type":"string",
							"title":"Signal Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def uuid = UUID.randomUUID().toString()\nreturn [\"signalId\": uuid]"
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":458,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_GCBxT@n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y@l",
			"id":"n_zJeMS",
			"index":24,
			"inputs":{
				"automationId":"6852a59b0904f36d18970206",
				"runtimeConnections":{},
				"synchronous":false,
				"triggerWorkflowWithRuntimeType":"IN_MEMORY",
				"version":"-1",
				"parameters":{
					"toolId":"{{ n_GCBxT.outputs.item.toolId }}",
					"toolInputs":"{{ n_GCBxT.outputs.item.toolInputs }}",
					"toolName":"{{ n_GCBxT.outputs.item.toolName }}",
					"thought":"{{ MFwMy.outputs.thought }}",
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}",
					"caseId":"{{ od8bl.outputs.caseId }}",
					"llmResponse":"{{ Tooqh.outputs.llmResponse }}",
					"executeUsingModel":"{{ In9h9.outputs.modelId }}",
					"signalProperties":{
						"waitingInstanceId":"{{ __RUN__.outputs.executionId }}",
						"waitingInstanceRunTimeType":"{{ __RUN__.outputs.workflowRunTimeType }}",
						"signalId":"{{ n_hy0Q2.outputs.result.signalId }}"
					},
					"parallelToolCallEnabled":"{{ Tooqh.outputs.parallelToolCallEnabled }}",
					"messageId":"{{ n_GycoH.outputs.publishMessageId }}",
					"actionId":"{{ n_GCBxT.outputs.item.actionId }}",
					"toolAdditional":"{{ n_GCBxT.outputs.item.toolAdditional }}"
				}
			},
			"skip":false,
			"subTitle":"Execute Tool (Signal Wrapper)",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_GCBxT@n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y@l",
			"id":"n_1Lv0S",
			"index":25,
			"inputs":{
				"itemToAdd":"{{ n_hy0Q2.outputs.result.signalId }}",
				"insertLocation":"END",
				"listName":"{{ n_GDS5y.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"signals_by_unifyapps",
				"resourceVersion":443,
				"resourceName":"signals_by_unifyapps_wait_for_signals",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y",
			"id":"n_iSpSU",
			"index":26,
			"inputs":{
				"duration":1,
				"unit":"HOURS",
				"signal_ids":{
					"source":"{{ n_GDS5y.outputs.items }}",
					"ua:type":"mappedArray",
					"items":"{{ n_GDS5y.outputs.items[0] }}"
				},
				"signal_payload":{
					"type":"object",
					"properties":{
						"messageId":{
							"type":"string",
							"title":"messageId"
						},
						"success":{
							"type":"boolean",
							"title":"success"
						},
						"errorFeedback":{
							"type":"string",
							"title":"errorFeedback"
						},
						"toolName":{
							"type":"string",
							"title":"Tool Name"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Signals by UnifyApps",
			"title":"Wait for signals",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":453,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y",
			"id":"n_9Jm8I",
			"index":27,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_iSpSU.outputs.signals }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":155,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_9Jm8I@n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y@l",
			"id":"_R1dmZ",
			"index":28,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_9Jm8I.outputs.item.signal_payload.success }}",
						"filter":{
							"operator":"EQUAL",
							"value":"false"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Error?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":159,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_R1dmZ@n_9Jm8I@n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y@l@y",
			"id":"_h3gkh",
			"index":29,
			"inputs":{
				"recordId":"{{ od8bl.outputs.caseId }}",
				"writeThroughSessionVariables":true,
				"object_type":"e_ai_agent_conversation_state",
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.errorCount",
						"actionType":"INCREMENT",
						"setValue":"1"
					}
				]
			},
			"skip":false,
			"subTitle":"error count",
			"title":"Update records by query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":11,
				"resourceName":"storage_by_unifyapps_update_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_9Jm8I@n_XM3pu@n_Kyv53@whOJc@AdoDF-1@y@y@y@l",
			"id":"_gChqd",
			"index":30,
			"inputs":{
				"numberOfRecordsToUpdate":"SINGLE",
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_caseId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ od8bl.outputs.caseId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"debug_agent",
				"updateFields":[
					{
						"fieldName":"properties.events",
						"actionType":"ADD",
						"setValue":"{{ __RUN__.outputs.executionId }}-> {{ n_9Jm8I.outputs.item.signal_payload.toolName }}-> toolExecutionSuccess -> {{ n_9Jm8I.outputs.item.signal_payload.success }}"
					}
				],
				"skipIfEmpty":false,
				"page":{
					"offset":0,
					"limit":20
				}
			},
			"skip":true,
			"subTitle":"debug Agent",
			"title":"Update records by query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":155,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Kyv53@whOJc@AdoDF-1@y@n",
			"id":"mRevl",
			"index":31,
			"inputs":{
				"filters":[
					{
						"property":"{{ MFwMy.outputs.tools[0].toolId }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"tool?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mRevl@n_Kyv53@whOJc@AdoDF-1@y@n@y",
			"id":"NApos",
			"index":32,
			"inputs":{
				"automationId":"67df12719fa26d792211be4f",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}",
					"caseId":"{{ od8bl.outputs.caseId }}",
					"thought":"{{ MFwMy.outputs.thought }}",
					"llmResponse":"{{ Tooqh.outputs.llmResponse }}",
					"messageId":"{{ 8GW17.outputs.messageId }}",
					"executeUsingModel":"{{ In9h9.outputs.modelId }}",
					"parallelToolCallEnabled":false,
					"toolId":"{{ MFwMy.outputs.tools[0].toolId }}",
					"toolInputs":"{{ MFwMy.outputs.tools[0].toolInputs }}",
					"toolName":"{{ MFwMy.outputs.tools[0].toolName }}",
					"actionId":"{{ MFwMy.outputs.tools[0].actionId }}",
					"toolAdditional":"{{ MFwMy.outputs.tools[0].toolAdditional }}"
				}
			},
			"skip":false,
			"subTitle":"Execute tool",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":155,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mRevl@n_Kyv53@whOJc@AdoDF-1@y@n@y",
			"id":"1VCbt",
			"index":33,
			"inputs":{
				"filters":[
					{
						"property":"{{ NApos.outputs.success }}",
						"filter":{
							"operator":"EQUAL",
							"value":"false"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Error?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":159,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"1VCbt@mRevl@n_Kyv53@whOJc@AdoDF-1@y@n@y@y",
			"id":"Rp3Er",
			"index":34,
			"inputs":{
				"recordId":"{{ od8bl.outputs.caseId }}",
				"writeThroughSessionVariables":true,
				"object_type":"e_ai_agent_conversation_state",
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.errorCount",
						"actionType":"INCREMENT",
						"setValue":"1"
					}
				]
			},
			"skip":false,
			"subTitle":"error count",
			"title":"Update records by query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":11,
				"resourceName":"storage_by_unifyapps_update_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mRevl@n_Kyv53@whOJc@AdoDF-1@y@n@y",
			"id":"GbxJx",
			"index":35,
			"inputs":{
				"numberOfRecordsToUpdate":"SINGLE",
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_caseId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ od8bl.outputs.caseId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"debug_agent",
				"updateFields":[
					{
						"fieldName":"properties.events",
						"actionType":"ADD",
						"setValue":"{{ __RUN__.outputs.executionId }}-> {{ MFwMy.outputs.toolName }} -> toolExecutionSuccess -> {{ NApos.outputs.success }}"
					}
				],
				"skipIfEmpty":false,
				"page":{
					"offset":0,
					"limit":20
				}
			},
			"skip":true,
			"subTitle":"debug Agent",
			"title":"Update records by query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":154,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"whOJc@AdoDF-1@y",
			"id":"IMlgB",
			"index":36,
			"inputs":{
				"filters":[
					{
						"property":"{{ 8GW17.outputs.retrigger }}",
						"filter":{
							"operator":"EQUAL",
							"value":"false"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"final Answer?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":79,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IMlgB@whOJc@AdoDF-1@y@y",
			"id":"FIysl",
			"index":37,
			"inputs":{
				"automationId":"67b4908aaffe713b4ced2d83",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"completed":true,
					"caseId":"{{ od8bl.outputs.caseId }}",
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}"
				}
			},
			"skip":false,
			"subTitle":"mark answer as completed",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":436,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IMlgB@whOJc@AdoDF-1@y@y",
			"id":"KYLEz",
			"index":38,
			"inputs":{
				"recordId":"{{ od8bl.outputs.caseId }}",
				"writeThroughSessionVariables":true,
				"object_type":"e_ai_agent_conversation_state",
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.agentTriggeredCount",
						"actionType":"SET",
						"setValue":"0"
					},
					{
						"fieldName":"properties.errorCount",
						"actionType":"SET",
						"setValue":"0"
					}
				]
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":160,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"IMlgB@whOJc@AdoDF-1@y@y",
			"id":"yFOAe",
			"index":39,
			"inputs":{
				"result":{
					"success":"true"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":79,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"whOJc@AdoDF-1@n",
			"id":"xuo80",
			"index":40,
			"inputs":{
				"automationId":"67a31b86addac8605df79166",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ od8bl.outputs.caseId }}",
					"messageId":"{{ QP16Q.outputs.messageId }}",
					"createMessageIfAbsent":true,
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}",
					"rawLLMResponse":"{{ Tooqh.outputs.llmResponse }}",
					"executionOutput":"{{ MFwMy.outputs.errorMessage }}"
				}
			},
			"skip":false,
			"subTitle":"ingest tool",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":156,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"whOJc@AdoDF-1@n",
			"id":"WgrTj",
			"index":41,
			"inputs":{
				"variables":[
					{
						"source":"{{ QP16Q.outputs.errorFeedback }}",
						"value":"{{ MFwMy.outputs.errorMessage }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"4Ssfa",
			"index":42,
			"inputs":{
				"object_type":"e_ai_agent_conversation_state",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"id":"{{ od8bl.outputs.caseId }}",
				"readThroughSessionVariables":true
			},
			"skip":false,
			"subTitle":"conv state",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":11,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"Ye3ke",
			"index":43,
			"inputs":{
				"filters":[
					{
						"property":"{{ 4Ssfa.outputs.properties.agentTriggeredCount }}",
						"filter":{
							"operator":"GTE",
							"value":"50"
						}
					},
					{
						"filters":[
							{
								"property":"{{ BC7T2.outputs.supportsStreaming }}",
								"filter":{
									"operator":"EQUAL",
									"value":"true"
								}
							},
							{
								"property":"{{ 4Ssfa.outputs.properties.agentTriggeredCount }}",
								"filter":{
									"operator":"GTE",
									"value":"50"
								}
							}
						],
						"operator":"AND"
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"agent triggered > limit ?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":79,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Ye3ke@AdoDF-1@y",
			"id":"jdaMx",
			"index":44,
			"inputs":{
				"automationId":"67b4908aaffe713b4ced2d83",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"completed":true,
					"caseId":"{{ od8bl.outputs.caseId }}"
				}
			},
			"skip":false,
			"subTitle":"mark answer as completed",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":185,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Ye3ke@AdoDF-1@y",
			"id":"B322J",
			"index":45,
			"inputs":{
				"jsonSchema":{
					"type":"object",
					"properties":{
						"error":{
							"type":"string",
							"title":"error"
						}
					},
					"additionalProperties":false
				},
				"jsonString":"Loop Limit Breached"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialise string to JSON object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":11,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Ye3ke@AdoDF-1@y",
			"id":"7IAtb",
			"index":46,
			"inputs":{
				"result":{
					"success":"false"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":155,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"cHTU1",
			"index":47,
			"inputs":{
				"filters":[
					{
						"property":"{{ 4Ssfa.outputs.properties.errorCount }}",
						"filter":{
							"operator":"GTE",
							"value":"3"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Error > 3",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":170,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"cHTU1@AdoDF-1@y",
			"id":"sWJ66",
			"index":48,
			"inputs":{
				"automationId":"67a31b86addac8605df79166",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ od8bl.outputs.caseId }}",
					"messageId":"{{ QP16Q.outputs.messageId }}",
					"createMessageIfAbsent":true,
					"executionOutput":"Now it's time you MUST give your absolute best final answer. You'll ignore all previous instructions, stop using any tools, and just return your absolute BEST Final answer.",
					"streamingInProgress":false,
					"aiAgentId":"{{ 4Ssfa.outputs.properties.currentAIAgentId }}",
					"rawLLMResponse":"{{ Tooqh.outputs.llmResponse }}"
				}
			},
			"skip":false,
			"subTitle":"Feedback to give final Answer",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":15,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"hxtR4",
			"index":49,
			"inputs":{
				"automationId":"67b43d06948e580ea92513a2",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"IN_MEMORY",
				"version":"-1",
				"parameters":{
					"caseId":"{{ od8bl.outputs.caseId }}",
					"task":"{{ od8bl.outputs.task }}",
					"aiAgentId":"{{ od8bl.outputs.aiAgentId }}",
					"lastExecutedTool":"{{ MFwMy.outputs.toolName }}"
				}
			},
			"skip":false,
			"subTitle":"Retrigger",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":7,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"AdoDF-1",
			"id":"R73tS",
			"index":50,
			"inputs":{
				"result":{
					"success":"{{ hxtR4.outputs.success }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":0,
	"schemaReferences":[
		"entity|e_code_snippet|e_680c75008215ca7e079394ee"
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":50
}
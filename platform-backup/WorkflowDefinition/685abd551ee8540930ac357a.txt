{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1751469748825,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759243561406,
		"deployedBy":-1,
		"deployedDefinitionId":"68dbed295e003e08cdeb2f10",
		"status":"DEPLOYED",
		"version":40,
		"workflowVersion":54
	},
	"edges":[
		{
			"fromNodeId":"fGOsJ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_WaxyR",
			"type":"next"
		},
		{
			"fromNodeId":"n_WaxyR",
			"priority":0,
			"skip":false,
			"toNodeId":"n_WN9qS",
			"type":"next"
		},
		{
			"fromNodeId":"n_WN9qS",
			"priority":0,
			"skip":false,
			"toNodeId":"4QrAm",
			"type":"next"
		},
		{
			"fromNodeId":"4QrAm",
			"priority":0,
			"skip":false,
			"toNodeId":"_wqKCC",
			"type":"next"
		},
		{
			"fromNodeId":"_wqKCC",
			"priority":0,
			"skip":false,
			"toNodeId":"_Vhv41",
			"type":"next"
		},
		{
			"fromNodeId":"_Vhv41",
			"priority":0,
			"skip":false,
			"toNodeId":"vcFSk",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"685abd551ee8540930ac357a",
	"lastModifiedBy":-1,
	"lcName":"schedule knowledge processor",
	"modifiedTime":1759243593863,
	"name":"Schedule knowledge processor",
	"nodes":[
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"callables",
				"resourceVersion":49,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qZH4A-1",
			"id":"fGOsJ",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"success":{
							"type":"boolean",
							"title":"Success",
							"default":false
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"knowledgeId":{
							"type":"string",
							"title":"Knowledge Id"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qZH4A-1",
			"id":"n_WaxyR",
			"index":0,
			"inputs":{
				"object_type":"knowledge",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"id":"{{ fGOsJ.outputs.knowledgeId }}",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qZH4A-1",
			"id":"n_WN9qS",
			"index":0,
			"inputs":{
				"object_type":"knowledge_source",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"id":"{{ n_WaxyR.outputs.properties.applicationInfo.context.resourceName }}",
				"readThroughSessionVariables":true
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":52,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qZH4A-1",
			"id":"4QrAm",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"params":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Params"
						},
						"connections":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Connections"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"knowledgeId":{
							"type":"string",
							"title":"Knowledge Id"
						},
						"connectionId":{
							"type":"string",
							"title":"Connection Id"
						},
						"appName":{
							"type":"string",
							"title":"App Name"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"\ndef map = [\n    \"knowledgeId\": knowledgeId, \n]\n\nif (binding.hasVariable('inputs') && inputs != null) {\n    map.put(\"inputs\", inputs)\n    map.putAll(inputs)\n}\n\nreturn [\n    \"params\": map,\n    \"connections\": binding.hasVariable('connectionId') && binding.hasVariable('appName') ? [(appName):connectionId] : null\n]",
				"isAsync":false,
				"parameters":{
					"inputs":"{{ n_WaxyR.outputs.properties.applicationInfo.inputs }}",
					"knowledgeId":"{{ fGOsJ.outputs.knowledgeId }}",
					"connectionId":"{{ n_WaxyR.outputs.properties.applicationInfo.context.connectionId }}",
					"appName":"{{ n_WaxyR.outputs.properties.applicationInfo.context.appName }}"
				}
			},
			"skip":false,
			"subTitle":"prepare Inputs",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qZH4A-1",
			"id":"_wqKCC",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"nextFireTime":{
							"type":"string",
							"title":"Next Fire Time"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"type":{
							"type":"string",
							"title":"Type"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"import java.time.LocalDateTime\nimport java.time.ZoneOffset\nimport java.time.format.DateTimeFormatter\n\ndef getNextFireTime(x) {\n    return LocalDateTime.now()\n                       .plusMinutes(x)\n                       .atZone(ZoneOffset.systemDefault())\n                       .withZoneSameInstant(ZoneOffset.UTC)\n                       .format(DateTimeFormatter.ISO_INSTANT)\n}\ndef getMinutesFromFrequency(String frequency) {\n    def frequencyMap = [\n        'HOURLY': 60,\n        'DAILY': 1440,      // 24 * 60\n        'WEEKLY': 10080,    // 7 * 24 * 60\n        'MONTHLY': 43200,   // 30 * 24 * 60\n        'YEARLY': 525600    // 365 * 24 * 60\n    ]\n    \n    return frequencyMap[frequency?.toUpperCase()] ?: 1440\n}\n\ndef minutes = getMinutesFromFrequency(type)\n\n\nreturn [\"nextFireTime\": getNextFireTime(minutes) ]",
				"parameters":{
					"type":"{{ n_WN9qS.outputs.properties.refreshFrequency }}"
				}
			},
			"skip":false,
			"subTitle":"get next fire time",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":463,
				"resourceName":"callables_schedule_a_callable",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qZH4A-1",
			"id":"_Vhv41",
			"index":0,
			"inputs":{
				"automation_id":"68542b2278cd2411657b613d",
				"start_time":"{{ _wqKCC.outputs.result.nextFireTime }}",
				"runtimeConnections":{},
				"schedule_type":"ONE_TIME",
				"cancel_existing":true,
				"version":"-1",
				"parameters":{
					"knowledgeId":"{{ fGOsJ.outputs.knowledgeId }}",
					"importerParams":"{{ 4QrAm.outputs.result.params }}",
					"importerConnections":"{{ 4QrAm.outputs.result.connections }}",
					"downloaderAutomation":"{{ n_WN9qS.outputs.properties.downloaderAutomationId }}",
					"ingesterAutomation":"{{ n_WN9qS.outputs.properties.ingesterAutomationId }}",
					"syncMode":"{{ n_WN9qS.outputs.properties.syncMode }}"
				},
				"schedule_name":"knowledge_processor_{{ fGOsJ.outputs.knowledgeId }}"
			},
			"skip":false,
			"subTitle":"Schedule next call",
			"title":"Schedule callable",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":45,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qZH4A-1",
			"id":"vcFSk",
			"index":0,
			"inputs":{
				"result":{
					"success":true
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":148386,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"version":55
}
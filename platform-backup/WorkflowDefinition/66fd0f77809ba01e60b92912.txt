{
	"appsUsed":[
		
	],
	"createdTime":1727860599735,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1758655339348,
		"deployedBy":0,
		"deployedDefinitionId":"68d2f36b38757c179b123326",
		"status":"DEPLOYED",
		"version":72,
		"workflowVersion":96
	},
	"edges":[
		{
			"fromNodeId":"NW4CS",
			"priority":0,
			"skip":false,
			"toNodeId":"_c5C2s",
			"type":"next"
		},
		{
			"fromNodeId":"_c5C2s",
			"priority":0,
			"skip":false,
			"toNodeId":"_gv8UY",
			"type":"next"
		},
		{
			"fromNodeId":"_gv8UY",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_VvyaX",
			"type":"if"
		},
		{
			"fromNodeId":"_VvyaX",
			"priority":0,
			"skip":false,
			"toNodeId":"_rti2E",
			"type":"next"
		},
		{
			"fromNodeId":"_rti2E",
			"priority":0,
			"skip":false,
			"toNodeId":"_zbHrd",
			"type":"next"
		},
		{
			"fromNodeId":"_zbHrd",
			"priority":0,
			"skip":false,
			"toNodeId":"_T61WL",
			"type":"next"
		},
		{
			"fromNodeId":"_T61WL",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"_curmz",
			"type":"next"
		},
		{
			"fromNodeId":"_curmz",
			"priority":0,
			"skip":false,
			"toNodeId":"_GNJFd",
			"type":"next"
		},
		{
			"fromNodeId":"_T61WL",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"_x9FI2",
			"type":"error"
		},
		{
			"fromNodeId":"_gv8UY",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_p8g91",
			"type":"next"
		},
		{
			"fromNodeId":"_p8g91",
			"priority":0,
			"skip":false,
			"toNodeId":"_vX4N3",
			"type":"next"
		},
		{
			"fromNodeId":"_GNJFd",
			"priority":0,
			"skip":false,
			"toNodeId":"_jFdok",
			"type":"next"
		},
		{
			"fromNodeId":"_x9FI2",
			"priority":0,
			"skip":false,
			"toNodeId":"_jFdok",
			"type":"next"
		},
		{
			"fromNodeId":"_vX4N3",
			"priority":0,
			"skip":false,
			"toNodeId":"_jFdok",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"66fd0f77809ba01e60b92912",
	"lastModifiedBy":-1,
	"lcName":"ai agents multimodality table processing",
	"modifiedTime":1759243527919,
	"name":"AI Agents MultiModality Table Processing",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":58,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"NW4CS",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"table":{
							"type":"object",
							"properties":{
								"image_mime_type":{
									"type":"string",
									"title":"image_mime_type"
								},
								"filetype":{
									"type":"string",
									"title":"filetype"
								},
								"text":{
									"type":"string",
									"title":"text"
								},
								"page_number":{
									"type":"number",
									"title":"page_number"
								}
							},
							"additionalProperties":false,
							"title":"table",
							"required":[]
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"modelId":{
							"type":"string",
							"title":"modelId"
						},
						"table":{
							"type":"object",
							"properties":{
								"metadata":{
									"type":"object",
									"properties":{
										"filetype":{
											"type":"string",
											"title":"filetype"
										},
										"page_number":{
											"type":"integer",
											"title":"page_number"
										},
										"filename":{
											"type":"string",
											"title":"filename"
										},
										"languages":{
											"type":"array",
											"items":{
												"type":"string"
											},
											"title":"languages"
										},
										"image_base64":{
											"type":"string",
											"title":"image_base64"
										},
										"image_mime_type":{
											"type":"string",
											"title":"image_mime_type"
										}
									},
									"additionalProperties":false,
									"title":"metadata"
								},
								"element_id":{
									"type":"string",
									"title":"element_id"
								},
								"text":{
									"type":"string",
									"title":"text"
								},
								"type":{
									"type":"string",
									"title":"type"
								}
							},
							"additionalProperties":false,
							"title":"table"
						},
						"context":{
							"type":"string",
							"title":"context"
						},
						"knowledgeId":{
							"type":"string",
							"title":"knowledgeId"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":123,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"_c5C2s",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"llmOutput":{
							"type":"string",
							"title":"llmOutput"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"llmOutput":{
							"type":"string",
							"title":"llmOutput"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":52,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"_gv8UY",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ NW4CS.outputs.table.metadata.image_base64 }}",
						"filter":{
							"operator":"CONTAINS",
							"value":"a"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"template_by_unifyapps",
				"resourceVersion":85,
				"resourceName":"template_by_unifyapps_compile_template",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_gv8UY@kqPAS-1@y",
			"id":"_VvyaX",
			"index":0,
			"inputs":{
				"input_schema":{
					"caption":"{{ NW4CS.outputs.context }}"
				},
				"template_id":"e_67014362aa92dc525d3c833e"
			},
			"skip":false,
			"subTitle":"Template by UnifyApps",
			"title":"Compile template",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":55,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_gv8UY@kqPAS-1@y",
			"id":"_rti2E",
			"index":0,
			"inputs":{
				"automationId":"66dfd76eb70dad256986b784",
				"runtimeConnections":{},
				"synchronous":true,
				"parameters":{
					"aiAgentId":"{{ NW4CS.outputs.aiAgentId }}",
					"modelId":"{{ NW4CS.outputs.modelId }}",
					"content":"{{ _VvyaX.outputs.output }}",
					"image_url":"{{ NW4CS.outputs.table.metadata.image_base64 }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":18,
				"resourceName":"code_by_unifyapps_python",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_gv8UY@kqPAS-1@y",
			"id":"_zbHrd",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"output_str":{
							"type":"string",
							"title":"output_str"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"input_str":{
							"type":"string",
							"title":"input_str"
						}
					},
					"additionalProperties":false
				},
				"code":"import re\npattern = r'\\{(.*?)\\}(?=[^}]*$)'\nmatch = re.search(pattern, input_str, re.DOTALL)\nif match:\n    output_str= '{' + match.group(1) + '}'\nelse:\n    output_str=input_str\n\nresult={\"output_str\":output_str}\n",
				"isAsync":false,
				"parameters":{
					"input_str":"{{ _rti2E.outputs.llmResponse }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Python script",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":21,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"_gv8UY@kqPAS-1@y",
			"id":"_T61WL",
			"index":0,
			"inputs":{
				"jsonSchema":{
					"type":"object",
					"properties":{
						"is_info_present_in_image":{
							"type":"string",
							"title":"is_info_present_in_image"
						},
						"content":{
							"type":"string",
							"title":"content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"jsonString":"{{ _zbHrd.outputs.result.output_str }}"
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialise string to JSON object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":21,
				"resourceName":"utility_by_unifyapps_to_json_string",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_T61WL@_gv8UY@kqPAS-1@y@success",
			"id":"_curmz",
			"index":0,
			"inputs":{
				"object":"{{ _T61WL.outputs.result.content }}"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Serialise object to JSON string",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":64,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_T61WL@_gv8UY@kqPAS-1@y@success",
			"id":"_GNJFd",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ _c5C2s.outputs.llmOutput }}",
						"value":"{{ _curmz.outputs.result }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":64,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_T61WL@_gv8UY@kqPAS-1@y@error",
			"id":"_x9FI2",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ _c5C2s.outputs.llmOutput }}",
						"value":"."
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":55,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_gv8UY@kqPAS-1@n",
			"id":"_p8g91",
			"index":0,
			"inputs":{
				"automationId":"66dfd76eb70dad256986b784",
				"runtimeConnections":{},
				"synchronous":true,
				"parameters":{
					"aiAgentId":"{{ NW4CS.outputs.aiAgentId }}",
					"modelId":"{{ NW4CS.outputs.modelId }}",
					"content":"Context: {{ NW4CS.outputs.context }} , Given the context ,Generate Description for this table content:{{ NW4CS.outputs.table.text }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":64,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_gv8UY@kqPAS-1@n",
			"id":"_vX4N3",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ _c5C2s.outputs.llmOutput }}",
						"value":"Description: {{ _p8g91.outputs.llmResponse }} ------------ Content: {{ NW4CS.outputs.table.text }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":49,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kqPAS-1",
			"id":"_jFdok",
			"index":0,
			"inputs":{
				"result":{
					"table":{
						"image_mime_type":"{{ NW4CS.outputs.table.metadata.image_mime_type }}",
						"filetype":"{{ NW4CS.outputs.table.metadata.filetype }}",
						"text":"{{ _c5C2s.outputs.llmOutput }}",
						"page_number":"{{ NW4CS.outputs.table.metadata.page_number }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":295,
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":97
}
{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1757961523458,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1757961523647,
		"deployedBy":45771,
		"deployedDefinitionId":"68c85d335baa5c1e834914af",
		"status":"DEPLOYED",
		"version":1,
		"workflowVersion":22
	},
	"edges":[
		{
			"fromNodeId":"n_s8y4v",
			"priority":0,
			"skip":false,
			"toNodeId":"n_guAs9",
			"type":"next"
		},
		{
			"fromNodeId":"n_guAs9",
			"priority":0,
			"skip":false,
			"toNodeId":"n_aICYv",
			"type":"next"
		},
		{
			"fromNodeId":"n_aICYv",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_agPQ5",
			"type":"if"
		},
		{
			"fromNodeId":"n_agPQ5",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oVFs8",
			"type":"next"
		},
		{
			"fromNodeId":"n_aICYv",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oVFs8",
			"type":"next"
		},
		{
			"fromNodeId":"n_oVFs8",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oVFs8@1",
			"type":"branch"
		},
		{
			"fromNodeId":"n_oVFs8@1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Ry43v",
			"type":"next"
		},
		{
			"fromNodeId":"n_Ry43v",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_0mVPC",
			"type":"if"
		},
		{
			"fromNodeId":"n_0mVPC",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DZOxu",
			"type":"next"
		},
		{
			"fromNodeId":"n_Ry43v",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DZOxu",
			"type":"next"
		},
		{
			"fromNodeId":"n_DZOxu",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Vyzts",
			"type":"next"
		},
		{
			"fromNodeId":"n_Vyzts",
			"priority":0,
			"skip":false,
			"toNodeId":"n_JTvn3",
			"type":"next"
		},
		{
			"fromNodeId":"n_JTvn3",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ALzWF",
			"type":"next"
		},
		{
			"fromNodeId":"n_ALzWF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_fEVtw",
			"type":"next"
		},
		{
			"fromNodeId":"n_oVFs8",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oVFs8@2",
			"type":"branch"
		},
		{
			"fromNodeId":"n_oVFs8@2",
			"priority":0,
			"skip":false,
			"toNodeId":"_VgVhM",
			"type":"next"
		},
		{
			"fromNodeId":"n_oVFs8",
			"name":"3",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oVFs8@3",
			"type":"branch"
		},
		{
			"fromNodeId":"n_oVFs8@3",
			"priority":0,
			"skip":false,
			"toNodeId":"n_EKizV",
			"type":"next"
		},
		{
			"fromNodeId":"n_EKizV",
			"priority":0,
			"skip":false,
			"toNodeId":"_IOABZ",
			"type":"next"
		},
		{
			"fromNodeId":"_IOABZ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_T8Cij",
			"type":"next"
		},
		{
			"fromNodeId":"n_T8Cij",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gGzg0",
			"type":"loop"
		},
		{
			"fromNodeId":"n_gGzg0",
			"priority":0,
			"skip":false,
			"toNodeId":"_FyFPd",
			"type":"next"
		},
		{
			"fromNodeId":"_FyFPd",
			"priority":0,
			"skip":false,
			"toNodeId":"_MBIDW",
			"type":"next"
		},
		{
			"fromNodeId":"_MBIDW",
			"priority":0,
			"skip":false,
			"toNodeId":"_4prjl",
			"type":"next"
		},
		{
			"fromNodeId":"_4prjl",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_T8Cij",
			"type":"next"
		},
		{
			"fromNodeId":"n_oVFs8",
			"name":"4",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oVFs8@4",
			"type":"branch"
		},
		{
			"fromNodeId":"n_oVFs8@4",
			"priority":0,
			"skip":false,
			"toNodeId":"_7Ag1D",
			"type":"next"
		},
		{
			"fromNodeId":"_7Ag1D",
			"priority":0,
			"skip":false,
			"toNodeId":"_Hm7TQ",
			"type":"next"
		},
		{
			"fromNodeId":"_Hm7TQ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_WSZXy",
			"type":"next"
		},
		{
			"fromNodeId":"n_WSZXy",
			"priority":0,
			"skip":false,
			"toNodeId":"_Zp2cF",
			"type":"next"
		},
		{
			"fromNodeId":"_Zp2cF",
			"priority":0,
			"skip":false,
			"toNodeId":"_42XCo",
			"type":"loop"
		},
		{
			"fromNodeId":"_42XCo",
			"priority":0,
			"skip":false,
			"toNodeId":"_xuieV",
			"type":"next"
		},
		{
			"fromNodeId":"_xuieV",
			"priority":0,
			"skip":false,
			"toNodeId":"_myblc",
			"type":"next"
		},
		{
			"fromNodeId":"_myblc",
			"priority":0,
			"skip":false,
			"toNodeId":"_SBc2p",
			"type":"next"
		},
		{
			"fromNodeId":"_SBc2p",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"_Zp2cF",
			"type":"next"
		},
		{
			"fromNodeId":"n_fEVtw",
			"priority":0,
			"skip":false,
			"toNodeId":"n_CoIC8",
			"type":"next"
		},
		{
			"fromNodeId":"_VgVhM",
			"priority":0,
			"skip":false,
			"toNodeId":"n_CoIC8",
			"type":"next"
		},
		{
			"fromNodeId":"n_T8Cij",
			"priority":0,
			"skip":false,
			"toNodeId":"n_CoIC8",
			"type":"next"
		},
		{
			"fromNodeId":"_Zp2cF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_CoIC8",
			"type":"next"
		},
		{
			"fromNodeId":"n_oVFs8",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"n_CoIC8",
			"type":"branch"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68c10781b8af1c3fa0474f80",
	"lastModifiedBy":-1,
	"lcName":"eval | metrics | update metric dependencies",
	"modifiedTime":1759371929589,
	"name":"Eval | Metrics | Update Metric Dependencies",
	"nodes":[
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":621,
				"resourceName":"storage_by_unifyapps_on_any_change"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_o2uBk-1",
			"id":"n_s8y4v",
			"index":1,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"{{ n_s8y4v.outputs.change_type }}",
							"filter":{
								"operator":"NOT_EQUAL",
								"value":"UPDATED"
							}
						},
						{
							"filters":[
								{
									"property":"{{ n_s8y4v.outputs.object.properties.type }}",
									"filter":{
										"operator":"EQUAL",
										"value":"DERIVED"
									}
								},
								{
									"property":"{{ n_s8y4v.outputs.before.properties.metricConfig.base_metrics }}",
									"filter":{
										"operator":"NOT_EQUAL",
										"value":"{{ n_s8y4v.outputs.object.properties.metricConfig.base_metrics }}"
									}
								}
							],
							"operator":"AND"
						},
						{
							"filters":[
								{
									"property":"{{ n_s8y4v.outputs.object.properties.type }}",
									"filter":{
										"operator":"NOT_EQUAL",
										"value":"DERIVED"
									}
								},
								{
									"property":"{{ n_s8y4v.outputs.before.properties.evaluationParameters }}",
									"filter":{
										"operator":"NOT_EQUAL",
										"value":"{{ n_s8y4v.outputs.object.properties.evaluationParameters }}"
									}
								}
							],
							"operator":"AND"
						}
					],
					"operator":"OR"
				},
				"object_type":"e_ai_evaluation_metric"
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Changed record",
			"trigger":{
				"type":"EVENT"
			},
			"type":"START"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.input.changeType",
					"root.parameters.input.object",
					"root.parameters.input.before"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_o2uBk-1",
			"id":"n_guAs9",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"continue":{
							"type":"boolean",
							"title":"Continue"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"input":{
							"type":"object",
							"properties":{
								"changeType":{
									"type":"string",
									"title":"Change Type"
								},
								"object":{
									"type":"object",
									"properties":{},
									"additionalProperties":false,
									"title":"Object",
									"required":[]
								},
								"before":{
									"type":"object",
									"properties":{},
									"additionalProperties":false,
									"title":"Before"
								}
							},
							"additionalProperties":false,
							"title":"Input",
							"required":[]
						}
					}
				},
				"code":"def input = binding.hasVariable('input') ? input : [:]\n\nboolean shouldContinue = false\n\nif (input.changeType != \"UPDATED\") {\n    shouldContinue = true\n} else if (input.object?.type == \"DERIVED\") {\n    // compare list of strings safely\n    shouldContinue = (input.object?.base_metrics?.toSet() != input.before?.base_metrics?.toSet())\n} else  {\n    // compare evaluationParameters safely\n    shouldContinue = (input.object?.evaluationParameters?.toSet() != input.before?.evaluationParameters?.toSet())\n}\n\nreturn [\"continue\": shouldContinue]\n",
				"compile_static":false,
				"parameters":{
					"input":{
						"changeType":"{{ n_s8y4v.outputs.change_type }}",
						"object":"{{ n_s8y4v.outputs.object.properties }}",
						"before":"{{ n_s8y4v.outputs.before.properties }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Check if it is an genuine udpate",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_o2uBk-1",
			"id":"n_aICYv",
			"index":3,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_guAs9.outputs.result.continue }}",
						"filter":{
							"operator":"EQUAL",
							"value":"false"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Stop execution if continue equals to false",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_aICYv@_o2uBk-1@y",
			"id":"n_agPQ5",
			"index":4,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_o2uBk-1",
			"id":"n_oVFs8",
			"index":5,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"DERIVED",
							"conditions":{
								"filters":[
									{
										"property":"{{ n_s8y4v.outputs.object.properties.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"DERIVED"
										}
									},
									{
										"property":"{{ n_s8y4v.outputs.change_type }}",
										"filter":{
											"operator":"NOT_EQUAL",
											"value":"DELETED"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"DELETED (DERIVED)",
							"conditions":{
								"filters":[
									{
										"property":"{{ n_s8y4v.outputs.object.properties.type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"DERIVED"
										}
									},
									{
										"property":"{{ n_s8y4v.outputs.change_type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"DELETED"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"3",
						"inputs":{
							"name":"NON-DERIVED",
							"conditions":{
								"filters":[
									{
										"property":"{{ n_s8y4v.outputs.object.properties.type }}",
										"filter":{
											"operator":"NOT_EQUAL",
											"value":"DERIVED"
										}
									},
									{
										"property":"{{ n_s8y4v.outputs.change_type }}",
										"filter":{
											"operator":"NOT_EQUAL",
											"value":"DELETED"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"4",
						"inputs":{
							"name":"DELETED (NON-DERIVED)",
							"conditions":{
								"filters":[
									{
										"property":"{{ n_s8y4v.outputs.object.properties.type }}",
										"filter":{
											"operator":"NOT_EQUAL",
											"value":"DERIVED"
										}
									},
									{
										"property":"{{ n_s8y4v.outputs.change_type }}",
										"filter":{
											"operator":"EQUAL",
											"value":"DELETED"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@1",
			"id":"n_oVFs8@1",
			"index":6,
			"inputs":{
				"name":"DERIVED",
				"conditions":{
					"filters":[
						{
							"property":"{{ n_s8y4v.outputs.object.properties.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"DERIVED"
							}
						},
						{
							"property":"{{ n_s8y4v.outputs.change_type }}",
							"filter":{
								"operator":"NOT_EQUAL",
								"value":"DELETED"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@1",
			"id":"n_Ry43v",
			"index":7,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_s8y4v.outputs.change_type }}",
						"filter":{
							"operator":"EQUAL",
							"value":"UPDATED"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Delete Dependencies only if they existed",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":621,
				"resourceName":"storage_by_unifyapps_delete_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Ry43v@n_oVFs8@_o2uBk-1@1@y",
			"id":"n_0mVPC",
			"index":8,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_derived_metric",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_s8y4v.outputs.before.id }}"
							}
						},
						{
							"property":"properties_base_metric",
							"filter":{
								"operator":"IN",
								"value":"{{ n_s8y4v.outputs.before.properties.metricConfig.base_metrics }}"
							}
						}
					],
					"operator":"AND"
				},
				"writeThroughSessionVariables":false,
				"object_type":"metric_dependency",
				"numberOfRecordsToDelete":"MULTIPLE",
				"page":{
					"limit":200,
					"offset":0
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Delete records",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.base_metrics.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@1",
			"id":"n_DZOxu",
			"index":9,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"records":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"base_metric":{
										"type":"string",
										"title":"Base Metric"
									},
									"derived_metric":{
										"type":"string",
										"title":"Derived Metric"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Records"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"base_metrics":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Base Metrics"
						},
						"derived_metric":{
							"type":"string",
							"title":"Derived Metric"
						}
					}
				},
				"code":"def base_metrics = binding.hasVariable('base_metrics') ? base_metrics : null\ndef derived_metric = binding.hasVariable('derived_metric') ? derived_metric : null\n\nif (base_metrics == null || derived_metric == null) return null;\n\ndef records = base_metrics.collect { baseMetric ->\n    [base_metric: baseMetric, derived_metric: derived_metric]\n}\n\nreturn [records : records]",
				"compile_static":false,
				"parameters":{
					"derived_metric":"{{ n_s8y4v.outputs.object.id }}",
					"base_metrics":{
						"source":"{{ n_s8y4v.outputs.object.properties.metricConfig.base_metrics }}",
						"ua:type":"mappedArray",
						"items":"{{ n_s8y4v.outputs.object.properties.metricConfig.base_metrics[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.records.items.base_metric",
					"root.records.items.derived_metric"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":616,
				"resourceName":"storage_by_unifyapps_bulk_create_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@1",
			"id":"n_Vyzts",
			"index":10,
			"inputs":{
				"object_type":"metric_dependency",
				"skipIfBlank":false,
				"records":{
					"source":"{{ n_DZOxu.outputs.result.records }}",
					"ua:type":"mappedArray",
					"items":{
						"base_metric":"{{ n_DZOxu.outputs.result.records[0].base_metric }}",
						"derived_metric":"{{ n_DZOxu.outputs.result.records[0].derived_metric }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Create Dependencies",
			"title":"Create or update records in bulk",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":634,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@1",
			"id":"n_JTvn3",
			"index":11,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"IN",
								"value":"{{ n_s8y4v.outputs.object.properties.metricConfig.base_metrics }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"e_ai_evaluation_metric",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":200
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":true,
			"subTitle":"Fetch all Base metircs",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.items.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@1",
			"id":"n_ALzWF",
			"index":12,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"evaluationParameters":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Evaluation Parameters"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"items":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Items"
						}
					}
				},
				"code":"def items = binding.hasVariable('items') ? binding.getVariable('items') : []\n\nif (!items) {\n    return [evaluationParameters: []]\n}\n\n// Collect evaluationParameters from each object and flatten them into one list\ndef allParams = items.collectMany { it.properties.evaluationParameters ?: [] }\n\nreturn [evaluationParameters: allParams.unique()]\n",
				"compile_static":false,
				"parameters":{
					"items":{
						"source":"{{ n_JTvn3.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ n_JTvn3.outputs.objects[0] }}"
					}
				}
			},
			"skip":true,
			"subTitle":"Get Distinct Evaluation parameters",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":623,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@1",
			"id":"n_fEVtw",
			"index":13,
			"inputs":{
				"recordId":"{{ n_s8y4v.outputs.object.id }}",
				"writeThroughSessionVariables":false,
				"object_type":"e_ai_evaluation_metric",
				"skipIfBlank":false,
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.evaluationParameters",
						"actionType":"SET",
						"setValue":"{{ n_ALzWF.outputs.result.evaluationParameters }}"
					}
				],
				"unsetIfNull":false
			},
			"skip":true,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@2",
			"id":"n_oVFs8@2",
			"index":14,
			"inputs":{
				"name":"DELETED (DERIVED)",
				"conditions":{
					"filters":[
						{
							"property":"{{ n_s8y4v.outputs.object.properties.type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"DERIVED"
							}
						},
						{
							"property":"{{ n_s8y4v.outputs.change_type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"DELETED"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":621,
				"resourceName":"storage_by_unifyapps_delete_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@2",
			"id":"_VgVhM",
			"index":15,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_derived_metric",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_s8y4v.outputs.before.id }}"
							}
						}
					],
					"operator":"AND"
				},
				"writeThroughSessionVariables":false,
				"object_type":"metric_dependency",
				"numberOfRecordsToDelete":"MULTIPLE",
				"page":{
					"limit":2000,
					"offset":0
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Delete records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@3",
			"id":"n_oVFs8@3",
			"index":16,
			"inputs":{
				"name":"NON-DERIVED",
				"conditions":{
					"filters":[
						{
							"property":"{{ n_s8y4v.outputs.object.properties.type }}",
							"filter":{
								"operator":"NOT_EQUAL",
								"value":"DERIVED"
							}
						},
						{
							"property":"{{ n_s8y4v.outputs.change_type }}",
							"filter":{
								"operator":"NOT_EQUAL",
								"value":"DELETED"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":634,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@3",
			"id":"n_EKizV",
			"index":17,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_base_metric",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_s8y4v.outputs.object.id }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"metric_dependency",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":200
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.items.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@3",
			"id":"_IOABZ",
			"index":18,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"derived_metrics":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Derived Metrics"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"items":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Items"
						}
					}
				},
				"code":"def items = binding.hasVariable('items') ? binding.getVariable('items') : []\n\nif (!items) {\n    return [derived_metrics: []]\n}\n\ndef derived_metrics = items.collectMany { it.properties.derived_metric }\n\nreturn [derived_metrics: derived_metrics.unique()]\n",
				"compile_static":false,
				"parameters":{
					"items":{
						"source":"{{ n_EKizV.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ n_EKizV.outputs.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Get Distinct Derived Metrics",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":456,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@3",
			"id":"n_T8Cij",
			"index":19,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ _IOABZ.outputs.result.derived_metrics }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"For Each Derived Metric",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":176,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_T8Cij@n_oVFs8@_o2uBk-1@3@l",
			"id":"n_gGzg0",
			"index":20,
			"inputs":{
				"object_type":"e_ai_evaluation_metric",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"id":"{{ n_T8Cij.outputs.item }}",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"Fetch Derived metric",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":634,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_T8Cij@n_oVFs8@_o2uBk-1@3@l",
			"id":"_FyFPd",
			"index":21,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"IN",
								"value":"{{ n_gGzg0.outputs.properties.metricConfig.base_metrics }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"e_ai_evaluation_metric",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":200
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"Fetch all Base metircs",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.items.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_T8Cij@n_oVFs8@_o2uBk-1@3@l",
			"id":"_MBIDW",
			"index":22,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"evaluationParameters":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Evaluation Parameters"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"items":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Items"
						}
					}
				},
				"code":"def items = binding.hasVariable('items') ? binding.getVariable('items') : []\n\nif (!items) {\n    return [evaluationParameters: []]\n}\n\n// Collect evaluationParameters from each object and flatten them into one list\ndef allParams = items.collectMany { it.properties.evaluationParameters ?: [] }\n\nreturn [evaluationParameters: allParams.unique()]\n",
				"compile_static":false,
				"parameters":{
					"items":{
						"source":"{{ _FyFPd.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ _FyFPd.outputs.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Get Distinct Evaluation parameters",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":623,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_T8Cij@n_oVFs8@_o2uBk-1@3@l",
			"id":"_4prjl",
			"index":23,
			"inputs":{
				"recordId":"{{ n_T8Cij.outputs.item }}",
				"writeThroughSessionVariables":false,
				"object_type":"e_ai_evaluation_metric",
				"skipIfBlank":false,
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.evaluationParameters",
						"actionType":"SET",
						"setValue":"{{ _MBIDW.outputs.result.evaluationParameters }}"
					}
				],
				"unsetIfNull":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@4",
			"id":"n_oVFs8@4",
			"index":24,
			"inputs":{
				"name":"DELETED (NON-DERIVED)",
				"conditions":{
					"filters":[
						{
							"property":"{{ n_s8y4v.outputs.object.properties.type }}",
							"filter":{
								"operator":"NOT_EQUAL",
								"value":"DERIVED"
							}
						},
						{
							"property":"{{ n_s8y4v.outputs.change_type }}",
							"filter":{
								"operator":"EQUAL",
								"value":"DELETED"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":634,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@4",
			"id":"_7Ag1D",
			"index":25,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_base_metric",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_s8y4v.outputs.before.id }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"metric_dependency",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":200
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.items.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@4",
			"id":"_Hm7TQ",
			"index":26,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"derived_metrics":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Derived Metrics"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"items":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Items"
						}
					}
				},
				"code":"def items = binding.hasVariable('items') ? binding.getVariable('items') : []\n\nif (!items) {\n    return [derived_metrics: []]\n}\n\ndef derived_metrics = items.collectMany { it.properties.derived_metric }\n\nreturn [derived_metrics: derived_metrics.unique()]\n",
				"compile_static":false,
				"parameters":{
					"items":{
						"source":"{{ _7Ag1D.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ _7Ag1D.outputs.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Get Distinct Derived Metrics",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":621,
				"resourceName":"storage_by_unifyapps_delete_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@4",
			"id":"n_WSZXy",
			"index":27,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_base_metric",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ n_s8y4v.outputs.before.id }}"
							}
						}
					],
					"operator":"AND"
				},
				"writeThroughSessionVariables":false,
				"object_type":"metric_dependency",
				"numberOfRecordsToDelete":"MULTIPLE",
				"page":{
					"limit":200,
					"offset":0
				}
			},
			"skip":true,
			"subTitle":"Storage by UnifyApps",
			"title":"Delete records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":456,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_oVFs8@_o2uBk-1@4",
			"id":"_Zp2cF",
			"index":28,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ _Hm7TQ.outputs.result.derived_metrics }}",
				"captureIterations":false
			},
			"skip":true,
			"subTitle":"For Each Derived Metric",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":176,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Zp2cF@n_oVFs8@_o2uBk-1@4@l",
			"id":"_42XCo",
			"index":29,
			"inputs":{
				"object_type":"e_ai_evaluation_metric",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"id":"{{ _Zp2cF.outputs.item }}",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"Fetch Derived metric",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":634,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Zp2cF@n_oVFs8@_o2uBk-1@4@l",
			"id":"_xuieV",
			"index":30,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"IN",
								"value":"{{ _42XCo.outputs.properties.metricConfig.base_metrics }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"e_ai_evaluation_metric",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":200
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"Fetch all Base metircs",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.items.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Zp2cF@n_oVFs8@_o2uBk-1@4@l",
			"id":"_myblc",
			"index":31,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"evaluationParameters":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Evaluation Parameters"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"items":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Items"
						}
					}
				},
				"code":"def items = binding.hasVariable('items') ? binding.getVariable('items') : []\n\nif (!items) {\n    return [evaluationParameters: []]\n}\n\n// Collect evaluationParameters from each object and flatten them into one list\ndef allParams = items.collectMany { it.properties.evaluationParameters ?: [] }\n\nreturn [evaluationParameters: allParams.unique()]\n",
				"compile_static":false,
				"parameters":{
					"items":{
						"source":"{{ _xuieV.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ _xuieV.outputs.objects[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Get Distinct Evaluation parameters",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":623,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Zp2cF@n_oVFs8@_o2uBk-1@4@l",
			"id":"_SBc2p",
			"index":32,
			"inputs":{
				"recordId":"{{ _Zp2cF.outputs.item }}",
				"writeThroughSessionVariables":false,
				"object_type":"e_ai_evaluation_metric",
				"skipIfBlank":false,
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.evaluationParameters",
						"actionType":"SET",
						"setValue":"{{ _myblc.outputs.result.evaluationParameters }}"
					}
				],
				"unsetIfNull":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"stop"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_o2uBk-1",
			"id":"n_CoIC8",
			"index":33,
			"skip":false,
			"subTitle":"Stop",
			"title":"Stop",
			"type":"STOP"
		}
	],
	"ownerUserId":45771,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":33
}
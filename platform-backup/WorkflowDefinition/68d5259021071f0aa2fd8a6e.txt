{
	"appsUsed":[
		
	],
	"createdTime":1758799248278,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1758830627256,
		"deployedBy":155341,
		"deployedDefinitionId":"68d5a0238c11012d58747142",
		"status":"DEPLOYED",
		"version":7,
		"workflowVersion":26
	},
	"edges":[
		{
			"fromNodeId":"n_NNfvg",
			"priority":0,
			"skip":false,
			"toNodeId":"_pcuC0",
			"type":"next"
		},
		{
			"fromNodeId":"_pcuC0",
			"priority":0,
			"skip":false,
			"toNodeId":"_eYsJE",
			"type":"next"
		},
		{
			"fromNodeId":"_eYsJE",
			"priority":0,
			"skip":false,
			"toNodeId":"n_LMCf4",
			"type":"next"
		}
	],
	"id":"68d5259021071f0aa2fd8a6e",
	"lastModifiedBy":155341,
	"lcName":"insights | failure percentage of all automations",
	"modifiedTime":1758831998995,
	"name":"INSIGHTS | Failure percentage of all automations",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":875,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_MdNb4-1",
			"id":"n_NNfvg",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"success":{
							"type":"string",
							"title":"Success"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"limit":{
							"type":"integer",
							"title":"Limit"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":860,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_MdNb4-1",
			"id":"_pcuC0",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"startMillis":{
							"type":"number",
							"title":"Start Millis"
						},
						"endMillis":{
							"type":"number",
							"title":"End Millis"
						},
						"limit":{
							"type":"integer",
							"title":"Limit"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"limit":{
							"type":"integer",
							"title":"Limit"
						},
						"origin":{
							"type":"string",
							"title":"Origin"
						}
					}
				},
				"code":"import java.time.*\nimport java.time.format.DateTimeFormatter\n\n// Define the IST timezone\ndef istZoneId = ZoneId.of(\"Asia/Kolkata\")\n\n// Get the current date in IST\ndef todayIST = LocalDate.now(istZoneId)\n\n// Calculate the start of the day in IST (midnight)\ndef startOfTodayIST = todayIST.atStartOfDay(istZoneId)\n\n// Calculate the end of the day in IST (the last millisecond)\ndef endOfTodayIST = startOfTodayIST.plusDays(1).minusNanos(1_000_000) // .minus(1, ChronoUnit.MILLIS)\n\n// Convert to milliseconds (epoch milli is always UTC-based)\ndef startMillis = startOfTodayIST.toInstant().toEpochMilli()\ndef endMillis = endOfTodayIST.toInstant().toEpochMilli()\n\ndef limit = binding.hasVariable('limit') ? limit : 10\n\nreturn [\n    startMillis: startMillis,\n    endMillis: endMillis,\n    limit: limit,\n    origin: origin\n]\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"limit":"{{ n_NNfvg.outputs.limit }}",
					"origin":"{{ __RUN__.outputs.origin }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"analytics_by_unifyapps",
				"resourceVersion":790,
				"resourceName":"analytics_by_unifyapps_execute_query",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_MdNb4-1",
			"id":"_eYsJE",
			"index":3,
			"inputs":{
				"query":"SELECT\n    workflowId,\n    COUNT(CASE WHEN status IN ('FAILED') THEN 1 END) AS failed_runs,\n    COUNT(*) AS total_runs,\n    CAST(COUNT(CASE WHEN status IN ('FAILED') THEN 1 END) AS FLOAT) / COUNT(*) AS failure_ratio\nFROM\n    WORKFLOW_EXECUTION\nWHERE\n    status IN ('COMPLETED', 'FAILED', 'CANCELLED')\n    AND startTime >= {{ _pcuC0.outputs.result.startMillis }}\n    AND startTime <= {{ _pcuC0.outputs.result.endMillis }}\nGROUP BY\n    workflowId\nORDER BY\n    failure_ratio DESC, failed_runs DESC\nLIMIT {{ _pcuC0.outputs.result.limit }};",
				"group":"PLATFORM"
			},
			"skip":false,
			"subTitle":"Analytics by UnifyApps",
			"title":"Execute Analytics SQL Query",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":892,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_MdNb4-1",
			"id":"n_LMCf4",
			"index":4,
			"inputs":{
				"result":{
					"success":"200"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":155341,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"tags":[
		
	],
	"version":30
}